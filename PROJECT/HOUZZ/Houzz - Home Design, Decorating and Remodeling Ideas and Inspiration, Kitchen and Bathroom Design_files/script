window.hzmr = window.hzmr || [];
/************* Start filterRenderer.js for locale en-US **************/
try {HZ.navigation.Utils=new function(){function a(a){a.stopPropagation();var b=$(a.target).closest(".sidebar"),c=$(b).find(".sidebar-header .toggle"),d=$(b).find(".sidebar-body"),e=Math.floor(d.height()/200*300);c.hasClass("more-icon")?(c.addClass("down-icon").removeClass("more-icon"),d.slideDown(e,function(){b.removeClass("state-collapsed")})):c.hasClass("down-icon")&&(c.addClass("more-icon").removeClass("down-icon"),d.slideUp(e,function(){b.addClass("state-collapsed")}))}this.expandBox=function(a){$("#"+a+" .hidden").removeClass("hidden"),$("#"+a+"More").hide()},this.handleMetroAreaChanged=function(a){var b=document.getElementById("metroAreaSelector"),c=b.options[b.selectedIndex].value,d=a;c=""!==c?"/"+c:"",d.indexOf("/_3_")>0?d=d.replace("/_3_",c):d+=c,document.location=d},this.handlePriceFilterChanged=function(a,b){var c;c=a?$(a.target):$(this).parents(".price-filter-form");var d=c.find(".fromPrice").val(),e=c.find(".toPrice").val();return""!=d&&!$.isNumeric(d)||""!=e&&!$.isNumeric(e)?void window.location.reload():""!=d&&""!=e&&(d=parseInt(d,10),e=parseInt(e,10),d>e)?void window.location.reload():(d=Math.max(0,d),""!=e&&(e=Math.max(0,e)),void(document.location=b.replace(/XXXXX/,d).replace(/YYYYY/,e)))},this.attachTickBudgetBox=function(){$(document).ready(function(){$(".filter-budget").on("click","li",function(a){var b=$(a.currentTarget);b.hasClass("selected")?b.removeClass("selected"):(b.addClass("selected"),b.siblings().removeClass("selected"))})})},this.attachMultiSelectionToList=function(){$(document).ready(function(){$(".multiselect").on("click","a",function(a){var b=$(a.currentTarget),c=b.parent(".sidebar-item");c.hasClass("selected")?c.removeClass("selected"):c.addClass("selected")})})},this.initSidebarToggle=function(){$(document).ready(function(){$(".sidebar-header").click(a),$(".sidebar-header .toggle").click(a),$(".sidebar-icon.info-icon").hover(function(){var a=$(this);a.tipBubble({content:a.attr("tooltip-data"),id:"sidebar-tooltip",width:100,offsetX:5,offsetY:16,borderColor:"#ccc",showCloseBtn:!1,position:"absolute",attachTo:"body",fadeDuration:0})},function(){var a=$(this);a.tipBubble("hide")})})},this.init=function(){this.initSidebarToggle(),this.attachMultiSelectionToList()}};

window.hzmr.push("filterRenderer:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End filterRenderer.js  **************/
/************* Start hzGtm.js for locale en-US **************/
try {HZ.ns("HZ.utils"),HZ.utils.Gtm=new function(){var a={enabled:!1,visitMonth:null,refId:null},b=null;this.init=function(c){b=$.extend({},a,c)},this.pushData=function(a,c,d){if(b.enabled){var e={};c||(c=a),e.event=a,e.ecomm_pagetype=c,e.visit_month=b.visitMonth,b.refId?e.m_refid=b.refId:e.m_refid="",d&&$.extend(e,d),"undefined"==typeof dataLayer&&(dataLayer=[]),dataLayer.push(e)}}};

window.hzmr.push("hzGtm:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End hzGtm.js  **************/
/************* Start scrollToTop.js for locale en-US **************/
try {HZ.ns("HZ.StickyFooterActions"),HZ.StickyFooterActions=function(){},HZ.StickyFooterActions.prototype={init:function(a){this.el=document.getElementById("stickyFooterActions"),this.$el=$(this.el),this.attachEvents(),this.currentScrollPosition=$(window).scrollTop(),this.currentScrollPosition>350&&this.$el.removeClass("hide-actions")},attachEvents:function(){$(window).on("scroll.stickyFooterActions",$.throttle(250,this.handleScroll.bind(this)))},detachEvents:function(){$(window).off(".stickyFooterActions")},handleScroll:function(a){var b=$(window).scrollTop();b>this.currentScrollPosition&&b>350?this.$el.removeClass("hide-actions"):350>=b&&this.$el.addClass("hide-actions"),this.currentScrollPosition=b}},HZ.ns("HZ.modules.ScrollToTop"),HZ.modules.ScrollToTop=function(){var a,b,c=function(a){$("body,html").animate({scrollTop:0},500,"swing")},d=function(){var a=!0;if(b||0!==b.length){var c=document.body.clientHeight,d=document.body.scrollHeight;return d&&1.5>d/c?(b.hide(),a=!1):b.show(),a}};return $(document).ready(function(){if(b=$("#ScrollToTopContainer"),b.on("click",c),!b.hasClass("show-action")){var e=d();e||(a=window.setTimeout(d,2500))}}),this}(),HZ.ns("HZ.CustomizeFooterButton"),HZ.CustomizeFooterButton=function(){$(document).ready(function(){var a=$("#customize-cog"),b=a.find(".customize__tooltip");b.length&&a.one("click","#customizeFeedButton, .customize__tooltip-dismiss",function(a){b.addClass("viewed"),HZ.ajaz.CustomizeFooterButton.setViewed()})})}();

window.hzmr.push("scrollToTop:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End scrollToTop.js  **************/
/************* Start cartActions.js for locale en-US **************/
try {HZ.ns("HZ.cart"),HZ.cart.Actions=new function(){function a(a){if(a&&"true"==a.success){var g={hasaccount:HZ.data.CurrentSessionUser?"y":"n"};if(a.hid&&a.qty&&HZ.data.Spaces.get(a.hid)){var h=HZ.data.Spaces.get(a.hid);g.ecomm_prodid="HZ_"+a.hid,h.amtRaw&&(g.ecomm_pvalue=Math.round(h.amtRaw*a.qty*100)/100,g.ecomm_currency=HZ.data.Currencies.get(h.cuid)),g.ecomm_category=h.cat}if(HZ.utils.Gtm.pushData("cart_add","cart",g),a.cartHeaderHTML){if(!showKeepShoppingBox)return _gaq.push(["_trackEvent","MPFlow","cart_add"]),void(window.location.href=HZ.utils.Config.viewShoppingCartUrl);if(HZ.ui.yamdi.Common.hideAllDialogs(),!HZ.data.CurrentSessionUser&&HZ.modules.signupDialog.isInlineSignup)HZ.modules.signupDialog.showDialog();else{var i=a.message&&a.message.message,j=i?a.message.message:_hgt("This item has been added to your cart."),k=i?a.message.title:"";d?HZ.ui.yamdi.Common.confirm(k,j,_hgt("Check Out Now"),function(){window.location.href=HZ.utils.Config.viewShoppingCartUrl},_hgt("Keep Shopping")):HZ.ui.yamdi.Common.confirm(k,j,_hgt("Check Out Now"),function(){window.location.href=HZ.utils.Config.checkoutLaunchUrl},_hgt("Keep Shopping"))}c.broadcastCartUpdate(a),_gaq.push(["_trackEvent","MPFlow","cart_add"])}else b(e,a.errorMessage?a.errorMessage:f)}else b(e,a.errorMessage?a.errorMessage:f)}function b(a,b){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(a,b)}var c=this,d=!1,e=_hgt("Add item to cart"),f=_hgt("This item is not available. Please try again later.");this.addItem=function(b,c,e,f,g){showKeepShoppingBox=void 0===f?!0:f,d=void 0===g?!1:g,HZ.ui.yamdi.Common.loading(_hgt("Adding item to cart")),HZ.ajaz.Services.Cart.addItem(b,c,e,a)},this.subscribeCartUpdate=function(a,b){HZ.message.Bus.subscribe(HZ.message.Messages.CART_UPDATED,a,b)},this.broadcastCartUpdate=function(a){HZ.message.Bus.broadcast(HZ.message.Messages.CART_UPDATED,a)}};

window.hzmr.push("cartActions:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End cartActions.js  **************/
/************* Start signupDialog.js for locale en-US **************/
try {HZ.ns("HZ.modules"),HZ.modules.signupDialog={signupDialog:null,dialogBody:null,dialogTitle:"",newUserUrl:null,existingUserUrl:HZ.utils.Config.checkoutLaunchUrl,isInlineSignup:!1,isCartPage:!1,controls:[],init:function(a){this.dialogTitle=a.dialogTitle,this.newUserUrl=a.newUserUrl,this.isInlineSignup=a.isInlineSignup,this.signupDialog=new HZ.ui.yamdi.Dialog},prepareDialog:function(){if(!this.dialogBody){var a=this.isCartPage?"<div id='header'><div id='vertical-logo'></div></div>":"",b=this.isCartPage?"<span id='dismissPreSignup' class='hzi-font hzi-CloseX pull-right'></span>":"";if(this.dialogBody=$(b+a+"<div id='body'><div id='newUserBtnContainer' class='button'><a id='newUserSignupBtn' class='btn btn-primary btn-lg btn-block' href='"+this.newUserUrl+"' compId='new-user-signup'><span class='btnText'>"+_hgt("New User Checkout")+"</span></a></div><div class='or-container'><span class='text'>OR</span></div><div id='existingUserBtnContainer' class='button'><a id='existingUserSignin' class='btn btn-lg btn-block btn-primary-outline' href='"+this.existingUserUrl+"' compId='existing-user-signin'><span class='btnText'>"+_hgt("Sign In")+"</span></a></div></div>"),this.isCartPage)this.dialogTitle="";else{var c=$("<a class='colorLink' href='javascript:;'>"+_hgt("Keep Shopping")+"<span class='more-icon'></span></a>").on("click",HZ.modules.signupDialog.cancelDialog);this.controls.push(c)}}var d={title:this.dialogTitle,body:this.dialogBody,dialogClassName:"checkout-signup-dialog",controls:this.controls,onViewLoaded:function(){var a=$("#dismissPreSignup");a&&a.on("click",HZ.modules.signupDialog.cancelDialog)}};this.signupDialog.init(d)},cancelDialog:function(){HZ.ui.Yamdi.hide(this.signupDialog)},showDialog:function(){this.prepareDialog(),HZ.ui.Yamdi.show(this.signupDialog)}};

window.hzmr.push("signupDialog:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End signupDialog.js  **************/
/************* Start addToIdeabookDialog.js for locale en-US **************/
try {HZ.ns("HZ.spaceActions"),HZ.spaceActions.AddToIdeabookDialog=new function(){function a(a){var b="newAddToIdeabookDialog_"+a;P.children().each(function(a){this.style.display=this.id==b?"block":"none"}),Q.center()}function b(){var a;if(!HZ.ui.AjaxThrobber.isInCall()){if(a=_.comboSelect("getSelectedOptionValues"),j(""),0==a.length&&!Z)return j(_hgt("Please select an ideabook"));HZ.ui.AjaxThrobber.setInCall(!0),y.length<=0&&d();var b=l.checked?fa:ga,e=k.value;return null!==G?void(a.length>1?HZ.ajaz.Services.saveColorPaletteMulti(F,G,H,JSON.stringify(a),b,e,$.proxy(c,this)):1==a.length?HZ.ajaz.Services.saveColorPalette(F,G,H,a[0],e,b,null,$.proxy(c,this)):Z&&HZ.ajaz.Services.saveColorPalette(F,G,H,Z.id,e,b,null,$.proxy(c,this))):void(a.length>1?HZ.ajaz.Services.addToGalleries(F,JSON.stringify(a),b,e,B,$.proxy(c,this)):1==a.length?HZ.ajaz.Services.addToGallery(F,null,a[0],b,e,B,$.proxy(c,this)):Z&&HZ.ajaz.Services.addToGallery(F,null,Z.id,b,e,B,$.proxy(c,this)))}}function c(b){var c,d,g;if(HZ.ui.AjaxThrobber.setInCall(!1),"true"==b.success)if(J=b,"undefined"!=typeof b.galleryIds&&(c=b.galleryIds),"undefined"!=typeof b.galleryId&&(d=b.galleryId),d&&0!=d?this.setLastGalleryId(b.galleryId):c&&c.length&&this.setLastGalleryId(c[0]),g=$(X).filter(function(a,b){return c?-1!=$.inArray(parseInt(b.id),c):d?b.id==d:void 0}),g&&1==g.length)Fa.call(this,g[0],b.galleryErrors);else if(b.hasOwnProperty("relatedProsData")?z=b.relatedProsData:B=!1,b.hasOwnProperty("localProData")&&!$.isEmptyObject(b.localProData)?(A=b.localProData,C=!0):C=!1,S)T?(a(u),HZ.utils.Logger.sendEventLog(oa),$(".modal-dialog").removeClass("add-collaborate-diag"),this.bindBasicProfileInfoHandlers()):a(o),this.setWelcomeScreen(!1);else if(R){var h=e(b);f(b,h),b.galleryErrors&&j(Ia(b.galleryErrors))}else i();else j(b.houseError?b.houseError:b.galleryErrors?Ia(b.galleryErrors):b.error)}function d(){var a=[99,0,1],b=[n,r,p];switch(D){case"pis_original":a=[99,0,1];break;case"pis_pros":a=[79,20,1];break;default:a=[99,0,1]}y.length=0;for(var c=0,d=a.length;d>c;c++)for(var e=0;e<a[c];e++)y.push(b[c])}function e(a){var b=Math.floor(100*Math.random()),c=y[b],d=!1;switch(c){case p:(U||HZ.data.CurrentSessionUser.hasOwnProperty("trustPilotImps"))&&(d=!0);break;case r:B||(d=!0)}return C?c=t:d&&(c=n),c}function f(b,c){var e,f,g,h,k=b.galleryTitle,l=b.galleryIds,m=b.galleryId,o=HZ.utils.Links.getGalleryLink(m),q=[],s=$("#addToIdeabookCTAMsg"),u=$("#trustPilotCTAMsg");if(l&&(q=$.map(l,function(a){return L[a]})),c==n||c==p){var v=$.map(q,function(a){return"<a class='colorLink trackMe' class='add-to-gallery-link' href='"+HZ.utils.Links.getGalleryLink(a.id)+"'>"+a.title+"</a>"}).join(", ");e=k&&G?"<b>"+_hgt("This palette has been added to:")+'</b><br/><a class="colorLink trackMe text-bold" compid="confirm_color_palette" id="addToIdeabookGalleryLink" href="'+HZ.utils.Links.getGalleryLink(m)+'">'+k+"</a><br/></br/>":k?"<b>"+_hgt("This photo has been added to:")+'</b><br/><a class="colorLink trackMe text-bold" compid="confirm_gallery_name" id="addToIdeabookGalleryLink" href="'+HZ.utils.Links.getGalleryLink(m)+'">'+k+"</a><br/></br/>":l&&G?"<b>"+_hgt("This palette has been added to:")+"</b><br/>"+v:l?"<b>"+_hgt("This photo has been added to:")+"</b><br/>"+v:G?_hgt("This palette has been added to <t1>your ideabook</t1>.",{t1:{tag:"a",attr:{href:o,"class":"colorLink",id:"addToIdeabookGalleryLink"}}})+"<br/><br/>":_hgt("This photo has been added to <t1>your ideabook</t1>.",{t1:{tag:"a",attr:{href:o,"class":"colorLink",id:"addToIdeabookGalleryLink"}}})+"<br/><br/>"}switch(c){case r:var w,x="",y="",B="",C=b.moreProsLink;h=$("#relatedPros"),h.empty();for(var D=0;D<z.length;D++)w=z[D],y=z[D].hasOwnProperty("shortDescription")?"<div class='pro-short-desc'>"+z[D].shortDescription+"</div>":"",x+="<div class='pro-content-container' compId='pro_container'><div class='left-side-pro'><a href=''><img data-no-pin-hover='true' src='"+z[D].coverImageUrl+"' width='120' height='120'></a></div><div class='right-side-pro'><div class='pro-name'><a href='"+z[D].userLink+"'>"+z[D].name+"</a></div>"+y+z[D].ratingHtml+"</div></div>";h.append(x),k?B=_hgt("Ready to work on {ideabook}?",{ideabook:k}):l&&(B=_hgt("Ready to work on your ideabooks?")),$("#proScreenHeader").html(B),$("#moreProsBtn").off().on("click",function(){window.location.href=C}),HZ.utils.Logger.sendEventLog(ja),a(c);break;case t:var E=new HZ.email.PostIdeabookConfirmContactProDialog;A.galleryUrl=o,A.galleryName=k,E.prepare(A),HZ.ui.Yamdi.switchDialog(E),HZ.utils.Logger.sendEventLog(na);break;case n:f=$("#ideabookCompletedMsg"),f.empty().append(e),HZ.utils.Logger.sendEventLog(ia),b.isProduct===!0?(s.hide(),$("#hzEmailSpace").val(_hgt("Email this Product"))):(s.unbind("mousedown").bind("mousedown",function(){HZ.utils.Logger.sendEventLog(ha)}).show(),$("#hzEmailSpace").val(_hgt("Email this Photo"))),a(c),G=null;break;case p:HZ.ui.AjaxThrobber.setInCall(!0),g=$("#trustPilotIdeabookCompletedMsg"),g.empty().append(e),HZ.utils.Logger.sendEventLog(ka),HZ.ajaz.Services.getTrustPilotUrl(HZ.TrustPilot.Settings.getTrustPilotUrl,function(c){c.hasOwnProperty("trustPilotUrl")&&(HZ.data.CurrentSessionUser.trustPilotImps=1,d(),u.attr("href",c.trustPilotUrl),$("#trustPilotReview").click(function(){$(this).attr("href",c.trustPilotUrl),HZ.ajaz.Services.setTrustPilotUserPreference(HZ.TrustPilot.Settings.setTrustPilotUserPreference,function(a){}),HZ.utils.Logger.sendEventLog(ma),i()})),u.unbind("mousedown").bind("mousedown",function(){HZ.utils.Logger.sendEventLog(la),HZ.ajaz.Services.setTrustPilotUserPreference(HZ.TrustPilot.Settings.setTrustPilotUserPreference,function(a){})}).show(),$("#addToIdeabookGalleryLink").attr("href",o),HZ.ui.AjaxThrobber.setInCall(!1),a(p),b.galleryErrors&&j(Ia(b.galleryErrors))},{type:"GET"}),G=null}}function g(){J&&J.spaceId&&J.spaceTitle&&h(J.spaceId,J.spaceTitle,J.isProduct===!0?HZ.sendEmail.texts.DEFAULT_MESSAGE_PRODUCT:HZ.sendEmail.texts.DEFAULT_MESSAGE_SPACE)}function h(a,b,c){HZ.dialogs.EmailDialog.prepare({type:HZ.sendEmail.types.SPACE,referenceId:a,subject:b,message:c,event:HZ.sendEmail.events.ADDTOIBK}),HZ.ui.Yamdi.switchDialog(HZ.dialogs.EmailDialog)}function i(){G=null,Q&&Q.hide(null)}function j(a){var b=$(".addToGalleryFormError");b.empty().append(a),a?b.show():b.hide()}var k,l,m=0,n=1,o=2,p=4,q=5,r=6,s=7,t=8,u=9,v=!1,w=null,x=null,y=[],z=[],A=[],B=!0,C=!1,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=!0,S=!1,T=!1,U=!1,V=!1,W=!1,X=[],Y=[],Z=null,_=null,aa=!1,ba=null,ca=!1,da=_hgt("Photo Added"),ea="professionals",fa=1,ga=3,ha="aticfp",ia="atici",ja="atisrp",ka="atictp",la="atitm",ma="atitb",na="aticcp",oa="bpd_imp";this.init=function(a){F=a},this.setColorPalette=function(a,b){G=a,H=b,da=_hgt("Palette Added")},this.setDelegate=function(a){Q=a},this.setPostIdeabookSaveTestVal=function(a){D=a},this.setTrustPilotReview=function(a){U=a},this.setIsInternational=function(a){v=a},this.setWelcomeLink=function(a){w=a},this.setPostalCode=function(a){x=a},this.setGalleries=function(a){var b;if(K=a,L={},K.recent&&K.recent.length>0)for(var c in K.recent)b=K.recent[c],L[b.id]=b;if(K.own&&K.own.length>0)for(var c in K.own)b=K.own[c],L[b.id]=b;if(K.shared&&K.shared.length>0)for(var c in K.shared)b=K.shared[c],L[b.id]=b},this.setImageId=function(a){I=a},this.getGalleries=function(){return K},this.setUserName=function(a){E=a},this.setShowIdeabookConfirm=function(a){R=a},this.setWelcomeScreen=function(a){S=a},this.setBasicProfileScreen=function(a){T=a},this.setLastGalleryId=function(a){M=a,L&&L[M]&&(Z=L[M])},this.setWishListIdeabookId=function(a){N=a},this.getLastGalleryId=function(){return M},this.setDefaultGalleryTitle=function(a){O=a},this.setUserId=function(a){ba=a};var pa=function(a){HZ.ui.AjaxThrobber.setInCall(!1),aa=!1;var b,c=$(".create-gallery-btn"),d=$("#newGalleryInput");"true"==a.success?(b={title:a.galleryName,id:a.galleryId,isPrivate:a.isPrivate,isFeatured:a.isFeatured},Ba({title:b.title,id:b.id},$("#gallerySelectComboBox .own-galleries-list"),!0,!0,!0,!0),X.push(b),K.own.push(b),L[b.id]=b):j(a.error),$("#newAddToMyGalleryForm").click(),c.hide(),d.val("")},qa=function(a){var b=null;return $.each(L,function(c,d){d.title&&d.title.toLowerCase()===a.toLowerCase()&&(b=c)}),b},ra=function(a){if(j(""),aa)return!1;var b=$("#newGalleryInput").val();return sa(b),!1},sa=function(a){if(""!=a){var b=qa(a);null==b?(aa=!0,HZ.ui.AjaxThrobber.setInCall(!0),HZ.ajaz.Services.newGallery(a,"",!1,null,pa)):(_.comboSelect("hasOption",{value:b})&&(_.comboSelect("setHasTakenAction",{hasTakenAction:!0}),_.comboSelect("addAdditionalSelectedOptions",{value:b})),_.comboSelect("toggleDropdown"))}},ta=function(a){var b=$(this),c=b.val(),d=$(".create-gallery-btn");return""==c?d.hide():d.show(),13===a.keyCode?(a.preventDefault(),a.stopPropagation(),!1):void 0},ua=function(a){var b=$(this),c=b.val();return 13===a.keyCode?(a.preventDefault(),a.stopPropagation(),aa?!1:(sa(c),!1)):void 0},va=function(){$(this).toggleClass("selected"),l.checked=!l.checked};this.handleNewGalleryNameKeyupMobile=function(a){var b=$(".new-gallery"),c=b.find(".create-gallery"),d=b.find("#newGalleryInput").val();""==d?c.hide():c.show()},this.handleNewGalleryNameKeydownMobile=function(a){var b=$(".new-gallery"),c=b.find("#newGalleryInput"),d=c.val(),e=b.find(".create-gallery");a&&13==a.keyCode&&(a.preventDefault()&&a.stopPropagation(),aa||(sa(d),c.val(""),e.hide()))};var wa=function(){var a=$(".new-gallery"),b=a.find("#newGalleryInput"),c=a.find(".create-gallery");c.on("click",function(){var a=$("#newGalleryInput").val();aa||(sa(a),b.val(""),c.hide())})};this.getDialogTemplate=function(){var a=$("<div id='newAddToIdeabookDialog_"+m+"' style='display:none;'><div class='modal-header'>"+_hgt("Save to Ideabook")+"</div><div class='modal-body'><form id='newAddToMyGalleryForm' name='addToMyGalleryForm' action='javascript:;'><div class='chooseGallery form-horizontal row'><div class='addImageWrapper'><img class='dialogImage' src=''></div><div class='addRightContent'><div class='hzp-comboselect' id='gallerySelectComboBox'><div class='hzp-comboselect-trigger'><button class='btn btn-default btn-block dropdown-toggle hzp-comboselect-trigger-button'>"+_hgt("Select an ideabook")+"</button>"+(HZ.utils.Config.isResponsive?"<span class='hzi-font hzi-MH-Close close-comboselect-menu'></span>":"")+"</div><div class='hzp-comboselect-combo dropdown-menu'><div class='hzp-comboselect-search'><span class='hzp-comboselect-search-icon hzi-font hzi-Search'></span><input class='hzp-comboselect-search-input' type='text' autocomplete='off' /><div class='hzp-comboselect-no-result'>"+_hgt("Could not find any ideabooks matching search phrase")+"</div></div><div class='hzp-comboselect-select'><div class='own-galleries'><div class='gallery-group-name text-s text-dt-m text-bold mbs mtm'>"+_hgt("Your Ideabooks")+"</div><ul class='own-galleries-list list-unstyled'></ul></div><div class='shared-galleries'><div class='gallery-group-name text-s text-dt-m text-bold mbs mtm'>"+_hgt("Shared With You")+"</div><ul class='shared-galleries-list list-unstyled'></ul></div></div>"+(HZ.utils.Config.isResponsive?"<li class='new-gallery'><div class='new-gallery-action'><span class='hzi-font hzi-Add-Selection'></span><input id='newGalleryInput' type='text' onkeydown ='HZ.spaceActions.AddToIdeabookDialog.handleNewGalleryNameKeydownMobile.call(this, event);' onkeyup='HZ.spaceActions.AddToIdeabookDialog.handleNewGalleryNameKeyupMobile.call(this, event);' placeholder='"+_hgt("Create New")+"'/><button class='create-gallery create-gallery-action-btn btn btn-primary text-bold' style='display: none;'>"+_hgt("Create")+"</button></div></li>":"<li class='new-gallery'><span class='hzi-font hzi-Add-Selection'></span><input id='newGalleryInput' type='text' /><button class='create-gallery-btn btn btn-primary text-bold' type='button' style='display:none;'>"+_hgt("Create")+"</button></li>")+"</div></div><div class='add-comment'><textarea class='form-control' id='gallerySpaceComments' name='gallerySpaceComments'></textarea><div class='comment-privacy'><a class='comment-privacy-control' href='javascript:void(0);'><span class='add-white-box hzi-font hzi-Check-Sidenav'></span><span class='comment-privacy-text text-xs text-dt-xs'>"+_hgt("Make comment private")+"</span></a></div><label class='checkbox-inline hidden' for='gallerySpaceCommentsPrivacy'><input id='gallerySpaceCommentsPrivacy' name='gallerySpaceCommentsPrivacy' type='checkbox' />"+_hgt("Make Comment Private")+"</label></div>"+(HZ.utils.Config.isResponsive?"<div class='add-comment-placeholder'></div>":"")+"</div><div class='col-xs-12'><div class='addToGalleryFormError alert-warning'></div></div></div></form></div><div class='modal-footer'></div></div>");return a.find(".hzp-comboselect-search-input").attr("placeholder",_hgt("Search For Ideabook")),a.find("#newGalleryInput").attr("placeholder",_hgt("Create New")),a.find("#gallerySpaceComments").attr("placeholder",_hgt("Add notes, What do you like about this photo?")),a},this.getView=function(){if(!P){P=$("<div id='addToIdeabookDialog'></div>").append("<div id='newAddToIdeabookDialog_"+q+"' style='display:none;'><div class='modal-header'>"+_hgt("Save to Ideabook")+"</div><div class='modal-body'><div class='hzLoadingDlgThrobber'></div><div class='hzLoadingDlgMessage'>"+_hgt("Loading your ideabooks...")+"</div></div></div></div>").append(this.getDialogTemplate()).append("<div id='newAddToIdeabookDialog_"+s+"' style='display:none;' scopeid='share_ideabook'><div class='modal-header'>"+da+"</div><div class='modal-body'><div class='form-horizontal row' id='collaborateSection'><div class='addImageWrapper'><img class='dialogImage' src=''></div><div class='addRightContent'><div class='header-5 text-bold top mbxl collaborate-form-header'></div><div id='collaborateBody'></div></div><div class='col-xs-12'><div class='addToGalleryFormError alert-warning'></div></div></div></div><div class='modal-footer'><a class='text-muted collaborate-cancel pull-left' href='javascript:void(0);'>"+_hgt("No, thanks")+"</a></div></div>").append("<div id='newAddToIdeabookDialog_"+n+"' style='display:none;' scopeid='new_confirm'><div class='modal-header'>"+da+"</div><div class='modal-body'><div class='row'><div class='addImageWrapper'><img class='dialogImage'></div><div class='addRightContent'><div id='ideabookCompletedMsg' class='addToIdeabookCompletedMsg text-bold text-l mbm top'></div><div class='confirm-cta header-5'><a id='addToIdeabookCTAMsg' class='colorLink trackMe' compid='pro_banner' href='"+HZ.utils.Links.getPageUrl(ea+"#")+"' target='_blank'><span class='hzi-font hzi-Pro-Fill'></span>"+_hgt("Ready to Renovate?  Find a local Pro")+"<span class='more-icon'></span></a></div></div><div class='col-xs-12'><div class='addToGalleryFormError alert-warning'></div></div></div></div><div class='modal-footer'></div></div>").append("<div id='newAddToIdeabookDialog_"+p+"' style='display:none;'><div class='modal-header'>"+da+"</div><div class='modal-body'><div class='row'><div id='trustPilotConfirmImage' class='addImageWrapper'><img class='dialogImage'></div><div class='addRightContent'><div id='trustPilotIdeabookCompletedMsg' class='addToIdeabookCompletedMsg text-bold text-l mbm top'></div><div class='confirm-cta header-5'><a id='trustPilotCTAMsg' class='colorLink' href='javascript:;' target='_blank'><span class='hzi-font hzi-Heart'></span>"+_hgt("Love Houzz? Write a review about us")+"<span class='more-icon'></span></a></div></div><div class='col-xs-12'><div class='addToGalleryFormError alert-warning'></div></div></div></div><div class='modal-footer'></div></div>").append("<div id='newAddToIdeabookDialog_"+r+"' style='display:none;'><div class='modal-header'>"+_hgt("Saved!")+"</div><div class='modal-body' scopeId='new_related_pros_dialog'><div class='relatedProsInfo'><div id='proScreenHeader' class='pro-screen-text'></div><div id='proScreenSubHeader' class='pro-screen-text'><a class='colorLink trackMe' compId='related_pro_banner' href='"+HZ.utils.Links.getPageUrl(ea+"#")+"' target='_blank'>"+_hgt("Contact a local pro")+"<span class='more-icon'></span></a></div><div id='relatedPros' class=''></div><div><div class='addToGalleryFormError alert-warning'></div></div></div></div><div class='modal-footer'></div></div>").append("<div class='basic-info' id='newAddToIdeabookDialog_"+u+"' style='display:none;'><div class='modal-header text-center'>"+_hgt("Saved! Now introduce yourself")+"</div><div class='modal-body'><div id='welcomeImagesContainer'><div class='row'><div class='col-xs-offset-2 col-xs-8 form-group basic-info__form-group'><label for='basic-info__first-name'>"+_hgt("First Name ")+"<small>"+_hgt("(publicly displayed)")+"</small></label><input type='text' class='form-control basic-info__input' id='basic-info__first-name' name='firstName' placeholder='"+_hgt("First Name")+"'></div></div><div class='row'><div class='col-xs-offset-2 col-xs-8 user-input form-group basic-info__form-group'><label for='basic-info__last-name'>"+_hgt("Last Name ")+" <small>"+_hgt("(publicly displayed)")+"</small></label><input type='text' class='form-control basic-info__input' id='basic-info__last-name' name='lastName' placeholder='"+_hgt("Last Name")+"'></div></div><div class='row'><div class='col-xs-offset-2 col-xs-8 form-group basic-info__form-group'><label for='basic-info__zip'>"+_hgt("Zip Code")+"</label><input type='text' class='form-control basic-info__input' id='basic-info__zip' name='zip' value='"+(x?x:"")+"'></div></div></div></div><div class='modal-footer'></div></div>").append("<div id='newAddToIdeabookDialog_"+o+"' style='display:none;'><div class='modal-header'>"+_hgt("Welcome to Houzz!")+"</div><div class='modal-body'><div id='dialogWelcomeMsg'>"+_hgt("Remodel your dream home from start to finish:")+"</div><div id='welcomeImagesContainer'><div class='welcome-image'><a href='"+HZ.utils.Links.getPageUrl(HZ.utils.Config.spaceCommand)+"'><span id='welcomePhotos'></span><p>"+_hgt("Browse Photos")+"</p></a></div><div class='welcome-image'><a href='"+HZ.utils.Config.baseBrowseProductsLink+"'> <span id='welcomeProducts'></span><p>"+_hgt("Find Products")+"</p></a></div><div class='welcome-image'><a href='"+HZ.utils.Config.baseBrowseProfessionalsLink+"'><span id='welcomePros'></span><p>"+_hgt("Connect with Pros")+"</p></a></div></div></div><div class='modal-footer'></div></div>"),$("body").append(P);var a,c;a=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(i,this)),c=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Save to Ideabook"),"",$.proxy(b,this),!1,!1,"trackMe","compid=add_ideabook"),$("#newAddToIdeabookDialog_"+m+" .modal-footer",P).append(HZ.ui.AjaxThrobber.getThrobber()).append(a).append(c);var d=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Share"),"",$.proxy(Ga,this),!1,!1,"trackMe collaborate-send","compid=send_share_ideabook");$(".collaborate-cancel").click($.proxy(i,this)),$("#newAddToIdeabookDialog_"+s+" .modal-footer",P).append(HZ.ui.AjaxThrobber.getThrobber()).append(d);var e=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Email{contextEmailVerb}",{contextEmailVerb:""}),"hzEmailSpace",g,!1,!1,"trackMe","compid=send_email"),f=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Done"),"",$.proxy(i,this),!1,!1,"trackMe","compid=cancel_old_confirm");$("#newAddToIdeabookDialog_"+n+" .modal-footer",P).append(f).append(e);var h=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Continue Browsing"),"",$.proxy(i,this));$("#newAddToIdeabookDialog_"+o+" .modal-footer",P).append(h);var j=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Continue"),"",this.saveBasicProfileInfo);$("#newAddToIdeabookDialog_"+u+" .modal-footer",P).append(HZ.ui.AjaxThrobber.getThrobber()).append(j);var t=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("No Thanks"),"",$.proxy(i,this)),v=$("<a id='trustPilotReview' class='hzBtn primary' href='javascript:;' target='_blank'>"+_hgt("Review Houzz")+"</a>");$("#newAddToIdeabookDialog_"+p+" .modal-footer",P).append(t).append(v);var w=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("No Thanks"),"",$.proxy(i,this),!1,!1,"trackMe","compid=cancel_related_pros"),y=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("View More Pros"),"moreProsBtn",null,!1,!1,"trackMe","compid=see_related_pros");$("#newAddToIdeabookDialog_"+r+" .modal-footer",P).append(w).append(y),k=$("#gallerySpaceComments")[0],l=$("#gallerySpaceCommentsPrivacy")[0],HZ.utils.Config.isResponsive?wa():($("#newGalleryInput").keydown(ua).keyup(ta),$(".create-gallery-btn").click(ra)),$(".comment-privacy-control").click(va),Aa()}S&&($("label[for='existingGalleryRadio']").innerHTML=_hgt("Create New Ideabook")+":",$("#newGalleryControl").addClass("extra-bottom-margin"));var z;z=HZ.utils.Config.isResponsive?F?HZ.utils.Links.getSpaceImageUrl(F,120,120):HZ.utils.Links.getImageUrl(I,120,120):F?HZ.utils.Links.getSpaceImageUrl(F,250,250):HZ.utils.Links.getImageUrl(I,250,250);var A=P.find(".dialogImage");if(A)if(P.find(".mftDisclaimer").remove(),G){var B=$("<div class='mftDisclaimer col-xs-12 mbs'><i>"+_hgt("The colors displayed on-screen may not match {mft} color standards",{mft:this.getPaletteManufacturer()})+"</i></div>");P.find(".chooseGallery").prepend(B),A.attr("src",this.getPaletteImgUrl())}else{A.removeAttr("src");var C=new Image;C.src=z,C.onload=function(){A.attr("src",z)}}return P},this.saveBasicProfileInfo=function(){var a=$("#basic-info__first-name"),b=$("#basic-info__last-name"),c=$("#basic-info__zip"),d=a.val(),e=b.val(),f=c.val();return d?f?(HZ.ui.AjaxThrobber.setInCall(!0),void HZ.ajaz.Services.saveBasicProfile(d,e,f,function(d){if(HZ.ui.AjaxThrobber.setInCall(!1),"true"==d.success)v?HZ.ui.Yamdi.hideAll():window.location.href=w;else if($.isEmptyObject(d.errors))HZ.ui.yamdi.Common.alert("Error!",_hgt("An unexpected error has occurred. Please refresh this page and continue."));else for(var e in d.errors)"firstName"==e?xa(a,d.errors.firstName):"lastName"==e?xa(b,d.errors.lastName):"zipCode"==e&&xa(c,d.errors.zipCode)})):void xa(c,_hgt("Please enter a value for your zip code.")):void xa(a,_hgt("Can you try another first name? We are sorry for the inconvenience."))},this.getPaletteImgUrl=function(){return HZ.utils.Links.getGenerateColorPaletteImageLink(G,H)},this.getPaletteManufacturer=function(){return HZ.utils.ColorPicker.getPaintManufacturerDisplayName(H)},this.viewLoaded=function(){if(j(""),k.value="",l.checked=!1,X=[],$(".comment-privacy-control").removeClass("selected"),HZ.ui.AjaxThrobber.setInCall(!1),K)W?Z&&_.comboSelect("setSelectedOptions",{value:Z.id}):this.updateGalleriesComboBox(),a(m),k.focus();else{a(q);var b=this;HZ.ajaz.Services.getMyGalleries(!1,function(c){c.galleries&&(b.setGalleries(c.galleries),b.updateGalleriesComboBox(),a(m),window.setTimeout(function(){k.focus()},0))})}if(HZ.utils.Config.isResponsive&&window.navigator&&window.navigator.userAgent){var c=window.navigator.userAgent.match(/^.*(iPhone|iPad).*(OS\s[0-9]).*(CriOS|Version)\/[.0-9]*\sMobile.*$/i);if("OS 7"==c[2]){var d=window.innerHeight;P&&P.find(".add-comment").css("height",Math.floor(d/4)),P&&P.find(".add-comment-placeholder").css("height",Math.floor(d/10))}}W=!0,$(".modal-dialog").addClass("add-collaborate-diag")},this.viewUnloaded=function(){$(".modal-dialog").removeClass("add-collaborate-diag"),$("html").off("click.dropdown.data-api")};var xa=function(a,b){if(b){var c=$("<div class='basic-info__error-tip'><span class='outer-tip'></span><span class='inner-tip'></span><span class='tooltip-text'>"+b+"</span></div>"),d=a.position(),e=a.height();c.css({left:d.left,top:e+d.top+5}),a.addClass("basic-info__input--error"),a.parents(".basic-info__form-group").append(c)}else a.removeClass("basic-info__input--error"),a.parents(".basic-info__form-group").find(".basic-info__error-tip").remove()};this.bindBasicProfileInfoHandlers=function(){var a=this.getView().find("#basic-info__first-name"),b=(this.getView().find("#basic-info__last-name"),this.getView().find("#basic-info__zip")),c=_hgt("Can you try another first name? We are sorry for the inconvenience."),d=_hgt("Please enter a value for your zip code.");a.add(b).on("focus",function(){var a=$(this);xa(a,null)}).on("blur",function(){var b=$(this);b.val()||xa(b,b.is(a)?c:d)})};var ya=function(){return _.comboSelect("getSelectedOptionValues")},za=function(){var a=ya();0===a.length&&Z&&(_.comboSelect("hasOption",{value:Z.id})?_.comboSelect("setSelectedOptions",{value:Z.id}):Z=null)},Aa=function(){var a={clearSelectionsOnOpen:!0},b={clearSelectionsOnOpen:!0,hasSearch:!1};HZ.utils.Config.isResponsive?(_=$("#gallerySelectComboBox").comboSelect(b),_.on("combo-select-dropdown-open",function(){var a=$(this);a.find(".hzp-comboselect-trigger").addClass("opened"),""!=a.find("#newGalleryInput").val()?a.find(".create-gallery").show():a.find(".create-gallery").hide()}).on("combo-select-dropdown-close",function(){za(),$(this).find(".hzp-comboselect-trigger").removeClass("opened")}).on("click",".close-comboselect-menu",function(){_.comboSelect("toggleDropdown")})):(_=$("#gallerySelectComboBox").comboSelect(a),_.on("combo-select-dropdown-open",function(){_.find("#newGalleryInput").val("").trigger("keyup")}).on("combo-select-dropdown-close",function(){za(),P&&P.find("#gallerySpaceComments").length&&P.find("#gallerySpaceComments").focus()}));var c=_.find(".own-galleries"),d=_.find(".shared-galleries"),e=".hzp-comboselect-search-no-match";_.on("combo-select-search",function(){0===c.find(".own-galleries-list").children().not(e).length?c.hide():c.show(),0===d.find(".shared-galleries-list").children().not(e).length?d.hide():d.show()}),_.on("combo-select-search-no-result",function(){c.hide(),d.hide()})},Ba=function(a,b,c,d,e,f){var g=a.featured?" ("+_hgt("Featured")+")":"",h=Z&&Z.id===a.id,i=a.isPrivate?" gallery-private":"",j=$("<li class='hzp-comboselect-option "+i+"' data-value='"+a.id+"' tabindex='0'><span class='hzp-comboselect-option-check hzi-font hzi-Check-Sidenav'></span>"+a.title+g+"</li>");j.data("gallery",a),c||h?b.prepend(j):b.append(j),(h||d)&&(f?(_.comboSelect("setHasTakenAction",{hasTakenAction:!0}),_.comboSelect("addAdditionalSelectedOptions",{value:a.id})):_.comboSelect("addAdditionalSelectedOptions",{value:a.id})),e&&$("#gallerySelectComboBox .select").animate({scrollTop:0},500)};this.updateGalleriesComboBox=function(){var a=$("#gallerySelectComboBox"),b=a.find(".hzp-comboselect-trigger-button"),c=a.find(".hzp-comboselect-select"),d=c.find(".own-galleries"),e=d.find(".own-galleries-list"),f=c.find(".shared-galleries"),g=f.find(".shared-galleries-list"),h=K.recent?K.recent:[],i=K.own?K.own:[],j=K.shared?K.shared:[],k=h.concat(i).concat(j),l={};e.empty(),g.empty(),M&&L[M]?(Z=L[M],b.text(Z.title)):k.length?(Z=k[0],b.text(Z.title)):b.text(_hgt("Select an ideabook"));var m={},n={};if($.each(i,function(a,b){m[b.id]=1}),$.each(j,function(a,b){n[b.id]=1}),h.length>0){d.show(),f.show();for(var o=0;o<h.length;o++){var p=h[o],q=!0;(!Z||p.id!=Z.id&&!l[p.id])&&(m[p.id]?(Ba(p,e,q),l[p.id]=!0):n[p.id]&&(Ba(p,g,q),l[p.id]=!0))}}else d.hide(),f.hide();if(i.length>0){d.show();for(var o=0;o<i.length;o++){var p=i[o],q=Z&&p.id===Z.id;l[p.id]||(l[p.id]=!0,Ba(p,e,q))}}else d.hide();if(j.length>0){f.show();for(var o=0;o<j.length;o++){var p=j[o],q=Z&&p.id===Z.id;l[p.id]||(l[p.id]=!0,Ba(p,g,q))}}else f.hide()};var Ca=function(a){var b=$("#newAddToIdeabookDialog_"+s+" .addImageWrapper"),c=ba?HZ.utils.Links.getUserImageUrl(ba,0):null;b.find(".addImageWrapper-inner").remove(),b.append("<div class='addImageWrapper-inner'><div class='collaborate-meta text-left'><div class='one-line text-bold'>"+a+"</div><div class='one-line text-m text-dt-s'>"+_hgt("1 photo")+"</div></div>"+(c?"<div class='user-image'><img src='"+c+"' class='hz-user-image user-small-thumb' /></div>":"")+"</div>")},Da=function(b,c,d){var e={hasOwnerRow:!1,hasSaveWarning:!1,hasPrivacySettings:!1,galleryId:c,isFromCreateFlow:!0},f=$(".collaborate-send"),g=$("#collaborateBody"),h=HZ.galleries.ShareGalleryComponent.getShareGalleryComponent(d,e),i=this;$(".collaborate-form-header").empty().append(_hgt("Get feedback from family, friends, and pros")),Ca(b),g.empty().append(h),a(s),HZ.utils.Logger.sendEventLog(HZ.shareGallery.events.POST_IDEABOOK_COLLABORATE),f.addClass("disabled"),$.each(Y,function(a,b){HZ.events.unsubscribeById(b)}),Y=[],Y.push(HZ.events.subscribe(i,HZ.galleries.ShareGalleryComponent.publicShareGalleryEvents.ADD_NEW_COLLABORATOR_SUCCESS,function(){f.removeClass("disabled")}),HZ.events.subscribe(i,HZ.galleries.ShareGalleryComponent.publicShareGalleryEvents.SHARE_GALLERY_COMPONENT_IS_FETCHING_DATA,function(){HZ.ui.AjaxThrobber.setInCall(!0)}),HZ.events.subscribe(i,HZ.galleries.ShareGalleryComponent.publicShareGalleryEvents.SHARE_GALLERY_COMPONENT_DATA_FETCH_COMPLETE,function(){HZ.ui.AjaxThrobber.setInCall(!1)}))},Ea=function(a,b){$("#collaborateBody");HZ.ui.AjaxThrobber.setInCall(!1),HZ.ajaz.Services.initShareGallery(b,function(c){"true"==c.success&&Da(a,b,c)})},Fa=function(a,b){var c=a.title,d=a.id;V||HZ&&HZ.galleries&&HZ.galleries.ShareGalleryComponent?(Ea.call(this,c,d),b&&j(Ia(b))):(HZ.ui.AjaxThrobber.setInCall(!0),HZ.utils.ResourceLoader.requireCollaborateResources(function(){V=!0,Ea.call(this,c,d),b&&j(Ia(b))}.bind(this)))},Ga=function(){return ca?!1:(HZ.ui.AjaxThrobber.setInCall(!0),void(HZ.galleries.ShareGalleryComponent.hasCollaboratorsToAdd()?(ca=!0,HZ.galleries.ShareGalleryComponent.savePermissions(Ha)):(HZ.ui.AjaxThrobber.setInCall(!1),j(_hgt("You have not selected any users to add as collaborators to this ideabook")))))},Ha=function(a){HZ.ui.AjaxThrobber.setInCall(!1),ca=!1,"true"==a.success?(i(),HZ.ui.yamdi.Common.alert(_hgt("Invites Sent"),_hgt("Ideabook has been successfully shared."))):j(a.error)},Ia=function(a){var b=$("<div>");return $.each(a,function(a,c){b.append($("<div class='gallery-error'>"+c+"</div>"))}),b.html()};this.showStatus=function(a){j(a)},this.hideStatus=function(){j("")}};

window.hzmr.push("addToIdeabookDialog:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End addToIdeabookDialog.js  **************/
/************* Start history.js for locale en-US **************/
try {!function(a){if("function"==typeof define&&define.amd){var b="[history"+(new Date).getTime()+"]",c=requirejs.onError;a.toString=function(){return b},requirejs.onError=function(a){-1===a.message.indexOf(b)&&c.call(requirejs,a)},define([],a)}a()}(function(){function a(){}function b(a,c,d){var e=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/;if(null==a||""===a||c)a=c?a:w.href,(!B||d)&&(a=a.replace(/^[^#]*/,"")||"#",a=w.protocol.replace(/:.*$|$/,":")+"//"+w.host+M.basepath+a.replace(new RegExp("^#[/]?(?:"+M.type+")?"),""));else{var f=b(),g=s.getElementsByTagName("base")[0];!d&&g&&g.getAttribute("href")&&(g.href=g.href,f=b(g.href,null,!0));var h=f._pathname,i=f._protocol;a=""+a,a=/^(?:\w+\:)?\/\//.test(a)?0===a.indexOf("/")?i+a:a:i+"//"+f._host+(0===a.indexOf("/")?a:0===a.indexOf("?")?h+a:0===a.indexOf("#")?h+f._search+a:h.replace(/[^\/]+$/g,"")+a)}O.href=a;var j=e.exec(O.href),k=j[2]+(j[3]?":"+j[3]:""),l=j[4]||"/",m=j[5]||"",n="#"===j[6]?"":j[6]||"",o=l+m+n,p=l.replace(new RegExp("^"+M.basepath,"i"),M.type)+m;return{_href:j[1]+"//"+k+o,_protocol:j[1],_host:k,_hostname:j[2],_port:j[3]||"",_pathname:l,_search:m,_hash:n,_relative:o,_nohash:p,_special:p+n}}function c(){var a;try{a=r.sessionStorage,a.setItem(N+"t","1"),a.removeItem(N+"t")}catch(b){a={getItem:function(a){var b=s.cookie.split(a+"=");return b.length>1&&b.pop().split(";").shift()||"null"},setItem:function(a,b){var c={};(c[w.href]=y.state)&&(s.cookie=a+"="+v.stringify(c))}}}try{U=v.parse(a.getItem(N))||{}}catch(b){U={}}J(F+"unload",function(){a.setItem(N,v.stringify(U))},!1)}function d(b,c,d,e){var f=0;d||(d={set:a},f=1);var g=!d.set,h=!d.get,i={configurable:!0,set:function(){g=1},get:function(){h=1}};try{D(b,c,i),b[c]=b[c],D(b,c,d)}catch(j){}if(!(g&&h||(b.__defineGetter__&&(b.__defineGetter__(c,i.get),b.__defineSetter__(c,i.set),b[c]=b[c],d.get&&b.__defineGetter__(c,d.get),d.set&&b.__defineSetter__(c,d.set)),g&&h))){if(f)return!1;if(b===r){try{var k=b[c];b[c]=null}catch(j){}if("execScript"in r)r.execScript("Public "+c,"VBScript"),r.execScript("var "+c+";","JavaScript");else try{D(b,c,{value:a})}catch(j){"onpopstate"===c&&(J("popstate",d=function(){K("popstate",d,!1);var a=b.onpopstate;b.onpopstate=null,setTimeout(function(){b.onpopstate=a},1)},!1),R=0)}b[c]=k}else try{try{var l=u.create(b);D(u.getPrototypeOf(l)===b?l:b,c,d);for(var m in b)"function"==typeof b[m]&&(l[m]=b[m].bind(b));try{e.call(l,l,b)}catch(j){}b=l}catch(j){D(b.constructor.prototype,c,d)}}catch(j){return!1}}return b}function e(a,b,c){return c=c||{},a=a===$?w:a,c.set=c.set||function(c){a[b]=c},c.get=c.get||function(){return a[b]},c}function f(a,b,c){a in V?V[a].push(b):arguments.length>3?J(a,b,c,arguments[3]):J(a,b,c)}function g(a,b,c){var d=V[a];if(d){for(var e=d.length;e--;)if(d[e]===b){d.splice(e,1);break}}else K(a,b,c)}function h(b,c){var e=(""+("string"==typeof b?b:b.type)).replace(/^on/,""),f=V[e];if(f){if(c="string"==typeof b?c:b,null==c.target)for(var g=["target","currentTarget","srcElement","type"];b=g.pop();)c=d(c,b,{get:"type"===b?function(){return e}:function(){return r}});R&&(("popstate"===e?r.onpopstate:r.onhashchange)||a).call(r,c);for(var h=0,i=f.length;i>h;h++)f[h].call(r,c);return!0}return L(b,c)}function i(){var a=s.createEvent?s.createEvent("Event"):s.createEventObject();a.initEvent?a.initEvent("popstate",!1,!1):a.type="popstate",a.state=y.state,h(a)}function j(){S&&(S=!1,i())}function k(a,c,d,e){if(B)P=w.href;else{0===T&&(T=2);var f=b(c,2===T&&-1!==(""+c).indexOf("#"));f._relative!==b()._relative&&(P=e,d?w.replace("#"+f._special):w.hash=f._special)}!C&&a&&(U[w.href]=a),S=!1}function l(a){var c=P;if(P=w.href,c){Q!==w.href&&i(),a=a||r.event;var d=b(c,!0),e=b();a.oldURL||(a.oldURL=d._href,a.newURL=e._href),d._hash!==e._hash&&h(a)}}function m(a){setTimeout(function(){J("popstate",function(a){Q=w.href,C||(a=d(a,"state",{get:function(){return y.state}})),h(a)},!1)},0),!B&&a!==!0&&"location"in y&&(p(E.hash),j())}function n(a){for(;a;){if("A"===a.nodeName)return a;a=a.parentNode}}function o(a){var c=a||r.event,d=n(c.target||c.srcElement),e="defaultPrevented"in c?c.defaultPrevented:c.returnValue===!1;if(d&&"A"===d.nodeName&&!e){var f=b(),g=b(d.getAttribute("href",2)),h=f._href.split("#").shift()===g._href.split("#").shift();h&&g._hash&&(f._hash!==g._hash&&(E.hash=g._hash),p(g._hash),c.preventDefault?c.preventDefault():c.returnValue=!1)}}function p(a){var b=s.getElementById(a=(a||"").replace(/^#/,""));if(b&&b.id===a&&"A"===b.nodeName){var c=b.getBoundingClientRect();r.scrollTo(t.scrollLeft||0,c.top+(t.scrollTop||0)-(t.clientTop||0))}}function q(){var a=s.getElementsByTagName("script"),f=(a[a.length-1]||{}).src||"",g=-1!==f.indexOf("?")?f.split("?").pop():"";g.replace(/(\w+)(?:=([^&]*))?/g,function(a,b,c){M[b]=(c||"").replace(/^(0|false)$/,"")}),J(F+"hashchange",l,!1);var h=[$,E,X,r,Z,y];C&&delete Z.state;for(var i=0;i<h.length;i+=2)for(var j in h[i])if(h[i].hasOwnProperty(j))if("function"==typeof h[i][j])h[i+1][j]=h[i][j];else{var k=e(h[i],j,h[i][j]);if(!d(h[i+1],j,k,function(a,b){b===y&&(r.history=y=h[i+1]=a)}))return K(F+"hashchange",l,!1),!1;h[i+1]===r&&(V[j]=V[j.substr(2)]=[])}return y.setup(),M.redirect&&y.redirect(),M.init&&(T=1),!C&&v&&c(),B||s[G](F+"click",o,!1),"complete"===s.readyState?m(!0):(B||b()._relative===M.basepath||(S=!0),J(F+"load",m,!1)),!0}var r=("object"==typeof window?window:this)||{};if(!r.history||"emulate"in r.history)return r.history;var s=r.document,t=s.documentElement,u=r.Object,v=r.JSON,w=r.location,x=r.history,y=x,z=x.pushState,A=x.replaceState,B=!!z,C="state"in x,D=u.defineProperty,E=d({},"t")?{}:s.createElement("a"),F="",G=r.addEventListener?"addEventListener":(F="on")&&"attachEvent",H=r.removeEventListener?"removeEventListener":"detachEvent",I=r.dispatchEvent?"dispatchEvent":"fireEvent",J=r[G],K=r[H],L=r[I],M={basepath:"/",redirect:0,type:"/",init:0},N="__historyAPI__",O=s.createElement("a"),P=w.href,Q="",R=1,S=!1,T=0,U={},V={},W=s.title,X={onhashchange:null,onpopstate:null},Y=function(a,b){var c=r.history!==x;c&&(r.history=x),a.apply(x,b),c&&(r.history=y)},Z={setup:function(a,b,c){M.basepath=(""+(null==a?M.basepath:a)).replace(/(?:^|\/)[^\/]*$/,"/"),M.type=null==b?M.type:b,M.redirect=null==c?M.redirect:!!c},redirect:function(a,c){if(y.setup(c,a),c=M.basepath,r.top==r.self){var d=b(null,!1,!0)._relative,e=w.pathname+w.search;B?(e=e.replace(/([^\/])$/,"$1/"),d!=c&&new RegExp("^"+c+"$","i").test(e)&&w.replace(d)):e!=c&&(e=e.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+c,"i").test(e)&&w.replace(c+"#"+e.replace(new RegExp("^"+c,"i"),M.type)+w.hash))}},pushState:function(a,b,c){var d=s.title;null!=W&&(s.title=W),z&&Y(z,arguments),k(a,c),s.title=d,W=b},replaceState:function(a,b,c){var d=s.title;null!=W&&(s.title=W),delete U[w.href],A&&Y(A,arguments),k(a,c,!0),s.title=d,W=b},location:{set:function(a){0===T&&(T=1),r.location=a},get:function(){return 0===T&&(T=1),B?w:E}},state:{get:function(){return U[w.href]||null}}},$={assign:function(a){0===(""+a).indexOf("#")?k(null,a):w.assign(a)},reload:function(){w.reload()},replace:function(a){0===(""+a).indexOf("#")?k(null,a,!0):w.replace(a)},toString:function(){return this.href},href:{get:function(){return b()._href}},protocol:null,host:null,hostname:null,port:null,pathname:{get:function(){return b()._pathname}},search:{get:function(){return b()._search}},hash:{set:function(a){k(null,(""+a).replace(/^(#|)/,"#"),!1,P)},get:function(){return b()._hash}}};return q()?(y.emulate=!B,r[G]=f,r[H]=g,r[I]=h,y):void 0});

window.hzmr.push("history:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End history.js  **************/
/************* Start jquery.easing.1.3.js for locale en-US **************/
try {jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}});

window.hzmr.push("jquery.easing.1.3:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.easing.1.3.js  **************/
/************* Start jquery.visible.js for locale en-US **************/
try {!function(a){var b=a(window);a.fn.visible=function(a,c,d){if(!(this.length<1)){var e=this.length>1?this.eq(0):this,f=e.get(0),g=b.width(),h=b.height(),d=d?d:"both",i=c===!0?f.offsetWidth*f.offsetHeight:!0;if("function"==typeof f.getBoundingClientRect){var j=f.getBoundingClientRect(),k=j.top>=0&&j.top<h,l=j.bottom>0&&j.bottom<=h,m=j.left>=0&&j.left<g,n=j.right>0&&j.right<=g,o=a?k||l:k&&l,p=a?m||n:m&&n;if("both"===d)return i&&o&&p;if("vertical"===d)return i&&o;if("horizontal"===d)return i&&p}else{var q=b.scrollTop(),r=q+h,s=b.scrollLeft(),t=s+g,u=e.offset(),v=u.top,w=v+e.height(),x=u.left,y=x+e.width(),z=a===!0?w:v,A=a===!0?v:w,B=a===!0?y:x,C=a===!0?x:y;if("both"===d)return!!i&&r>=A&&z>=q&&t>=C&&B>=s;if("vertical"===d)return!!i&&r>=A&&z>=q;if("horizontal"===d)return!!i&&t>=C&&B>=s}}}}(jQuery);

window.hzmr.push("jquery.visible:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.visible.js  **************/
/************* Start md5.js for locale en-US **************/
try {function md5cycle(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];c=ff(c,d,e,f,b[0],7,-680876936),f=ff(f,c,d,e,b[1],12,-389564586),e=ff(e,f,c,d,b[2],17,606105819),d=ff(d,e,f,c,b[3],22,-1044525330),c=ff(c,d,e,f,b[4],7,-176418897),f=ff(f,c,d,e,b[5],12,1200080426),e=ff(e,f,c,d,b[6],17,-1473231341),d=ff(d,e,f,c,b[7],22,-45705983),c=ff(c,d,e,f,b[8],7,1770035416),f=ff(f,c,d,e,b[9],12,-1958414417),e=ff(e,f,c,d,b[10],17,-42063),d=ff(d,e,f,c,b[11],22,-1990404162),c=ff(c,d,e,f,b[12],7,1804603682),f=ff(f,c,d,e,b[13],12,-40341101),e=ff(e,f,c,d,b[14],17,-1502002290),d=ff(d,e,f,c,b[15],22,1236535329),c=gg(c,d,e,f,b[1],5,-165796510),f=gg(f,c,d,e,b[6],9,-1069501632),e=gg(e,f,c,d,b[11],14,643717713),d=gg(d,e,f,c,b[0],20,-373897302),c=gg(c,d,e,f,b[5],5,-701558691),f=gg(f,c,d,e,b[10],9,38016083),e=gg(e,f,c,d,b[15],14,-660478335),d=gg(d,e,f,c,b[4],20,-405537848),c=gg(c,d,e,f,b[9],5,568446438),f=gg(f,c,d,e,b[14],9,-1019803690),e=gg(e,f,c,d,b[3],14,-187363961),d=gg(d,e,f,c,b[8],20,1163531501),c=gg(c,d,e,f,b[13],5,-1444681467),f=gg(f,c,d,e,b[2],9,-51403784),e=gg(e,f,c,d,b[7],14,1735328473),d=gg(d,e,f,c,b[12],20,-1926607734),c=hh(c,d,e,f,b[5],4,-378558),f=hh(f,c,d,e,b[8],11,-2022574463),e=hh(e,f,c,d,b[11],16,1839030562),d=hh(d,e,f,c,b[14],23,-35309556),c=hh(c,d,e,f,b[1],4,-1530992060),f=hh(f,c,d,e,b[4],11,1272893353),e=hh(e,f,c,d,b[7],16,-155497632),d=hh(d,e,f,c,b[10],23,-1094730640),c=hh(c,d,e,f,b[13],4,681279174),f=hh(f,c,d,e,b[0],11,-358537222),e=hh(e,f,c,d,b[3],16,-722521979),d=hh(d,e,f,c,b[6],23,76029189),c=hh(c,d,e,f,b[9],4,-640364487),f=hh(f,c,d,e,b[12],11,-421815835),e=hh(e,f,c,d,b[15],16,530742520),d=hh(d,e,f,c,b[2],23,-995338651),c=ii(c,d,e,f,b[0],6,-198630844),f=ii(f,c,d,e,b[7],10,1126891415),e=ii(e,f,c,d,b[14],15,-1416354905),d=ii(d,e,f,c,b[5],21,-57434055),c=ii(c,d,e,f,b[12],6,1700485571),f=ii(f,c,d,e,b[3],10,-1894986606),e=ii(e,f,c,d,b[10],15,-1051523),d=ii(d,e,f,c,b[1],21,-2054922799),c=ii(c,d,e,f,b[8],6,1873313359),f=ii(f,c,d,e,b[15],10,-30611744),e=ii(e,f,c,d,b[6],15,-1560198380),d=ii(d,e,f,c,b[13],21,1309151649),c=ii(c,d,e,f,b[4],6,-145523070),f=ii(f,c,d,e,b[11],10,-1120210379),e=ii(e,f,c,d,b[2],15,718787259),d=ii(d,e,f,c,b[9],21,-343485551),a[0]=add32(c,a[0]),a[1]=add32(d,a[1]),a[2]=add32(e,a[2]),a[3]=add32(f,a[3])}function cmn(a,b,c,d,e,f){return b=add32(add32(b,a),add32(d,f)),add32(b<<e|b>>>32-e,c)}function ff(a,b,c,d,e,f,g){return cmn(b&c|~b&d,a,b,e,f,g)}function gg(a,b,c,d,e,f,g){return cmn(b&d|c&~d,a,b,e,f,g)}function hh(a,b,c,d,e,f,g){return cmn(b^c^d,a,b,e,f,g)}function ii(a,b,c,d,e,f,g){return cmn(c^(b|~d),a,b,e,f,g)}function md51(a){txt="";var b,c=a.length,d=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=a.length;b+=64)md5cycle(d,md5blk(a.substring(b-64,b)));a=a.substring(b-64);var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<a.length;b++)e[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(e[b>>2]|=128<<(b%4<<3),b>55)for(md5cycle(d,e),b=0;16>b;b++)e[b]=0;return e[14]=8*c,md5cycle(d,e),d}function md5blk(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c}function rhex(a){for(var b="",c=0;4>c;c++)b+=hex_chr[a>>8*c+4&15]+hex_chr[a>>8*c&15];return b}function hex(a){for(var b=0;b<a.length;b++)a[b]=rhex(a[b]);return a.join("")}function md5(a){return hex(md51(a))}function add32(a,b){return a+b&4294967295}function add32(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}var hex_chr="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=md5("hello");

window.hzmr.push("md5:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End md5.js  **************/
/************* Start lightboxStaticConfig.js for locale en-US **************/
try {HZ.ns("HZ.lb.Config"),HZ.lb.Config.contentGroupIds={OVERVIEW:"overview",PRODUCTS:"products",INFO:"info",DISCUSSION:"discussion",COLOR_PICKER:"color-picker",IDEABOOKS:"ideabooks"},HZ.lb.Config.contentGroups=[{id:HZ.lb.Config.contentGroupIds.OVERVIEW,title:_hgt("Overview"),iconClass:"hzi-Houzz-Photo"},{id:HZ.lb.Config.contentGroupIds.PRODUCTS,title:_hgt("Products"),iconClass:"hzi-Tag"},{id:HZ.lb.Config.contentGroupIds.INFO,title:_hgt("More Info"),iconClass:"hzi-info-icon-solid"},{id:HZ.lb.Config.contentGroupIds.DISCUSSION,title:_hgt("Questions, Comments and Reviews"),iconClass:"hzi-Comments-Advice"},{id:HZ.lb.Config.contentGroupIds.COLOR_PICKER,title:_hgt("ColorPicker"),iconClass:"hzi-paint-dropper"}],HZ.lb.Config.spaceContentGroupIds=[HZ.lb.Config.contentGroupIds.OVERVIEW,HZ.lb.Config.contentGroupIds.PRODUCTS,HZ.lb.Config.contentGroupIds.DISCUSSION,HZ.lb.Config.contentGroupIds.COLOR_PICKER],HZ.lb.Config.productContentGroupIds=[HZ.lb.Config.contentGroupIds.PRODUCTS,HZ.lb.Config.contentGroupIds.INFO,HZ.lb.Config.contentGroupIds.DISCUSSION];

window.hzmr.push("lightboxStaticConfig:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxStaticConfig.js  **************/
/************* Start lightboxContext.js for locale en-US **************/
try {HZ.lb.Context=function(a,b,c,d,e,f,g,h){var i,j=a,k=b,l=c,m=f,n=d,o=g,p=h,q=e,r={},s={};for(var t in n)r[n[t]]=!0;var u=!1;this.getName=function(){return j},this.getType=function(){return k},this.getDescriptor=function(){return l},this.getTotalSpacesCount=function(){return q},this.containsSpaceId=function(a){return r[a]},this.getCurrentSpaceId=function(){return n[m]},this.setCurrentSpaceToLast=function(){n.length&&this.setCurrentSpaceId(n[n.length-1])},this.setCurrentSpaceId=function(a){for(var b=0;b<n.length;b++)if(n[b]==a)return m=b,!0;return!1},this.getNextSpaceIds=function(a){var b,c,d,e=[];a=a||1,d=a>0?1:-1,b=m+d,c=b+a;for(var f=b;f!=c;f+=d)f<n.length&&f>=0&&e.push(n[f]);return e},this.getCursorPosition=function(){return{cursor:m,spacesCount:n.length}},this.hasNext=function(){return!u&&m>=n.length-5&&-1!=this.getNextPosition()&&this.getNextPhotoIds(),m<n.length-1},this.hasPrevious=function(){return m>0},this.next=function(){return this.hasNext()?n[++m]:null},this.previous=function(){return this.hasPrevious()?n[--m]:null},this.getNextPosition=function(){return o},this.getBasePosition=function(){return p},this.getNextPhotoIds=function(){u=!0,HZ.ajaz.Services.getNextSpaces(this.getType(),l,this.getNextPosition(),$.proxy(this.handleData,this))},this.registerOwner=function(a){i=a},this.unregisterOwner=function(){i=null},this.removeCurrentSpace=function(){var a,b=n.splice(m,1);b&&b.length&&(delete r[b[0]],o>-1&&o--,q--),this.hasNext()?a=n[m+1]:this.hasPrevious()&&(a=n[m-1]),a&&this.setCurrentSpaceId(a)},this.removeSpaceBySpaceId=function(a){this.setCurrentSpaceId(a)&&this.removeCurrentSpace()},this.stashAndReplaceCurrentSpaceId=function(a){var b=this.getCurrentSpaceId();this.containsSpaceId(b)&&(s[m]=b),n[m]=a},this.unstashSpaces=function(){for(var a in s)n[a]=s[a];s={}},this.handleData=function(a){if(HZ.lb.Utils.validateData(a),a.results.context){n=n.concat(a.results.context.spaceIds);for(var b=0;b<a.results.context.spaceIds.length;b++)r[a.results.context.spaceIds[b]]=!0;if(o=a.results.context.nextpos,HZ.data.Spaces.addAll(a.results.spaces),HZ.data.Images.addAll(a.results.images),HZ.data.Users.addAll(a.results.users),HZ.data.ProductsInfo.addAll(a.results.productInfo),a.results.photoAds)for(var c in a.results.photoAds)HZ.data.PhotoAds.put(c,a.results.photoAds[c]);if(a.results.paidProAds)for(var c in a.results.paidProAds)HZ.data.PaidProAds.put(c,a.results.paidProAds[c]);HZ.data.HouzzClkTracking.addAll(a.results.houzzClkTracking),HZ.data.HouzzImpTracking.addAll(a.results.houzzImpTracking),u=!1,i&&i.handleContextChanged()}}};

window.hzmr.push("lightboxContext:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxContext.js  **************/
/************* Start lightboxUtils.js for locale en-US **************/
try {HZ.lb.Utils={connect:function(){var a=function(a,b){return $.grep(a,function(a){return-1!==$.inArray(a,b)})},b=function(a){var b=[];b.push(a);var c=$(a).parents().toArray();return b=b.concat(c)},c=function(c){if(!c||!c.length)return null;if(1===c.length)return c[0];for(var d,e=c[0],f=b(e),g=1;g<c.length;g++)d=b(c[g]),f=a(f,d);return f[0]},d=function(a,b){var c;c=HZ.lb.Config.CONTEXT_NAME_ARBITRARY_SPACES;var d=a.length,e=new HZ.lb.Context(b,c,{},a,d,1,-1);return d>0&&e.setCurrentSpaceId(a[0]),HZ.data.Contexts.put(b,e),e},e=0,f=$("#lb-parent");if(0==f.length){var g=$("body").find("[lb-context]").toArray();g.length&&(f=$(c(g)))}f.length&&f.on("click","[lb-edit], [lb-edit-tag], [lb-view], [lb-sid]",function(a){if(!lightbox.isShowing()){var b=$(a.target),c=b.closest("[lb-sid]").attr("lb-sid"),f=b.closest("[lb-context]"),g=f.attr("lb-context"),h=null,i=HZ.data.Contexts.get(g);if(""==g){var j=f.find("[lb-sid]").map(function(){return $(this).attr("lb-sid")});g="dyn_"+e++,i=d(j,g),f.attr("lb-context",g)}if(b.closest("[lb-edit-tag]").length?h="edit-tag":b.closest("[lb-edit]").length?h="edit":b.closest("[lb-view]").length&&(h="view"),c&&HZ.data.Spaces.get(c)&&i.containsSpaceId(c)&&h){if(a.ctrlKey||a.metaKey)return!0;if(a.preventDefault(),"edit"===h)lightbox.showSpaceEditor(c,g);else if("edit-tag"===h){var k=b.data("id");"undefined"==typeof k&&(b=b.parent(),k=b.data("id")),lightbox.showSpaceTagEditor(c,g,k)}else lightbox.show(c,g);return!1}}})},validateData:function(a){a&&"false"==a.success&&a.error==HZ.ajaz.Services.ERROR_VERSION_MISMATCH&&alert(_hgt("Browse session expired. Please refresh the page."))},trackedUrls:{},currentSpaceId:null,registerTrackingUrl:function(a,b){var c=!0,d=md5(a);b!=this.currentSpaceId&&(this.trackedUrls[this.currentSpaceId]={},this.currentSpaceId=b),this.trackedUrls[b]||(this.trackedUrls[b]={}),this.trackedUrls[b][d]?c=!1:this.trackedUrls[b][d]=a,c&&((new Image).src=a)},lightboxEditorLoaded:!1,notifyLightboxOnLoad:!1,enableEditTag:!1,loadLightboxEditor:function(a,b){this.lightboxEditorLoaded||this.notifyLightboxOnLoad||(a&&(this.notifyLightboxOnLoad=!0),b&&(this.enableEditTag=!0),HZ.utils.ResourceLoader.requireLightbox2EditResources($.proxy(this.setLightboxEditorLoaded,this)))},setLightboxEditorLoaded:function(){this.lightboxEditorLoaded=!0,this.notifyLightboxOnLoad&&(lightbox.setEditMode(!0),this.enableEditTag&&lightbox.setEditTagMode(this.enableEditTag),lightbox.refresh(),lightbox.handleResize())},colorPickerResourcesLoading:!1,colorPickerResourcesLoaded:!1,colorPickerResourcesLoadedCallback:$.noop,loadColorPickerResources:function(a){a&&(this.colorPickerResourcesLoadedCallback=a),this.colorPickerResourcesLoaded||this.colorPickerResourcesLoading||(this.colorPickerResourcesLoading=!0,HZ.utils.ResourceLoader.requireLightboxColorPickerResources(this.handleColorPickerResourcesLoaded.bind(this)))},handleColorPickerResourcesLoaded:function(){this.colorPickerResourcesLoading=!1,this.colorPickerResourcesLoaded=!0,this.colorPickerResourcesLoadedCallback&&this.colorPickerResourcesLoadedCallback()},feedCommentsResourcesLoading:!1,feedCommentsResourcesLoaded:!1,feedCommentsResourcesLoadedCallback:$.noop,loadFeedCommentsResources:function(a){a&&(this.feedCommentsResourcesLoadedCallback=a),this.feedCommentsResourcesLoaded||this.feedCommentsResourcesLoading||(this.feedCommentsResourcesLoading=!0,HZ.utils.ResourceLoader.requireLightboxFeedCommentsResources(this.handleFeedCommentsResourcesLoaded.bind(this)))},handleFeedCommentsResourcesLoaded:function(){this.feedCommentsResourcesLoading=!1,this.feedCommentsResourcesLoaded=!0,this.feedCommentsResourcesLoadedCallback&&this.feedCommentsResourcesLoadedCallback()},returnPolicyResourcesLoading:!1,returnPolicyResourcesLoaded:!1,loadReturnPolicyResources:function(){this.returnPolicyResourcesLoaded||this.returnPolicyResourcesLoading||(this.returnPolicyResourcesLoading=!0,HZ.utils.ResourceLoader.requireReturnPolicyResources(this.handleReturnPolicyResourcesLoaded.bind(this)))},handleReturnPolicyResourcesLoaded:function(){this.returnPolicyResourcesLoaded=!0,this.returnPolicyResourcesLoading=!1},loadImage:function(a,b){$("<img>").one("load",b).attr("src",a).each(function(){this.complete&&$(this).trigger("load")})},calculateThumbWidth:function(a,b,c){return Math.max(30,Math.ceil(a/b-c+c/b))}};

window.hzmr.push("lightboxUtils:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxUtils.js  **************/
/************* Start lightbox2.2.js for locale en-US **************/
try {HZ.ns("HZ.lb.Config"),HZ.ns("HZ.lb.plugins"),HZ.lb.Notifier=function(){var a=[];this.addListener=function(b){a.push(b)},this.removeListener=function(b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return a.splice(c,1)},this.notifyListeners=function(b){for(var c=0,d=a.length;d>c;c++)b.apply(a[c])}},HZ.lb.ActionBar={ACTION_BAR_LEFT:"Left",ACTION_BAR_CENTER:"Center",ACTION_BAR_RIGHT:"Right"},HZ.lb.Lightbox=function(){this.SPACE_TYPE="space",this.PRODUCT_TYPE="product";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X=0,Y=1,Z=2,_=3,aa=4,ba={x:0,y:0,w:0,h:0,src:""},ca={x:0,y:0,w:640,h:640},da=X,ea=720,fa=480,ga=.2,ha=9,ia=9,ja="lightboxLoaded",ka="lightboxUnloaded",la="pluginAfterShown",ma="imageResized",na="contextChanged",oa="imageChanged",pa="imageDataUpdated",qa="imageIndexChanged",ra="contentGroupsChanged",sa="currentContentGroupChanged",ta="lightboxModeChanged",ua="lightboxScroll",va="editDataUpdated",wa="beforeSaveOrDiscard",xa="saveData",ya="discardData",za=null,Aa=!0,Ba=null;this.init=function(){p||(c=new HZ.lb.Notifier,l=$(window),m=$(document),n=$(document.body),p=$('<div id="lbRoot" scopeId="lightbox" style="display:none;">').prependTo(n).addClass("hidden").append('<div id="lbBg"></div><div id="lbMain" class="space"><div id="lbImageContainer"><div id="lbImage"><div id="lbActions" class="trackMe row"><div id="lbActionsLeft" class="col-xs-3"></div><div id="lbActionsCenter" class="col-xs-6 text-center text-nowrap"></div><div id="lbActionsRight" class="col-xs-3 text-right text-nowrap"></div></div></div><div id="lbImageControls"></div><div id="lbImageLayer"></div><div id="lbNavDiv"><div id="lbBreadcrumbs" class="trackMe"></div><div id="lbLeft" class="lbNavigation nav-arrow trackMe" compid="navLeft"><div class="hzi-font hzi-Left-Arrow"></div></div><div id="lbRight" class="lbNavigation nav-arrow trackMe bounce" compid="navRight"><div class="hzi-font hzi-Right-Arrow"></div></div></div></div><div id="lbInfo"><div class="content-mask"><div class="content-scroll"><div class="content-body"><div class="content-footer"></div></div></div><div class="content-scroll-bar"><div class="scroll-bar"></div></div></div><div id="lbInfoTabs"></div><div class="content-fixed"></div></div><div id="lbMainControls" class="trackMe"><div id="lbClose"><a class="lbCloseButton" href="javascript:;" compid="lbCloseButton"><i class="hzi-font hzi-CloseX icon"></i></a></div></div></div>'),p.toggleClass("view-space",this.isViewSpace()),q=$("#lbBg")[0],y=$("#lbImageContainer"),z=$("#lbImage"),A=z.get(0),B=$("#lbImageLayer")[0],D=$("#lbBreadcrumbs")[0],C=$("#lbImageControls")[0],r=$("#lbMain"),s=r[0],t=$("#lbInfo"),u=t[0],E=t.find(".content-mask"),F=t.find(".content-scroll"),G=t.find(".content-body"),H=t.find(".content-footer"),J=t.find(".content-scroll-bar"),K=t.find(".scroll-bar"),I=t.find(".content-fixed"),v=$("#lbInfoTabs"),w=$("#lbMainControls"),x=$("#lbClose"),N=F.get(0),$(q).click($.proxy(function(){this.isEditMode()||this.hide()},this)),b=new HZ.lb.PluginsController,this.addPlugin(b),z.hover(this.handleImageMouseOver.bind(this),this.handleImageMouseOut.bind(this)),x.click(this.handleCloseClick.bind(this)),G.on("mouseenter",this.showScrollbar.bind(this)),m.on("wheel","#lbImageContainer, #lbInfo .content-scroll-bar, #lbInfo .content-fixed",this.handleMouseWheel.bind(this)),m.on("mousedown","#lbInfo .content-scroll-bar",this.onScrollbarDragStart.bind(this)),p.on("contextmenu",".lbImageView",function(a){a.preventDefault(),HZ.lb.plugins.SpaceActions.handleEmbed()}),this.measureScrollbar(),this.hideNativeScrollbar(),this.measureContentBox(),f={},this.setContentGroups(HZ.lb.Config.contentGroups),P=new MutationObserver(this.handleContentMutation.bind(this)),"undefined"==typeof HZ.feedComments&&HZ.lb.Utils.loadFeedCommentsResources(),HZ.ns("HZ.module"),"undefined"==typeof HZ.module.ReturnPolicy&&HZ.lb.Utils.loadReturnPolicyResources(),HZ.lb.Config.preloadEditorResources&&HZ.lb.Utils.loadLightboxEditor(!1),HZ.lb.Config.enableColorPicker&&HZ.lb.Utils.loadColorPickerResources())},this.setExpandedMode=function(a){j=!!a,r.toggleClass("expanded",j),y.addClass("image-container--transition"),this.registerTimeout("expand",function(){y.removeClass("image-container--transition"),this.handleResize()}.bind(this),251)},this.getExpandedMode=function(){return j},this.handleContentMutation=function(a){this.registerTimeout("contentGroupsDebounce",this.calculateContentGroupPositions.bind(this),50),this.registerTimeout("scrollbarDebounce",this.resizeScrollbar.bind(this),50),this.registerTimeout("scrollPositionDebounce",this.correctScrollPositionAfterMutation.bind(this),50)},this.calculateContentGroupPositions=function(){h={};var a=this.isProduct()?HZ.lb.Config.productContentGroupIds:HZ.lb.Config.spaceContentGroupIds;a.forEach(function(a){var b=this.getNodeByContentGroupId(a);if(b&&b.length){var c=b.position().top,d=c+b.height();h[a]={top:c,bottom:d}}}.bind(this))},this.getContentGroupPositions=function(){return h},this.correctScrollPositionAfterMutation=function(){Q&&(this.jumpToSelector(Q),Q=null)},this.resizeScrollbar=function(){var a=o.h;this.measureContentHeight();var b=a>O;M=a/O*a-4,K.css({height:M+"px"}).toggleClass("hidden",b)},this.repositionScrollbar=function(){var a=o.h;this.measureContentHeight();var b=this.getContentScrollTop(),c=b/O*a+2;K.css({top:c+"px"})},this.measureScrollbar=function(){return $.isNumeric(L)||(L=HZ.ui.Utils.measureScrollbar()),L},this.measureContentHeight=function(){O=G.outerHeight()+H.outerHeight()},this.hideNativeScrollbar=function(){0===L?F.css({width:"calc(100% + 16px)",paddingRight:"16px"}):F.css({width:"calc(100% + "+L+"px)"})},this.onScrollbarDragStart=function(a){return S=a.pageY,T=N.scrollTop,m.on("mouseup.scrollbar",this.onScrollbarDragEnd.bind(this)),m.on("mousemove.scrollbar",this.onScrollbarDragMove.bind(this)),t.disableSelection(),r.addClass("scroll-drag"),U=!0,a.preventDefault(),!1},this.onScrollbarDragMove=function(a){var b=a.pageY-S,c=o.h,d=O-c,e=c-M;if(d>0){var f=e/d;N.scrollTop=T+b/f}clearSelection()},this.onScrollbarDragEnd=function(a){U=!1,m.off(".scrollbar"),r.removeClass("scroll-drag"),t.enableSelection(),clearSelection()},this.measureContentBox=function(){o={w:F.width(),h:F.height()}},this.setContentGroups=function(a){e=a,e.forEach(function(a,b){this.addContentGroup(a,b)}.bind(this)),g=0,this.notifyPlugins(ra)},this.addContentGroup=function(a,b){var c=a.id;if(c){f[c]=a;var d=G.find(".content-group"),e=$('<div class="content-group"></div>').attr("data-group-id",c).addClass(c);b<=d.length?G.append(e):G.eq(b).before(e)}},this.getContentGroups=function(){return e},this.getContentGroupById=function(a){var b;return e&&(b=f[a]),b},this.getNodeByContentGroupId=function(a){return t.find(".content-group[data-group-id='"+a+"']")},this.setCurrentContentGroupIndex=function(a){var b=a!=g;g=a,b&&this.notifyPlugins(sa)},this.getCurrentContentGroupIndex=function(){return g},this.focusCurrentContentGroup=function(){t.find(".lbInfoBox").removeClass("scrolling scrolled");var a=this.getCurrentContentGroupId(),b=this.getContentGroupPositions()[a];if(b){var c=this.getNodeByContentGroupId(a),d=c.find(".lbInfoBox").addClass("scrolling");V=!0,this.animateScrollTo(b.top,function(){V=!1,d.removeClass("scrolling").addClass("scrolled")}.bind(this))}},this.getCurrentContentGroupId=function(){var a=this.isProduct()?HZ.lb.Config.productContentGroupIds:HZ.lb.Config.spaceContentGroupIds;return a[g]},this.getContentFooter=function(){return H},this.handleImageMouseOver=function(a){R=!0,this.showScrollbar(),this.showSpaceActions()},this.handleImageMouseOut=function(a){R=!1,this.hideSpaceActions()},this.handleMouseWheel=function(a){var b=a.originalEvent.deltaY;a.originalEvent.deltaMode&&1==a.originalEvent.deltaMode&&(b*=20),N.scrollTop+=b},this.showSpaceActions=function(){this.registerTimeout("hideSpaceActions",$.noop,0),$("#lbActions").removeClass("fade-out"),this.dimScrollbar()},this.hideSpaceActions=function(a){var b=this.showScrollbar.bind(this);this.registerTimeout("hideSpaceActions",function(){R||($("#lbActions").addClass("fade-out"),b())},750)},this.enterColorPickerMode=function(){W||($("#lbMain").addClass("color-picker"),W=!0,this.notifyPlugins(ta))},this.exitColorPickerMode=function(){W&&($("#lbMain").removeClass("color-picker"),W=!1,this.notifyPlugins(ta))},this.isColorPicking=function(){return W},this.handleImageDivClick=function(a){if(Aa){var b=this.getImageBounds();a.pageX>b.w*ga+b.x?this.next():this.previous()}},this.lightboxEditorEnabled=!1,this.isSignupMode=function(){return HZ.data.CurrentSessionUser?void 0:!0},this.show=function(a,b){this.resetContext(),HZ.events&&(HZ.events.subscribe(this,"search:start",this.detachKeyboardHandler.bind(this)),HZ.events.subscribe(this,"search:stop",this.attachKeyboardHandler.bind(this)),HZ.events.subscribe(this,"quantity:start",this.detachKeyboardHandler.bind(this)),HZ.events.subscribe(this,"quantity:stop",this.attachKeyboardHandler.bind(this)));var c=HZ.data.Contexts.get(b);c.setCurrentSpaceId(a),this.pushContext(c),p.removeAttr("style"),this.notifyPlugins(ja),n.parent("html").addClass("lbHtml lbLockScroll"),l.on("resize.lightbox orientationchange.lightbox",$.throttle(250,this.handleResize.bind(this))),l.on("beforeunload.lightbox",$.proxy(this.handleBeforeUnload,this)),this.attachKeyboardHandler(),F.on("scroll.lightbox",$.throttle(5,this.handleScroll.bind(this))),p.removeClass("hidden"),this.handleResize(!0),i=!0,this.showScrollbar(),this.measureContentBox(),this.calculateContentGroupPositions(),P.observe(G.get(0),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),$("#stickyFooterActions").addClass("lbView disabled")},this.hide=function(){if(HZ.events&&HZ.events.unsubscribe(this),"undefined"!=typeof imageTagsObj){var a=this.getCurrentSpace();updateImageTags(a.id)}if(this.isEditMode())return this.exitEditMode($.proxy(this.hide,this));this.exitColorPickerMode();var b=d[d.length-1];b.unstashSpaces(),this.setSelectedListingId(null),this.resetScroll(),i=!1,p.addClass("hidden"),this.notifyPlugins(ka),l.off(".lightbox"),this.detachKeyboardHandler(),P.disconnect(),n.parent("html").removeClass("lbHtml"),HZ.message.Bus.broadcast(HZ.message.Messages.LIGHTBOX_UNLOAD),$("#stickyFooterActions").removeClass("lbView")},this.showScrollbar=function(){K.removeClass("fade-out")},this.dimScrollbar=function(){K.addClass("fade-out")},this.resetScroll=function(){g=0,N.scrollTop=0},this.handleScroll=function(a){this.repositionScrollbar(),this.showScrollbar(),this.registerTimeout("dimScrollbar",this.dimScrollbar.bind(this),750),this.notifyPlugins(ua)},this.getContentMask=function(){return E},this.getContentScrollTop=function(){return N.scrollTop},this.getContentBox=function(){return o},this.scrollToTop=function(a){F.stop().animate({scrollTop:0},250,"easeOutSine",callback)},this.scrollToSelector=function(a,b){var c=$(a);if(c&&c.length){for(var d=c.position().top,e=c.offsetParent().get(0);e!=N;){var f=$(e);f&&f.position()&&(d+=f.position().top),e=f.offsetParent().get(0)}$.isNumeric(d)&&this.animateScrollTo(d,b)}},this.animateScrollTo=function(a,b){F.stop().animate({scrollTop:a},250,"easeOutSine",b)},this.jumpToSelector=function(a){var b=$(a);if(b){Q=a;var c=b.position().top+N.scrollTop;F.stop().scrollTop(c)}},this.switchType=function(a){if(a!=k){switch(r.removeClass("product space"),HZ.lb.Config.wideProductColumnEnabled&&r.addClass("lb-main--wide-info-column"),a){case this.PRODUCT_TYPE:r.addClass("product");break;case this.SPACE_TYPE:default:r.addClass("space")}k=a}},this.getLbType=function(){return k},this.setImageData=function(a){ba=a},this.getImageData=function(){return ba},this.showSpaceTagEditor=function(a,b,c){this.setEditTagId(c),da=aa,HZ.lb.Utils.loadLightboxEditor(!0),this.setEditTagMode(!0),this.show(a,b)},this.showSpaceEditor=function(a,b){da=Z,HZ.lb.Utils.loadLightboxEditor(!0),this.setEditMode(!0),this.show(a,b)},this.isShowing=function(){return i},this.showDialog=function(a){this.detachKeyboardHandler(),HZ.ui.Yamdi.show(a,this.attachKeyboardHandler.bind(this))},this.showLoginDialog=function(a,b,c){this.detachKeyboardHandler(),a||(a=HZ.lb.Config.SIGNUP_TRACKING_OTHER),HZ.auth.Manager.signup(a,b,null,this.attachKeyboardHandler.bind(this),c)},this.isEditMode=function(){return this.lightboxEditorEnabled&&da>X},this.isEditTagMode=function(){return this.lightboxEditorEnabled&&da>=_},this.getEditTagId=function(){return za},this.setEditTagId=function(a){za=a},this.setEditTagMode=function(a){if(this.lightboxEditorEnabled){da=a?da==aa?aa:_:X;var b=$(document.body.parentNode),c=p.add(b);c.toggleClass("lbEditMode",!!this.isEditMode())}},this.setEditMode=function(a){if(this.lightboxEditorEnabled){da=a?da||Y:X;var b=$(document.body.parentNode),c=p.add(b);c.toggleClass("lbEditMode",!!this.isEditMode())}},this.finalizeBeforeSaveOrDiscard=function(){this.notifyPlugins(wa)},this.exitEditMode=function(a){return a||da!=Z&&da!=aa||(a=$.proxy(this.hide,this)),this.finalizeBeforeSaveOrDiscard(),this.hasChanges()?(HZ.lb.ConfirmSaveDialog.onDiscardClicked=$.proxy(function(){this.notifyPlugins(ya),this.setEditMode(!1),HZ.ui.Yamdi.hide(),this.handleResize(),this.refresh(),a&&a()},this),HZ.lb.ConfirmSaveDialog.onSaveClicked=$.proxy(function(){this.notifyPlugins(xa),this.setEditMode(!1),HZ.ui.Yamdi.hide(),this.handleResize(),this.refresh(),a&&a()},this),this.showDialog(HZ.lb.ConfirmSaveDialog)):(this.setEditMode(!1),this.handleResize(),this.refresh(),a&&a(),void 0)},this.hasChanges=function(){return HZ.lb.plugins.EditSpaceDataManager&&HZ.lb.plugins.EditSpaceDataManager.isDirty()},this.handleBeforeUnload=function(){return this.isEditMode()&&this.hasChanges()?_hgt("You have unsaved changes. Are you sure?"):void 0},this.attachKeyboardHandler=function(){var a=$(document),b="keydown.lightbox";a.off(b).on(b,$.proxy(this.handleKeyDown,this))},this.detachKeyboardHandler=function(){$(document).off("keydown.lightbox")},this.handleKeyDown=function(a){var b=$(a.target),c=this.isEditMode(),d=a.ctrlKey;if("keydown"==a.type)switch(a.keyCode){case 27:this.isViewSpace()||(b.trigger("blur"),this.hide());break;case 221:if(d)return b.trigger("blur"),this.next(),!1;break;case 219:if(d)return b.trigger("blur"),this.previous(),!1;break;case 83:if(d)return setTimeout($.proxy(function(){this.notifyPlugins(xa)},this),100),b.trigger("blur"),a.preventDefault(),!1;break;case 32:case 39:if(!c)return this.next(),!1;break;case 37:if(!c)return this.previous(),!1;break;case 69:if(!c&&d)return HZ.lb.plugins.SpaceActions.handleEdit(),!1}},this.handleCloseClick=function(a){return a.stopPropagation(),this.hide(),!1},this.registerTimeout=function(a,b,c){this.timeouts||(this.timeouts={}),null!=this.timeouts[a]&&(clearTimeout(this.timeouts[a]),this.timeouts[a]=null),this.timeouts[a]=setTimeout($.proxy(function(){this.timeouts[a]=null,b()},this),c)},this.refresh=function(a){a||this.setSelectedListingId(null),this.notifyPlugins(oa)},this.reload=function(a,b){var c=this.getContext();null!=b&&b.length>=1&&b[0]!=c.getName()&&this.recreateContextStack(b),c.setCurrentSpaceId(a),this.refresh()},this.addPlugin=function(a){c.addListener(a),a.setOwner(this)},this.removePlugin=function(a){c.removeListener(a),a.setOwner(null)},this.addImageLayer=function(a){$(A).prepend(a)},this.addLbImageLayer=function(a){return $(B).append(a)},this.addBreadcrumbs=function(a){$(D).append(a)},this.addImageControl=function(a){$(C).append(a)},this.addInfoBoxToContentGroup=function(a,c,d){if(c&&d){var e=this.getNodeByContentGroupId(d);e.length||(e=$("<div class='content-group'></div>").attr("data-group-id",d).addClass(d).appendTo(G)),e.append(a),b.registerContent(c,a)}},this.addSpaceEditorBox=function(a,c){c&&($("#lbEditContent").append(a),b.registerContent(c,a))},this.addActionItem=function(a,b,c){var d=$("#lbActions"+b);$.isNumeric(c)&&c<d.children().length?d.children().eq(c).before(a):d.append(a)},this.addFixedContent=function(a,c){c&&(I.append(a),b.registerContent(c,a))},this.notifyPlugins=function(a){c.notifyListeners(function(){this[a]&&this[a]()}),this.onBeforeContentUpdate(a),b.updateContents(),c.notifyListeners(function(){this[la]&&this[la](a)})},this.onBeforeContentUpdate=function(a){switch(a){}},this.resetContext=function(){d=[]},this.recreateContextStack=function(a){this.resetContext();for(var b=0;b<a.length;b++){var c=HZ.data.Contexts.get(a[b]);c&&d.push(c)}this.notifyPlugins(na)},this.pushContext=function(a){d[0]&&d[0].unregisterOwner(),d.unshift(a),a.registerOwner(this),HZ.data.Contexts.get(a.getName())||HZ.data.Contexts.put(a.getName(),a),this.notifyPlugins(na)},this.popContext=function(){if(1!=d.length){var a=d.shift();a&&a.unregisterOwner(),d[0]&&d[0].registerOwner(this),this.notifyPlugins(na)}},this.getSpaceImage=function(a,b){var c,d,e=this.getContext(),f=null;return b=b||0,e&&a&&(c=e.getCurrentSpaceId())&&(d=a.iids[b],f=HZ.data.Images.get(d)),f},this.setSelectedListingId=function(a){Ba=a},this.getSelectedListingId=function(){var a=this.getCurrentSpace().id,b=HZ.data.ProductsInfo.get(a);if(HZ.lb.Config.spaceIdToVendorListingIdOverride&&HZ.lb.Config.spaceIdToVendorListingIdOverride[a]&&(Ba=HZ.lb.Config.spaceIdToVendorListingIdOverride[a]),!Ba&&b){for(var c=HZ.data.SpaceListingIds.get(a),d=c?c.length:0,e=0;d>e;e++){var f=c[e];if(f==b.plid){this.setSelectedListingId(f);break}}!Ba&&c&&c[0]&&this.setSelectedListingId(c[0])}return Ba},this.isPalette=function(){var a=this.getCurrentSpace();return"undefined"!=typeof a.srcs&&0!==parseInt(a.srcs)},this.isFullPageAd=function(){return this.isPaidProAd()||this.isPhotoAd()},this.getContext=function(){return d?d[0]:null},this.getContextType=function(){return this.getContext().getType()},this.getContextStack=function(){return d},this.getCurrentSpace=function(){var a,b=this.getContext();return b&&(a=b.getCurrentSpaceId())?HZ.data.Spaces.get(a):null},this.isViewSpace=function(){return HZ.lb.Config.isViewSpace||!1},this.isPaidProAd=function(){var a=this.getCurrentSpace();return!!HZ.data.PaidProAds.get(a.id)},this.isPhotoAd=function(){var a=this.getCurrentSpace(),b=HZ.data.PhotoAds.get(a.id);return b&&b.products&&b.products.length},this.isProductAd=function(){var a=this.getCurrentSpace(),b=HZ.data.ProductAds.get(a.id);return!this.isPhotoAd()&&b&&b.products&&b.products.length},this.isMarketPlaceAd=function(){var a=this.getCurrentSpace(),b=HZ.data.PhotoAds.get(a.id);return this.isPhotoAd()&&b.mpAd},this.isAdvertiseSpace=function(){return this.isPaidProAd()||this.isPhotoAd()||this.isProductAd()},this.isMarketplaceProduct=function(){var a,b=this.getCurrentSpace();return b&&(a=HZ.data.ProductsInfo.get(b.id)),b&&a&&a.mp},this.isPPCProduct=function(){var a=this.getCurrentSpace(),b=a?HZ.data.PPCAds.get(a.id):{};return b&&b.isPPCProduct},this.isProduct=function(){var a=this.getCurrentSpace();return a&&a.prod},this.isFile=function(){var a=this.getCurrentSpace();return a&&a.ift},this.isGalleryContext=function(){return!!this.getCurrentSpaceGallery()&&this.getContextType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK},this.isProjectContext=function(){return!!this.getCurrentSpaceProject()&&this.getContextType()==HZ.lb.Config.CONTEXT_TYPE_PROJECT},this.isProProjectContext=function(){var a=this.getCurrentSpace(),b=HZ.data.Users.get(a.ow);return b&&"1"==b.p&&this.isProjectContext()},this.isRecommendationsContext=function(){return this.getContextType()==HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS},this.getCurrentSpaceProject=function(){var a=this.getCurrentSpace();return HZ.data.Projects.get(a.pid)},this.getCurrentSpaceGallery=function(){var a=this.getContext(),b=a.getDescriptor();return HZ.data.Galleries.get(b[HZ.lb.Config.DESCRIPTOR_FIELD_GALLERY_ID])},this.isFeaturedGalleryContext=function(){var a=this.getContext();return this.isGalleryContext&&a.getDescriptor()[HZ.lb.Config.DESCRIPTOR_FIELD_IS_GALLERY_FEATURED]},this.getSpaceDescription=function(){var a=this.getCurrentSpace(),b=a.c;if(!b){var c=HZ.data.ProductsInfo.get(a.id),d=HZ.data.ListingsInfo.get(this.getSelectedListingId());b=d?d?d.desc:"":c?c.desc:""}return b||(b=a.desc),b},this.next=function(){this.setSelectedListingId(null);var a=this.getContext();Aa&&a.next()&&this.handleImageChanged()},this.previous=function(){this.setSelectedListingId(null);var a=this.getContext();Aa&&a.previous()&&this.handleImageChanged()},this.handleImageChanged=function(){this.resetScroll(),this.showScrollbar(),this.exitColorPickerMode(),this.notifyPlugins(oa)},this.handleContextChanged=function(){this.notifyPlugins(na)},this.handleImageDataChanged=function(){this.notifyPlugins(pa)},this.handleImageIndexChanged=function(){this.notifyPlugins(qa)},this.handleEditDataChanged=function(){this.notifyPlugins(va)},this.handleResize=function(b){a=UIHelper.getScreenBounds(),this.handleContentResize(),this.notifyPlugins(ma),b===!0&&this.notifyPlugins(oa)},this.handleContentResize=function(){this.measureContentBox(),this.resizeScrollbar(),this.repositionScrollbar()},this.setImageBounds=function(a){ca=a},this.getImageBounds=function(){return ca},this.getImageMinVals=function(){return{w:ea,h:fa}},this.getImageDiv=function(){return A},this.getCurrentImageNode=function(){return z.find(".currentImage")},this.getContentTabsNode=function(){return v},this.getThumbSize=function(a){var b=HZ.data.Spaces.get(a),c=b.prod,d=this.getImageBounds().w;return c||1e3>d?ia:ha},this.areActionsEnabled=function(){return Aa},this.getLightboxElement=function(){return s},this.getInfoElement=function(){return t}},HZ.lb.PluginsController=function(){var a,b,c=["spaceInfo","spaceTitle","projectInfo","imageTagsInfo","colorPickerCTA","colorPickerCTA2","colorPicker","paletteSourcePhoto","questionsInfo","productInfo","productIdeabookComment","mpProductVariation","sponsoredSpaceDescriptionInfo","spaceAuthorInfo","comments","productSpecs","sellerShippingInfo","spaceRelatedProducts","productRelatedProducts","coBuyProducts","relatedPhotos","productsInRoom","productReviews","recommendationsSpaces","recommendationsProducts","marketplaceAds","adRelatedProducts","localProsAd"];this.setOwner=function(c){a=c,b=[]},this.registerContent=function(a,c){b[a]||(b[a]={enabled:!0,divs:[]});var d=b[a];c&&($(c).addClass("lbPlugin"),d.divs.push(c))},this.imageResized=function(){},this.imageChanged=function(){var b=a.getCurrentSpace();if(b.fullyLoaded){for(var d=b.ift,e=a.isMarketplaceProduct(),f=a.isProduct(),g=c.length,h=0;g>h;h++){var i=!a.isEditMode();this.setPluginEnabled(c[h],i)}d&&(this.setPluginEnabled("comments",!1),this.setPluginEnabled("spaceAuthorInfo",!1),this.setPluginEnabled("questionsInfo",!1),this.setPluginEnabled("projectInfo",!1)),this.setPluginEnabled("spaceEditor",a.isEditMode()&&!a.isEditTagMode()),this.setPluginEnabled("spaceTagEditor",a.isEditTagMode()),e?(this.setPluginEnabled("spaceInfo",!1),this.setPluginEnabled("spaceRelatedProducts",!1),this.setPluginEnabled("spaceAuthorInfo",!1),this.setPluginEnabled("recommendationsSpaces",!1),this.setPluginEnabled("colorPickerCTA",!1),this.setPluginEnabled("colorPicker",!1),this.setPluginEnabled("paletteSourcePhoto",!1),this.setPluginEnabled("imageTagsInfo",!1)):f?(this.setPluginEnabled("mpProductVariation",!1),this.setPluginEnabled("spaceInfo",!1),this.setPluginEnabled("spaceRelatedProducts",!1),this.setPluginEnabled("coBuyProducts",!1),this.setPluginEnabled("spaceAuthorInfo",!1),this.setPluginEnabled("recommendationsSpaces",!1),this.setPluginEnabled("colorPickerCTA",!1),this.setPluginEnabled("colorPicker",!1),this.setPluginEnabled("paletteSourcePhoto",!1),this.setPluginEnabled("imageTagsInfo",!1)):(this.setPluginEnabled("productInfo",!1),this.setPluginEnabled("productIdeabookComment",!1),this.setPluginEnabled("mpProductVariation",!1),this.setPluginEnabled("productRelatedProducts",!1),this.setPluginEnabled("coBuyProducts",!1),this.setPluginEnabled("productSpecs",!1),this.setPluginEnabled("sellerShippingInfo",!1),this.setPluginEnabled("productsInRoom",!1),this.setPluginEnabled("productReviews",!1),this.setPluginEnabled("recommendationsProducts",!1)),!b.prod&&a.isPaidProAd()&&(this.setPluginEnabled("spaceAuthorInfo",!1),this.setPluginEnabled("projectInfo",!1),this.setPluginEnabled("spaceRelatedProducts",!1),this.setPluginEnabled("comments",!1)),a.isPalette()&&(this.setPluginEnabled("projectInfo",!1),this.setPluginEnabled("recommendationsSpaces",!1),this.setPluginEnabled("comments",!1),this.setPluginEnabled("spaceRelatedProducts",!1)),a.isPhotoAd()&&(a.isMarketPlaceAd()?this.setPluginEnabled("recommendationsSpaces",!1):(this.setPluginEnabled("spaceTitleInfo",!1),this.setPluginEnabled("comments",!1),this.setPluginEnabled("spaceAuthorInfo",!1),this.setPluginEnabled("spaceInfo",!1),this.setPluginEnabled("projectInfo",!1),this.setPluginEnabled("recommendationsSpaces",!1)))}},this.imageDataUpdated=function(){this.imageChanged()},this.setPluginEnabled=function(a,c){var d=b[a];d&&(d.enabled=c)},this.updateContents=function(){for(var a in b)if(b.hasOwnProperty(a))for(var c=b[a],d=0;d<c.divs.length;d++){var e=$(c.divs[d]),f=c.enabled&&!e.is(":empty");e.toggleClass("hidden",!f)}}},HZ.lb.plugins.ImagePreloader=new function(){var a,b=[],c=0,d=10,e=3,f=0;this.setOwner=function(b){a=b},this.prefetchSpacePhoto=function(e){if(!this.isImageAvailable(e)){var f,g,h=HZ.data.Spaces.get(e),i=a.getThumbSize(e),j=HZ.data.Categories.getCategoryById(h.cat),k=HZ.utils.Styles.getStyleUrl(h.s);h.bmu&&(i=HZ.lb.Config.BOOKMARKLET_UPLOAD_THUMBSIZE),f=HZ.utils.Links.getSpaceImageSeoThumbUrl(h.id,i,k,j),g=b[c]?b[c].image:new Image,g.src=f,b[c]={spaceId:e,image:g},c=(c+1)%d}},this.imageChanged=function(){var b,c;if(!(f++<1))for(c=a.getContext().getNextSpaceIds(e),b=0;b<c.length;b++)this.prefetchSpacePhoto(c[b])},this.isImageAvailable=function(a){for(var c=0;c<b.length;c++)if(b[c].spaceId==a)return!0;return!1}},HZ.lb.plugins.ImageViewer=new function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=0,y="lbt",z={x:0,y:0,w:200,h:200,thumb:2},A={x:0,y:0,w:640,h:640,thumb:4},B={w:990,h:990},C='<div class="before-tag-large hidden"><i class="hzi-font hzi-Before-Photo"></i>%BEFORE_LABEL%</div>';this.setOwner=function(h){a=h,b=$(a.getImageDiv()),c={w:b.width(),h:b.height()},b.on("click",".currentImage",null,this.handleImageDivClick.bind(this)).disableSelection(),d=$('<div id="lbImageViewLayer"></div>'),q=[];for(var i=0;3>i;i++){var k=$("<img>").attr("src",HZ.utils.Config.emptyGifData).addClass("lbImageView");d.append(k),q[i]=k.get(0)}d.on("load",".lbImageView",this.imageLoaded.bind(this)).on("dragstart",".lbImageView",function(){return!1}).on("mousedown",".lbImageView",function(a){preventImageDrag(a)}),$("#lbImageView, #lbImageViewLayer").disableSelection(),g=$(HZ.utils.Html.template(C,{BEFORE_LABEL:_hgt("Before Photo")})).appendTo(d),r=0,s=q[0],a.addImageLayer(d.get(0)),e=d.find("img"),j=$('<a href="javascript:;" class="zoom-toggle btn med tint btn-toggle" compid="lb_prod_zoom"><i class="icon hzi-font hzi-zoom-icon not-toggled"></i><i class="icon hzi-font hzi-zoom-out toggled"></i></a>'),j.click(this.handleZoomClick.bind(this)),j.hover(this.handleZoomButtonEnter.bind(this),this.handleZoomButtonLeave.bind(this)),a.addActionItem(j,HZ.lb.ActionBar.ACTION_BAR_RIGHT),f=$('<a href="javascript:;" class="expand-toggle btn med tint btn-toggle" compid="lb_space_expand"><i class="icon hzi-font hzi-Full-screen not-toggled"></i><i class="icon hzi-font hzi-Exit-full-screen toggled"></i></a>'),f.attr("tooltip-data",_hgt("Click here to expand")),f.mouseover(function(){D()&&($(this).tipBubble("hide"),w=!1)}),v=new MutationObserver(function(){D()&&f.tipBubble("show")}),f.click(this.handleExpandClick.bind(this)),a.addActionItem(f,HZ.lb.ActionBar.ACTION_BAR_RIGHT)},this.handleExpandClick=function(b){a.setExpandedMode(!a.getExpandedMode())},this.handleZoomClick=function(a){this.setZoomMode(!l)},this.handleZoomButtonEnter=function(){l||this.resetTransformOrigin(),this.setFollowMouse(!1)},this.handleZoomButtonLeave=function(){this.setFollowMouse(l)},this.setZoomMode=function(a){l=a,l?(d.addClass("zoom"),b.on("mousemove.lightbox",this.handleZoomMouseMove.bind(this)),this.setFollowMouse(!0),j.addClass("active"),this.loadHiResImage()):(d.removeClass("zoom"),b.off("mousemove.lightbox"),this.setFollowMouse(!1),j.removeClass("active"))},this.loadHiResImage=function(){var b,c,d=a.getCurrentSpace(),e=a.getSpaceImage(d,x),f=e&&!!e.hr;if(f&&!p){b=-1!=e.hr.indexOf(14)?14:16;var g=this.getImageUrl(d,b,x);c=d.id,HZ.lb.Utils.loadImage(g,this.handleHiResImageLoadComplete.bind(this,g,c))}},this.handleHiResImageLoadComplete=function(b,c){if(!$.isNumeric(c)||$.isNumeric(c)&&c==a.getCurrentSpace().id){p=!0;var e=$("<img>").attr("src",HZ.utils.Config.emptyGifData).addClass("lbImageView lbImageView-hires currentImage").css("background-image","url("+b+")");a.registerTimeout("hiresLoaded",function(){d.find(".currentImage:not(.lbImageView-hires)").removeClass("currentImage").addClass("discardedImage")}.bind(this),750),$(s).after(e),u=s,s=e.get(0)}},this.setFollowMouse=function(a){a?(clearInterval(o),o=setInterval(this.moveZoomedImage.bind(this),20)):clearInterval(o)},this.moveZoomedImage=function(){var b=$(s),d=b.css("transform-origin").split(" "),e=parseInt(d[0]),f=parseInt(d[1]),g=a.getImageBounds(),h=g.x-100+m/c.w*(g.w+50),i=g.y-100+n/c.h*(g.h+50),j=h-e,k=i-f,l=e+j/10,o=f+k/10;b.css({"transform-origin":l+"px "+(o+"px")})},this.resetTransformOrigin=function(){$(s).css({"transform-origin":"50% 50%"});var b=a.getImageBounds();m=b.x+b.w/2,n=b.y+b.h/2},this.handleZoomMouseMove=function(a){m=a.clientX,n=a.clientY},this.handleImageDivClick=function(b){l?this.setZoomMode(!1):a.handleImageDivClick(b)},this.updateImages=function(){q&&q.length>2&&(s=q[r],t=q[(r+2)%3],u=q[(r+1)%3],$(u).css("background-image","none"))},this.replaceActiveImage=function(b,c){(!$.isNumeric(c)||$.isNumeric(c)&&c==a.getCurrentSpace().id)&&$(s).css("background-image","url("+b+")")},this.getDimsLimit=function(b,c){var d={thumb:a.getThumbSize(b.id)};if(b.bmu){var e=HZ.data.CurrentSessionUser,f=e?e.getUserId():-1,g=e&&e.isIdeabookCollaborator;d=f==b.au||g?A:z}return d},this.getImageUrl=function(a,b,c){var d=HZ.data.Categories.getCategoryById(a.cat),e=HZ.utils.Styles.getStyleName(a.s);return HZ.utils.Links.getSpaceImageSeoThumbUrl(a.id,b,e,d,c)},this.refresh=function(b){var g,h=a.getCurrentSpace(),l=a.getSpaceImage(h,x),m=!!a.isProduct();if(j.toggleClass("hidden",!m),f.toggleClass("hidden",m),f.toggleClass("active",!!a.getExpandedMode()),h&&h.ift&&!l&&(l={w:186,h:245,bg:1},h.prod=!0),h&&l){var n,o,p,q,v={w:parseInt(l.w,10),h:parseInt(l.h,10)},w=this.getDimsLimit(h,l),y=h.id,z=l.rotation||0,A=z%180>0;if(A&&(v={w:v.h,h:v.w}),w.w&&(v=HZ.ui.Utils.getMaxBoundRect(v,w,a.getImageMinVals(),!0)),k=v.w>c.w||v.h>c.h,j.attr("disabled",!k),b||null==s){a.registerTimeout("hiresLoaded",$.noop,0),d.find(".lbImageView-hires").remove(),this.setZoomMode(!1),r=(r+1)%3,this.updateImages(),$("#lbMain").attr("objId",y);var C=i&&i.isImageAvailable(y);o=$(s),p=$(t),q=$(u),e.removeClass("currentImage discardedImage previousImage unscaled landscape image-solo"),p.addClass(C?"discardedImage":"previousImage"),q.addClass("discardedImage"),o.addClass("currentImage").toggleClass("image-solo",1==a.getContext().getTotalSpacesCount())}else o=$(s);var D=w.thumb;g=this.getImageUrl(h,D,x),this.replaceActiveImage(g),a.switchType(m?a.PRODUCT_TYPE:a.SPACE_TYPE);var E=a.getImageMinVals(),F={w:o.width(),h:o.height()};o.removeClass("unscaled"),v.w>v.h?(o.addClass("landscape"),v.w<E.w&&v.h<E.h&&v.w<F.w&&v.h<F.h&&o.addClass("unscaled")):v.w<E.h&&v.h<E.w&&v.w<F.h&&v.h<F.w&&o.addClass("unscaled");var G=v.w/v.h,H=c.w/c.h;n=G>H?{w:c.w,h:v.h*(c.w/v.w)}:{w:v.w*(c.h/v.h),h:c.h};var I=o.css("background-size"),J=o.css("background-position");switch(I){case"contain":switch(n.x=Math.floor((c.w-n.w)/2),J){case"50% 50%":case"center":n.y=Math.floor((c.h-n.h)/2);break;default:n.y=0}break;case"auto":n.x=Math.floor((c.w-n.w)/2),n.y=Math.floor((c.h-n.h)/2)}if(m){var K=parseInt(o.css("top"),10),L=parseInt(o.css("bottom"),10),M=parseInt(o.css("left"),10),N=parseInt(o.css("right"),10);n.x+=M,n.y+=K,n.w-=M+N,n.h-=K+L}a.setImageData({x:n.x,y:n.y,w:n.w,
h:n.h,src:g}),a.setImageBounds(n),!m&&(c.w>B.w||c.h>B.h)&&this.loadHiResImage()}},this.imageChanged=function(){var b=a.getCurrentSpace().id;x=0,h!=b&&(p=!1,this.refresh(!0),a.showSpaceActions(),this.resetTransformOrigin()),h=b,E()},this.imageDataUpdated=function(){var b=a.getCurrentSpace();b.fullyLoaded&&(g.toggleClass("hidden",!b.bt),g.css("left","calc(50% - "+g.outerWidth()/2+"px)"))},this.getActiveImage=function(){return s},this.setActiveSpaceImageIndex=function(b){x=b,this.refresh(!0),a.handleImageIndexChanged()},this.getActiveSpaceImageIndex=function(){return x},this.imageResized=function(){c={w:b.width(),h:b.height()},this.refresh(!1),D()&&f.tipBubble("show")},this.imageLoaded=function(){t&&$(t).removeClass("currentImage previousImage").addClass("discardedImage")},this.lightboxLoaded=function(){h=null,D()&&v.observe($("#lbAdminMenu").get(0),{attributes:!0,attributeFilter:["class"]})},this.lightboxUnloaded=function(){$(s,t).css("background-image","none"),h=null,D()&&(v.disconnect(),1==getCookie(y)&&(w=!1))},this.setImageCache=function(a){i=a};var D=function(){if("undefined"==typeof w){var b=a.getContext().getName();w="homepage_"===b&&1!=getCookie(y)}return w},E=function(){D()&&!a.isProduct()?(f.tipBubble({content:f.attr("tooltip-data"),id:"expand-button--tooltip",width:"auto",point:"south right",position:"absolute",attachTo:"#lbActionsRight",showCloseBtn:!1,fadeDuration:0}),1!=getCookie(y)&&setCookie(y,1)):f.tipBubble("hide")}},HZ.lb.plugins.NavigationLayer=function(){var a,b,c;this.setOwner=function(d){a=d,b=$("#lbLeft").click(this.handlePrevious.bind(this)).disableSelection(),c=$("#lbRight").click(this.handleNext.bind(this)).disableSelection()},this.handleNext=function(){a.next(),c.hasClass("bounce")&&c.removeClass("bounce")},this.handlePrevious=function(){a.previous()},this.contextChanged=function(){this.imageChanged()},this.imageChanged=function(){var d=a.getContext();d&&(c.toggleClass("hidden",!d.hasNext()),b.toggleClass("hidden",!d.hasPrevious()))}},HZ.lb.plugins.SpaceDataLoader={owner:null,setOwner:function(a){this.owner=a},imageChanged:function(){var a=[this.owner.getCurrentSpace()],b=this.owner.getContext().getNextSpaceIds(1);b[0]&&a.push(HZ.data.Spaces.get(b[0]));for(var c=0;c<a.length;c++){var d=a[c];if(!d.fullyLoaded){var e=HZ.ajaz.Services.DETAIL_LEVEL_ALL_WITH_AD_SPACE_INFO;null!=HZ.data.PaidProAds.get(d.id)&&(e=HZ.ajaz.Services.DETAIL_LEVEL_BASE_SPACE_INFO);var f=-1;if(d.prod){var g=HZ.data.ProductsInfo.get(d.id);g&&g.pover&&(f=g.plid)}HZ.ajaz.Services.getSpaceData(d.id,f,e,$.proxy(this.handleData,this))}}},handleData:function(a){if(HZ.lb.Utils.validateData(a),a&&a.results){var b={questions:HZ.data.Questions,imageTags:HZ.data.ImageTags,productTagRecognition:HZ.data.ProductTagRecognition,recommendations:HZ.data.Recommendations,productAds:HZ.data.ProductAds,ppcAds:HZ.data.PPCAds,bannerAds:HZ.data.BannerAds,colorPickerAd:HZ.data.ColorPickerAd,localProsAd:HZ.data.LocalProsAd,houzzImpTracking:HZ.data.HouzzImpTracking,houzzClkTracking:HZ.data.HouzzClkTracking,productInfo:HZ.data.ProductsInfo,listingsInfo:HZ.data.ListingsInfo,spaceToListingIds:HZ.data.SpaceListingIds,colorPaletteSource:HZ.data.ColorPaletteSource,photoRelatedProducts:HZ.data.PhotoRelatedProducts,productsInRoom:HZ.data.ProductsInRoom,reloadData:HZ.data.ReloadData,productReviews:HZ.data.ProductReviews,similarSpaces:HZ.data.SimilarSpaces,coBuySpaces:HZ.data.CoBuySpaces,productCollections:HZ.data.ProductCollections,visuallySimilarSpaces:HZ.data.VisuallySimilarSpaces};for(var c in b){var d=a.results[c];if(d)for(var e in d)b[c].put(e,d[e])}if(a.results.project)for(var e in a.results.project)HZ.data.Projects.get(a.results.project[e].pid)||HZ.data.Projects.put(a.results.project[e].pid,a.results.project[e]);var f=a.results.spaces;if(f)for(var g in f)HZ.data.Spaces.get(g)?HZ.data.Spaces.put(g,$.extend(!0,HZ.data.Spaces.get(g),f[g])):HZ.data.Spaces.put(g,f[g]);if(f=a.results.spaceInfo)for(var g in f){i=HZ.data.Spaces.get(g)||{};var h=f[g];i.b&&(h.b=i.b,void 0!==i.bp&&(h.bp=i.bp),void 0!==i.braw&&(h.braw=i.braw)),HZ.data.Spaces.put(g,h)}this.populateStandardCollections(a);var i=HZ.data.Spaces.get(a.results.sid);i.fullyLoaded=!0,this.owner.handleImageDataChanged()}},loadSpaceBuzz:function(a){this.loadSpaceBuzzCallback=a;var b=this.owner.getCurrentSpace();b.commentsLoaded||HZ.ajaz.Services.getSpaceBuzz(b.id,$.proxy(this.handleBuzzData,this))},handleBuzzData:function(a){if(HZ.lb.Utils.validateData(a),a&&a.results){var b={},c=HZ.data.Spaces.get(a.results.sid);if(c.commentsLoaded=!0,a.results.fbuzzes)for(var d in a.results.fbuzzes)b[d]=b[d]||{},b[d].fg=a.results.fbuzzes[d];if(a.results.ubuzzes)for(var d in a.results.ubuzzes)b[d]=b[d]||{},b[d].ug=a.results.ubuzzes[d];if(b)for(var d in b)HZ.data.Comments.put(d,b[d]);this.populateStandardCollections(a)}this.loadSpaceBuzzCallback()},populateStandardCollections:function(a){var b={images:HZ.data.Images,users:HZ.data.Users,productVariationInfo:HZ.data.Variations};for(var c in b)a.results[c]&&b[c].addAll(a.results[c])}};var lightbox=new HZ.lb.Lightbox;lightbox.init(),lightbox.addPlugin(HZ.lb.plugins.SpaceDataLoader),lightbox.addPlugin(HZ.lb.plugins.ImagePreloader),lightbox.addPlugin(HZ.lb.plugins.ImageViewer),HZ.lb.plugins.ImageViewer.setImageCache(HZ.lb.plugins.ImagePreloader),lightbox.addPlugin(new HZ.lb.plugins.NavigationLayer);

window.hzmr.push("lightbox2.2:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightbox2.2.js  **************/
/************* Start productVariation.js for locale en-US **************/
try {HZ.ns("HZ.productVariation"),HZ.productVariation.Manager=new function(){function a(a){var g=!1;a&&a.results&&a.results.spaceInfo&&(b(a),a&&a.results.productInfo&&a.results.productInfo[f]&&(c(a),a.results.productVariationInfo&&a.results.productVariationInfo[f]&&(d(a),i.updateView(f),h.updateView(f),g=!0))),g||e(_hgt("Error!"),_hgt("The variation selected is invalid, please refresh page and try again"))}function b(a){f=a.results.sid,HZ.data.Spaces.addAll(a.results.spaceInfo),HZ.data.Spaces.addAll(a.results.spaces),HZ.data.Images.addAll(a.results.images),HZ.data.Users.addAll(a.results.users)}function c(a){a.results.productInfo[f];HZ.data.ProductsInfo.addAll(a.results.productInfo),HZ.data.ListingsInfo.addAll(a.results.listingsInfo),HZ.data.SpaceListingIds.addAll(a.results.spaceToListingIds)}function d(a){HZ.data.Variations.addAll(a.results.productVariationInfo)}function e(a,b){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(a,b)}var f,g,h,i,j=!1;this.setSelector=function(a){i=a},this.drawSelectors=function(a){return i.drawView(a)},this.setRenderer=function(a){h=a},this.getRenderer=function(){return h},this.setSpaceId=function(a){f=a},this.setVendorListingId=function(a){g=a},this.getVendorListingId=function(){return g},this.initUI=function(){j||(i.initUI(),j=!0)},this.fetchAvailability=function(b){var c=[],d=i.getSelectedVariations();c.push({id:b,value:d[b]});for(var e in d)e!=b&&c.push({id:e,value:d[e]});var h=5;if(!g){var j=HZ.data.ProductsInfo.get(f);g=j&&j.pover?j.plid:-1}HZ.ajaz.Services.getSpaceByVariations(f,g,c,h,a)}},HZ.productVariation.BoxLinkSelector2=new function(){function a(a){var b=$(this);b.siblings(".selected").removeClass("selected"),b.addClass("selected");var c=b.parents("[variationId]").attr("variationId");HZ.productVariation.Manager.fetchAvailability(c)}function b(a){var b,d,e;if(b=HZ.data.Variations.get(a),b&&(d=b.availVar,e=b.curVar),null==d||0==d.length)return null;for(var f=$('<div class="mp-var-box"></div>'),g=d.length<2,h=0;h<d.length;h++){var i=d[h],j=i.id,k=i.label,l=i.options,m=c(j,k,l,e,g,!1);f.append(m)}return f}function c(a,b,c,g,h,i){var j,k,l,m=g[a],n=HZ.utils.Html.template(d,{ATTRIBUTE_TITLE:b,ATTRIBUTE_VALUE:m}),o=$(n).attr("variationId",a),p=o.find(".variationOptions"),q=0,r=!1;for(q;q<c.length;q++){j=c[q];var s=j.avail,t=j.stock;k=j.name==m,l=$(e),l.html(j.name).attr("optionValue",j.name),s||h||(l.addClass("unavailable").append("<sup>*</sup>"),r=!0),t||l.addClass("outofstock"),k&&l.addClass("selected"),p.append(l)}return r&&!h&&p.append(f),i?o.addClass("collapsed"):o.removeClass("collapsed"),o}var d='<div variationId="" class="form-inline variation">				<div class="variationDisplay">					<label>%ATTRIBUTE_TITLE%</label>					<span class="variation-value"></span>				</div>				<div class="variationOptions"></div>			</div>',e='<a optionValue="" href="javascript:;" class="variationOption"></a>',f='<div class="unavailable-text text-speechless"><sup>*</sup>'+_hgt("Select to show availability in other configurations")+"</div>",g=!0;this.initUI=function(){$(".variationSelectors").on("click",".variationOption",a)},this.setCollapsed=function(a){g=a},this.getSelectedVariations=function(){var a=[];return $("a.variationOption.selected").each(function(){var b=$(this),c=b.parents("[variationId]").attr("variationId"),d=b.attr("optionValue");a[c]=d}),a},this.drawView=function(a){var c=b(a);return c},this.updateView=function(a){var c=HZ.data.Variations.get(a);c.exactMatch===!1?(this.setCollapsed(!1),c.exactMatch=!0):this.setCollapsed(!1);var d=b(a);$(".variationSelectors").empty().append(d)}};

window.hzmr.push("productVariation:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End productVariation.js  **************/
/************* Start productListingInfoRenderer.js for locale en-US **************/
try {HZ.ns("HZ.listingInfo"),HZ.listingInfo.Renderer=new function(){var a,b,c,d,e=3,f=null,g=_hgt("Buy from this Seller"),h=(_hgt("View Return Policy"),_hgt("Visit Store")),i=_hgt("Top Seller"),j=_hgt("Show Additional Sellers"),k=null,l='<li class="listing %SELECTED_CLASS%"><p class="product-price"><span class="text-xl text-bold">%PRICE%</span> <span class="shipping text-gray-lighter text-m">%SHIPPING_COST%</span></p><p class="text-bold">%VENDOR_NAME% <span class="vendor-rate">%VENDOR_RATE%</span></p><p class="lead-time">%LEAD_TIME%</p><p><a class="return-policy text-primary" vendorId="%VENDOR_ID%" hid="%SPACE_ID%" href="javascript:;">%VENDOR_POLICIES%<i class="hzi-font hzi-Arrow-R"></i></a></p><a class="btn btn-primary buy-button" data-listing-id="%LISTING_ID%" data-space-id="%SPACE_ID%" href="javascript:;">'+g+"</a></li>",m='<li class="listing %SELECTED_CLASS%"><p class="text-bold">%VENDOR_NAME%</p><p class="price"><span class="product-price text-xl text-bold">%PRICE%</span></p><a class="btn btn-primary visit-store-button" href="%VISIT_STORE_URL%" target="_blank">%VISIT_MESSAGE%</a></li>',n=0,o=0,p=[],q=[],r=0,s=0,t=0;this.setMountNode=function(a){f=a},this.updateView=function(g,h){var i=HZ.data.ProductsInfo.get(g);k=i?i.plid:-1,n=g,o=h,p=[],q=[];var l=HZ.data.ListingsInfo.get(h),m=l&&l.mpListing,u=HZ.data.SpaceListingIds.get(g)||[];u.forEach(function(a){var b=HZ.data.ListingsInfo.get(a);b&&a!=h&&(b.mpListing?p.push(b):b.ppcUrl&&q.push(b))}),r=p.length,s=q.length,t=r+s;var v,w=r||m?_hgt("Seller and Shipping Information:"):_hgt("Seller Information:");if(f){var x=$(f).empty();if(m){x.append('<h2 class="sectionTitle text-m text-bold">'+w+"</h2>");var y=$('<ul class="list-unstyled listings"></ul>').appendTo(x);y.append(this.renderListing(l,m))}if(t>0){if(r>0&&(v=_hgtp("","Also available from this seller on Houzz:","Also available from these sellers on Houzz:",r),a=$('<h2 class="sectionTitle text-m text-bold mpp collapsed">'+v+"</h2>").appendTo(x),b=$(this.renderListingGroup(p,!0)).appendTo(x),r>e)){var z=$('<button class="btn btn-secondary btn-block">'+j+"</button>").appendTo(x);z.click(function(){b.removeClass("collapsed"),$(this).remove()})}s>0&&(v=_hgtp("","Available from this External Website","Available from {numberOfWebsites} External Websites",s,{numberOfWebsites:s}),c=$('<h2 class="sectionTitle text-m text-bold ppc collapsed">'+v+'<i class="hzi-font hzi-Arrow-R"></i></h2>').appendTo(x),d=$(this.renderListingGroup(q,!1)).appendTo(x),c.click(function(){c.add(d).toggleClass("collapsed")}))}}},this.renderListingGroup=function(a,b){var c;return a&&(c=$('<ul class="list-unstyled listings"></ul>').addClass(b?"mpp":"ppc").addClass("collapsed"),a.forEach(function(a){c.append(this.renderListing(a,b))}.bind(this))),c},this.renderListing=function(a,b){var c;if(a&&(a.avail||k==a.lid)){var d,e=a.lid,f=n,g=HZ.data.Spaces.get(f),j=e==o,p=HZ.data.Users.get(a.vid);if(b){var q=a.fs,r="";r=q?_hgt(" - Free Shipping!"):_hgt("+{shippingCost} Shipping",{shippingCost:a.shpc});var s=a.dv?"":p&&p.topsell?i:"",t=HZ.utils.Links.getSoldByLink(a.vid),u=HZ.utils.Html.template('<a target="_blank" href="%LINK_URL%" title="%TITLE_ATTR%">%LINK_TEXT%</a>',{LINK_URL:t,TITLE_ATTR:"",LINK_TEXT:p?p.d:""}),v=a.dv?"Sold by Houzz":u;d={SELECTED_CLASS:j?"current":"",PRICE:a.p,SHIPPING_COST:r,VENDOR_NAME:v,VENDOR_RATE:s,LEAD_TIME:a.ltime,VENDOR_ID:a.vid,SPACE_ID:n,VENDOR_POLICIES:_hgt("View Return Policy")},c=$(HZ.utils.Html.template(l,d)),c.on("click",".buy-button",{listingId:e,spaceId:f},this.handleBuyClick.bind(this)).on("click",".return-policy",HZ.module.ReturnPolicy.handleReturnPolicyClick)}else d={SELECTED_CLASS:j?"current":"",PRICE:a.p,VENDOR_NAME:p.d,VISIT_STORE_URL:a.ppcUrl?a.ppcUrl:g.tl,VISIT_MESSAGE:j?"":h},c=$(HZ.utils.Html.template(m,d))}return c},this.handleBuyClick=function(a){var b=a.data;HZ.cart.Actions.addItem(b.spaceId,b.listingId,1)}};

window.hzmr.push("productListingInfoRenderer:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End productListingInfoRenderer.js  **************/
/************* Start availabilityNotification.js for locale en-US **************/
try {HZ.ns("HZ.module"),HZ.module.AvailabilityNotification=new function(){function a(a){if(a&&"true"==a.success){var b={tag:"a",attr:{href:HZ.utils.Links.getGalleryLink(a.wishListGalleryId),target:"_blank","class":"colorLink"}},c=HZ.utils.Html.template(g,{TITLE:a.added?_hgt("This product has already been added to your <t1>Wish List</t1> and you'll be emailed when it's back in stock.",{t1:b}):_hgt("We'll email you when this product is back in stock!"),IMG_SRC:HZ.utils.Links.getSpaceImageUrl(a.spaceId,200,200),MESSAGE:a.added?HZ.data.Spaces.get(a.spaceId).t:_hgt("To help you keep track of {productName}, we've added it to your <t1>Wish List</t1>",{productName:HZ.data.Spaces.get(a.spaceId).t,t1:b})});HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(_hgt("We'll let you know"),c)}else HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(d,a.error?a.error:f)}var b,c,d,e=!0,f=_hgt("We're sorry, but an unexpected error has occurred. Please try again later."),g="<div class='row'><div class='col-xs-12 header-6 text-center'>%TITLE%</div></div><div class='row'><div class='col-xs-12 text-center'><img src='%IMG_SRC%'></div></div><div class='row'><div class='col-xs-12 text-center'><p>%MESSAGE%</p></div></div>",h="<button class='btn btn-primary btn-lg btn-block trackMe view-space-buy-main %EXTRA_CLASS%' scopeid='%SCOPE_ID%' compId='availabilityNotification' objId=%SPACE_ID%'>%LABEL%</button>",i="<button class='btn btn-primary btn-lg btn-block view-space-buy-sticky %EXTRA_CLASS%' >%LABEL%</button>";this.setMountNode=function(a){b=a},this.setMountStickyNode=function(a){c=a},this.setABTestValue=function(a){e=a,d=e?_hgt("Notify me when available"):_hgt("Check Availability")},this.updateView=function(e,f,g,j,k){var l,m,n,o;b&&(l=$(b).empty(),n=$(HZ.utils.Html.template(h,{EXTRA_CLASS:k,SCOPE_ID:f,SPACE_ID:e,LABEL:d})),l.append(n),g?n.click(function(){HZ.auth.Manager.signup(j)}):n.click(function(){HZ.ui.yamdi.Common.loading(_hgt("Loading")),HZ.ajaz.Services.Cart.addToWishList(e,a)})),c&&(m=$(c).empty(),o=HZ.utils.Html.template(i,{EXTRA_CLASS:k,LABEL:d}),m.append(o))}};

window.hzmr.push("availabilityNotification:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End availabilityNotification.js  **************/
/************* Start qtySelector.js for locale en-US **************/
try {HZ.ns("HZ.QtySelector"),HZ.QtySelector=function(){function a(a){return a>=48&&57>=a||a>=96&&105>=a}function b(a){var b=[8,9,37,39];return b.indexOf(a)>-1}function c(){this.$container=null,this.$selectContainer=null,this._showMobileDialog=!0}var d=10,e="10+",f=/^0+/,g=/[^0-9]/g,h="fake-dd",i="defVal",j=null;return c.prototype.init=function(a,b){var c=$(a);c.is("select")?(this.$select=c,this.$select.data(i,this.$select.val()),this.$select.on("change.qty",this.handleSelectChange.bind(this))):c.is("input[type=text]")&&(this.$input=c,this.addInputDataAndEvents())},c.prototype.handleSelectChange=function(a){this.$selectContainer||(this.$selectContainer=this.$select.parent(),this.$container=this.$selectContainer.parent());var b;if(this.$select.val()===e){var c=this.buildInput();b=document.activeElement,b.blur(),this.$selectContainer.detach(),this.$container.append(c).css("marginRight",0),this.$input[0].focus()}else this.$select.data(i,this.$select.val())},c.prototype.handleBlur=function(){var a=this.$input.val(),b=this.$input[0].defaultValue;HZ.events&&HZ.events.publish("quantity:stop"),""===a&&(this.$input.val(b?b:d),this.$input.trigger("change"),a=this.$input.val()),"0"!==a&&this.$input.val(a.replace(f,"")),this.$input[0].defaultValue=this.$input.val()},c.prototype.handleFocus=function(a){var b=this.$input;if(HZ.utils.Config.isResponsive&&this._showMobileDialog){var c=parseInt(b.val());if(d>c)return this.prepareDialog(b),a.preventDefault(),!1}window.setTimeout(function(){b.select(),b[0].setSelectionRange(0,9999)}.bind(this),0),HZ.events&&HZ.events.publish("quantity:start")},c.prototype.handleKeydown=function(c){var d=c.which,e=c.isShift;return e||!b(d)&&!a(d)?(c.preventDefault(),!1):("0"===this.$input.val()&&9!==d&&this.$input.val(""),!0)},c.prototype.handlePaste=function(a){window.setTimeout(function(){var a=this.$input.val();this.$input.val(a.replace(g,""))}.bind(this))},c.prototype.buildInput=function(){var a=this.$selectContainer.outerWidth(),b=this.$select.attr("id"),c=this.$select.attr("class"),d=this.$select.data(i),e=$("<input>").attr({type:"text",id:b}).val(d).addClass(c).css({width:a});return e[0].defaultValue=d,this.$input=e,this.addInputDataAndEvents(),e},c.prototype.addInputDataAndEvents=function(){this.$input.on("keydown",this.handleKeydown.bind(this)).on("paste",this.handlePaste.bind(this)).on("focus",this.handleFocus.bind(this)).on("blur",this.handleBlur.bind(this)).attr({maxlength:4,pattern:"\\d*"}),this.$input.val()||this.$input.val(d),HZ.utils.Config.isResponsive&&this.$input.val()<d&&this.$input.addClass(h)},c.prototype.prepareDialog=function(a){var b='<label class="option"><input %CHECKED% type="radio" value="%VAL%" name="%NAME%"><span class="radio-text text-l">%DISPLAY%</span></label>',c=parseInt(a.val());if(!j){var f=[HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"hzConfirmDlgCancelBtn",function(){HZ.ui.Yamdi.hide()})];j=new HZ.ui.yamdi.Dialog,j.init({dialogClassName:"mobileQuantityDlg",controls:f,sidebarMode:"sidebar-skinny"})}for(var g="",i="",k=a.attr("id")+"-rad",l=parseInt(a.data("max-quantity"),10)||d,m=Math.min(l+1,d),n=1;m>n;n++)i=c===n?"checked":"",g+=HZ.utils.Html.template(b,{CHECKED:i,VAL:n,DISPLAY:n,NAME:k});l>=d&&(g+=HZ.utils.Html.template(b,{CHECKED:"",VAL:"10+",DISPLAY:"10+",NAME:k}));var o=function(b){var c=$(b.currentTarget).val(),d=a.data("cart-id"),f=a.data("item-id");if(c===e){var g=a[0].defaultValue;this._showMobileDialog=!1,a.val(g).removeClass(h).focus(),$("html,body").animate({scrollTop:a.offset().top-40}),a.trigger("change")}else a.val(c),HZ.events&&d&&f?HZ.events.publish("cart:update",d,f):a.trigger("change");HZ.ui.Yamdi.hide()},p=function(){var a=j.getBody().find("input[type=radio]"),b=a.filter(":checked");b.focus(),a.on("change.qtySelector",o.bind(this))},q=function(){var a=j.getBody().find("input[type=radio]");a.off(".qtySelector")};j.setTitle(_hgt("Quantity:")),j.setViewLoaded(p.bind(this)),j.setViewUnloaded(q),j.setBody(g),HZ.ui.Yamdi.show(j)},c}();

window.hzmr.push("qtySelector:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End qtySelector.js  **************/
/************* Start lightboxImageTags2.js for locale en-US **************/
try {HZ.lb.plugins.ImageTags2=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=HZ.lb.Config.contentGroupIds.PRODUCTS,C=32,D=4,E=8,F=5,G=18,H=0,I=2,J=3,K=4,L=5,M=6,N=150,O=150,P=75,Q='<span class="image-tags-tag animate"><i class="hzi-font hzi-Tag"></i></span>',R='<span class="image-tags-tag image-tags-tag--visual"><i class="hzi-font hzi-Search"></i></span>',S='<div class="image-tags-tag-bounds"></div>',T='<div class="image-tags-edit"><i class="image-tags-edit-button image-tags-edit-button--check hzi-font hzi-completed-check"></i><i class="image-tags-edit-button image-tags-edit-button--edit hzi-font hzi-Edit"></i><i class="image-tags-edit-button image-tags-edit-button--delete hzi-font hzi-Delete-Comment"></i></div>',U='<li class="image-tag-info image-tag-info-exact"><h2 class="mbm header-6"><a href="%TITLE_LINK%" target="_blank">%TITLE%&nbsp;<span class="more-icon"></span></a></h2><div class="row image-tag-info-content"><div class="col-xs-12"><div class="image-tag-info-product clearfix"><div class="col-xs-5 pl0 pr0"><div class="img-responsive-wrapper img-responsive-square img-main js-thumb"><img class="img-responsive" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div></div><div class="col-xs-7"><h2 class="text-m mtm"><a class="blackLink js-title" href="javascript:;">%PRODUCT_TITLE%</a></h2><p class="mts mbs"><span class="text-bold">%FINAL_PRICE%</span><span class="text-s">%SHIPPING_COST%</span></p><button class="btn btn-primary btn-block med js-buy"><span class="hzi-font hzi-Search text-l"></span> <span class="text-m">%BUY_BUTTON_LABEL%</span></button></div></div></div><div class="col-xs-12 image-tag-related-products mbl mtl"></div></div></li>',V='<li class="image-tag-info image-tag-info-similar"><div class="row image-tag-info-content"><div class="col-xs-12"><div class="image-tag-info-product clearfix"><div class="col-xs-5 pl0 pr0"><div class="img-responsive-wrapper img-responsive-square img-main js-thumb"><img class="img-responsive" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div></div><div class="col-xs-7"><h2 class="text-m mtm"><a class="blackLink js-title" href="javascript:;">%PRODUCT_TITLE%</a></h2><p class="mts mbs"><span class="text-bold">%FINAL_PRICE%</span><span class="text-s">%SHIPPING_COST%</span></p><button class="btn btn-primary med js-buy"><span class="hzi-font hzi-Search text-l"></span> <span class="text-m">%BUY_BUTTON_LABEL%</span></button></div></div></div><div class="col-xs-12 image-tag-related-products mbl mtl"></div></div></li>',W='<li class="image-tag-info image-tag-info-similar image-tag-info-visual"><div class="row image-tag-info-content"><div class="col-xs-12 image-tag-related-products mbl mtl"></div></div></li>',X='<li class="image-tag-info image-tag-info-organic"><div class="row image-tag-info-content"><div class="col-xs-12"><div class="image-tag-info-product clearfix"><div class="col-xs-3"><div class="img-responsive-wrapper img-responsive-square js-thumb"><img class="img-responsive" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div></div><div class="col-xs-9"><h2 class="text-m mtm"><a class="blackLink js-title" href="javascript:;">%PRODUCT_TITLE%</a></h2></div></div></div></div><div class="col-xs-12 image-tag-related-products mbl mtl"></div></li>',Y='<li class="image-tag-info image-tag-info-note text-gray-light"><h2 class="mb0 text-bold"><p class="mb0">%TITLE%</p></h2><div class="row image-tag-info-content"><div class="col-xs-12">%CONTENT%</div></div></li>',Z='<div class="product-tags-info--visually-similar"><header><h2 class="header-3 mb0"><i class="hzi-font hzi-Search header-3 pbs mb0 mt0"></i> %TITLE%</h2><p>%DESC%</p><ul class="list-unstyled list-inline">%BROWSE_LINKS%</ul></header><ul class="list-unstyled image-tag-matches image-tag-matches--similar"></ul></div>',_='<li class="image-tag-related-label"><a href="%LABEL_URL%" class="text-gray-light text-bold" target="_blank">%LABEL_TEXT%</a></li>',aa=!1,ba=HZ.houseUtils.Permissions,ca=_hgt("View Product"),da=_hgt("Delete Tag"),ea=_hgt("Are you sure you want to delete this tag?"),fa=_hgt("Cancel"),ga=_hgt("OK"),ha=_hgt("Visual Match"),ia=_hgt("Similar products available on Houzz");this.setOwner=function(g){a=g,p=!0,b=$('<section class="lbInfoBox product-tags-info"></section>'),a.addInfoBoxToContentGroup(b.get(0),"imageTagsInfo",B),c=$('<div class="product-tags-image-overlay"></div>'),a.addLbImageLayer(c.get(0)),e=$('<div class="product-tags-tags"></div>').appendTo(c),f=$('<div class="product-tags-boxes"></div>').appendTo(c),f.on("mouseenter mouseleave",".image-tags-tag-bounds",this.handleBoundingBoxHover.bind(this)),$(a.getImageDiv()).on("mousemove",$.throttle(10,this.handleBoundingBoxesMouseMove.bind(this))),b.on("mouseenter mouseleave",".image-tag-info-product, .image-tag-info-note, .image-tag-info-visual .image-tag-related-products, .image-tag-info-visual h2",this.handleTagInfoBoxHover.bind(this)),f.on("click",".image-tags-tag-bounds.focused",this.handleBoundingBoxClick.bind(this)),b.on("click",".image-tag-info .js-buy, .image-tag-info .js-title, .image-tag-info .js-thumb",this.handleTagInfoNavClick.bind(this)),b.on("click",".image-tag-related-products .thumb",this.handleTagInfoRelatedClick.bind(this)),b.on("click",".image-tag-info .js-save",this.handleTagInfoSaveClick.bind(this)),d=$('<a class="btn med tint tags-toggler" href="javascript:;" compid="toggleImageTags"><i class="hzi-font hzi-Tag icon" title="'+_hgt("Toggle Image Tags")+'"></i></a>'),a.addActionItem(d,HZ.lb.ActionBar.ACTION_BAR_CENTER,3),d.click(this.handleToggleTagsClick.bind(this)),n={}},this.imageChanged=function(){if(this.setHighlightedTagIndex(null),this.setSelectedTagIndex(null),b.empty(),e.empty(),f.empty(),t={exact:{},similar:{},organic:{},notes:{}},y={},u=[],v=[],w=[],x=[],a.getCurrentSpace().fullyLoaded){A=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-C,D,E),this.calculateImageScale(),aa=ba.hasPermission(a.getCurrentSpace(),ba.CAN_EDIT_IMAGE_TAGS);var c=a.isAdvertiseSpace(),d=a.isProProjectContext();this.iterateTags(function(a,b){var e=a.tid,f=parseInt(a.t);t[e]=b;var g=HZ.data.ProductsInfo.get(a.sid),h=g&&!!g.mp;if(h)switch(f){case I:t.exact[e]=u.length,u.push(a);break;case J:case K:case L:c||d||(t.similar[e]=v.length,v.push(a))}else if(!c)switch(f){case K:d||(t.similar[e]=v.length,v.push(a));break;case H:t.notes[e]=x.length,x.push(a);break;default:f!=M&&this.hasSpaceDataForTag(a)&&(t.organic[e]=w.length,w.push(a))}}.bind(this)),o=HZ.data.ProductTagRecognition.get(a.getCurrentSpace().id),this.renderImageOverlay(),this.renderTaggedProductsInfo(),this.updateToggleTagsButton(),a.isProductAd()&&b.find(".image-tag-matches").addClass("hidden"),m=a.getCurrentSpace().id}},this.hasSpaceDataForTag=function(a){return parseInt(a.sid)>0&&HZ.data.Spaces.get(a.sid)},this.renderImageOverlay=function(){this.iterateTags(function(b){var c=b.tid,d=-1!=Object.keys(t.similar).indexOf(c),g=-1!=Object.keys(t.exact).indexOf(c),h=$(S).data("tag-info",b).appendTo(f);if(a.isMarketPlaceAd())g?(e.append($(Q)),h.on("mouseenter mouseleave",function(a){return a.stopImmediatePropagation(),!1})):h.addClass("invisible");else{var i=d?R:Q;e.append($(i).toggleClass("invisible",d))}if(aa){var j=$(T).appendTo(h);("false"==b["delete"]||b["delete"]===!1)&&j.find(".image-tags-edit-button--delete").remove(),("false"==b.edit||b.edit===!1||("true"==b.edit||b.edit===!0)&&b.t==I)&&j.find(".image-tags-edit-button--edit").remove(),(b.t!=K||b.t==K&&b.sid<=0||"false"==b.edit||b.edit===!1)&&j.find(".image-tags-edit-button--check").remove()}}),this.positionImageOverlay()},this.positionImageOverlay=function(){var b=a.getImageBounds(),d=Math.max(b.w,b.h),g=.15*d,h=.075*d;c.css({width:b.w,height:b.h,top:b.y,left:b.x}),this.iterateTags(function(a,b){var c=e.children().eq(b),d=Math.round(a.x*z)-G,i=Math.round(a.y*z)-F,j=f.children().eq(b),k=a.bounds||{x:parseInt(a.x),y:parseInt(a.y),w:0,h:0},l=k.w*z,m=k.h*z,n=k.x*z-l/2,o=k.y*z-m/2;if(0==k.w||0==k.h){var p=parseInt(a.t),q=p==H,r=q?h:g;l=m=r,n-=(r+G)/2,o-=(r+F)/2}var s={left:Math.round(n),top:Math.round(o),width:Math.round(l),height:Math.round(m)};j.css(s).data("pos-info",s),c.is(".image-tags-tag--visual")&&(d=s.left+s.width/2-c.outerWidth()/2,i=s.top+s.height/2-c.outerHeight()/2),c.css({left:d,top:i})})},this.iterateTags=function(b){var c=HZ.data.ImageTags.get(a.getCurrentSpace().id);c&&c.forEach(b)},this.renderTaggedProductsInfo=function(){a.isMarketPlaceAd()||(u.length&&(h=$('<ul class="list-unstyled image-tag-matches"></ul>').appendTo(b),u.forEach(function(a){var b=HZ.data.Spaces.get(a.sid),c=HZ.utils.Links.getSpaceImageUrl(a.sid,N,N,!0,0,0,8),d=this.getTagTopicLink(a),e=b?b.t:"",f=b?b.price:"";$(HZ.utils.Html.template(U,{TITLE_LINK:d.href,TITLE:d.text,IMG_SRC:c,WIDTH:N,HEIGHT:N,PRODUCT_TITLE:e,FINAL_PRICE:f,BUY_BUTTON_LABEL:ca})).data("tag-info",a).appendTo(h)}.bind(this))),v.length&&(g=$(HZ.utils.Html.template(Z,{TITLE:ha,DESC:ia,BROWSE_LINKS:""})).appendTo(b),i=g.find(".image-tag-matches"),v.forEach(function(a){var b=a.sid;if(b>0){var c=HZ.data.Spaces.get(b),d=HZ.utils.Links.getSpaceImageUrl(b,O,O,!0,0,0,8),e=c?c.t:"",f=c?c.price:"";$(HZ.utils.Html.template(V,{IMG_SRC:d,WIDTH:O,HEIGHT:O,PRODUCT_TITLE:e,FINAL_PRICE:f,BUY_BUTTON_LABEL:ca})).data("tag-info",a).appendTo(i)}else $(HZ.utils.Html.template(W)).data("tag-info",a).appendTo(i)}.bind(this)),g.addClass("hidden")),w.length&&(j=$('<ul class="list-unstyled image-tag-matches image-tag-matches--organic"></ul>').appendTo(b),w.forEach(function(a){var b=HZ.data.Spaces.get(a.sid),c=HZ.utils.Links.getSpaceImageUrl(a.sid,P,P,!0),d=b?b.t:"";$(HZ.utils.Html.template(X,{IMG_SRC:c,WIDTH:P,HEIGHT:P,PRODUCT_TITLE:d})).data("tag-info",a).appendTo(j)}.bind(this))),x.length&&(l=$(HZ.lb.RenderUtils.renderSectionHeader('<i class="hzi-font hzi-image-note image-tag-notes-icon text-l"></i>&nbsp;'+_hgt("Image Notes"))),b.append(l),k=$('<ul class="list-unstyled image-tag-matches image-tag-matches--notes"></ul>').appendTo(b),x.forEach(function(a){var b=a.v||"",c=a.c||"";$(HZ.utils.Html.template(Y,{TITLE:b,CONTENT:c})).data("tag-info",a).appendTo(k)})))},this.handleBoundingBoxHover=function(a){clearTimeout(q);var b=$(a.currentTarget),c=b.data("tag-info").tid,d=t[c];switch(a.type){case"mouseenter":this.setHighlightedTagIndex(d),null==r?(this.setSelectedTagIndex(d),this.showSelectedInfoBox()):r==s?(this.showSelectedBoundingBox(),this.showSelectedInfoBox()):q=setTimeout(function(){this.setSelectedTagIndex(d),this.showSelectedInfoBox()}.bind(this),500);break;case"mouseleave":this.setHighlightedTagIndex(null)}},this.handleTagInfoBoxHover=function(a){var b=$(a.currentTarget),c=b.data("tag-info")?b:b.closest(".image-tag-info"),d=c.data("tag-info"),e=d.tid,f=t[e];switch(a.type){case"mouseenter":this.setHighlightedTagIndex(f),this.setSelectedTagIndex(f),this.showSelectedInfoBoxRecommendations(c,d);break;case"mouseleave":this.setHighlightedTagIndex(null)}},this.setHighlightedTagIndex=function(a){s=a,this.onHighlightedTagIndexChanged()},this.onHighlightedTagIndexChanged=function(){var a=f.children();a.removeClass("focused").css("opacity",""),e.children(".image-tags-tag--visual").addClass("invisible"),null!=s&&(a.eq(s).addClass("focused"),e.children().eq(s).removeClass("invisible"))},this.setSelectedTagIndex=function(a){r=a,this.onSelectedTagIndexChanged()},this.onSelectedTagIndexChanged=function(){this.showSelectedBoundingBox(),this.animateSelectedTag()},this.showSelectedBoundingBox=function(){},this.animateSelectedTag=function(){var a=e.children().eq(r);a.removeClass("animate"),setTimeout(function(){a.addClass("animate")},50)},this.showSelectedInfoBox=function(){if($.isNumeric(r)&&!a.isProductAd()){var b=HZ.data.ImageTags.get(a.getCurrentSpace().id)[r],c=b.tid,d=this.getTagInfoElementByTagIndex(r),e=d&&d.length,f=-1!=Object.keys(t.similar).indexOf(c),h=-1!=Object.keys(t.organic).indexOf(c),m=-1!=Object.keys(t.notes).indexOf(c);if(f?(g.removeClass("hidden"),i.find(".image-tag-info").removeClass("focused")):h?j.find(".image-tag-info").removeClass("focused"):m&&(k.find(".image-tag-info").removeClass("focused"),d.addClass("focused")),k&&k.toggleClass("active",m),e){d.addClass("focused");for(var n=f?g:m?l:d,o=$("#lbInfo").find(".content-scroll").get(0),p=n.position().top,q=n.offsetParent().get(0);q!=o;){var s=$(q);s&&s.position()&&(p+=s.position().top),q=s.offsetParent().get(0)}this.showSelectedInfoBoxRecommendations(d,b);var u=f?16:0;a.animateScrollTo(p+o.scrollTop-u)}}},this.showSelectedInfoBoxRecommendations=function(a,b){a.find(".image-tag-related-products").addClass("hzLoadingDlgThrobber").css({height:"90px"}),this.getSpaceTagsRecognitionData().then(function(){this.expandInfoBoxRecommendations(a,b)}.bind(this))},this.getSpaceTagsRecognitionData=function(){var b,c=a.getCurrentSpace().id;if(n[c])b=n[c];else{o=HZ.data.ProductTagRecognition.get(c);var d=$.Deferred(function(a){if(o)a.resolve();else{var b=[];this.iterateTags(function(a){b.push(a.tid)}),HZ.ajaz.Services.getRecognitionData(c,JSON.stringify(b)).then(function(b){if(b&&"true"==b.success&&b.results){var d=b.results.spaces;if(d){var e=Object.keys(d);e.forEach(function(a){HZ.data.Spaces.get(a)?HZ.data.Spaces.put(a,$.extend(!0,HZ.data.Spaces.get(a),d[a])):HZ.data.Spaces.put(a,d[a])})}var f={images:HZ.data.Images,productTagRecognition:HZ.data.ProductTagRecognition},g=Object.keys(f);g.forEach(function(a){b.results.hasOwnProperty(a)&&f[a].addAll(b.results[a])}),o=HZ.data.ProductTagRecognition.get(c),a.resolve()}else a.fail()})}}.bind(this));b=d.promise(),n[c]=b}return b},this.expandInfoBoxRecommendations=function(a,b){var c=parseInt(b.t,10),d=b.tid,e=null;o&&o[d]&&(e=o[d]);var f=a.find(".image-tag-related-products");if(f.removeClass("hzLoadingDlgThrobber"),e&&c>H){var g=e.labels,h=e.sids,i=0,j=0;if(g&&g.length){var k=f.find(".image-tag-related-labels");0==k.length&&(k=$('<ul class="list-unstyled list-inline image-tag-related-labels"></ul>').appendTo(f),g.forEach(function(a){k.append(HZ.utils.Html.template(_,{LABEL_URL:a.url,LABEL_TEXT:a.text}))})),i=k.outerHeight()}if(h&&h.length){var l=f.find(".thumb-grid");if(0==l.length){var m=y[b.tid]=[],n=A,p=A,q=[];h.forEach(function(a,b){var c=HZ.data.Spaces.get(a),d=HZ.utils.Links.getSpaceLink(a),e=HZ.utils.Links.getSpaceImageUrl(a,n,p),f=HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:c.price});q.push({SPACE_ID:a,INDEX:b,IMG_SRC:e,WIDTH:n,HEIGHT:p,CLICK_URL:d,THUMB_META:f,OVERLAY_TEXT:_hgt("Shop Houzz")}),m.push(a)}),l=$(HZ.lb.RenderUtils.renderThumbGrid(D,q,"related-product",HZ.lb.Templates.PRODUCT_THUMB)),f.append(l)}j=l.outerHeight()}setTimeout(function(){f.css({height:i+j+16+"px"})},1)}},this.handleBoundingBoxesMouseMove=function(b){var c=f.offset(),d=b.pageX-c.left,e=b.pageY-c.top;if(0==f.find(".focused").length){var g=f.children();g.each(function(){var a=$(this),b=a.data("pos-info"),c=b.width/2,f=b.height/2,g=Math.abs(d-(b.left+c)),h=Math.abs(e-(b.top+f)),i=(c+f)/2,j=Math.sqrt(Math.pow(g,2)+Math.pow(h,2)),k=0;k=2*i>j?i/Math.max(i,j):2*i/j-.5,a.css("opacity",k)}),a.registerTimeout("boundingBoxesProximity",function(){f.children().css("opacity","")},1500)}},this.handleTagInfoNavClick=function(){var b=HZ.data.ImageTags.get(a.getCurrentSpace().id)[r],c=HZ.data.Spaces.get(b.sid);this.navigateToTagSpace(c)},this.handleBoundingBoxClick=function(b){var c=$(b.currentTarget),d=c.data("tag-info");if($(b.target).is(".image-tags-edit-button"))this.handleEditTagClick($(b.target),d);else if(a.getExpandedMode()){a.setExpandedMode(!1);var e=$(b.currentTarget),f=e.data("tag-info").tid,g=t[f];this.setSelectedTagIndex(g),this.showSelectedInfoBox()}},this.handleTagInfoRelatedClick=function(a){if(!a.ctrlKey&&!a.metaKey){a.preventDefault();var b=$(a.currentTarget),c=b.attr("s"),d=b.closest(".image-tag-info").data("tag-info"),e=HZ.data.Spaces.get(c),f=y[d.tid];this.navigateToRecommendationsContext(e,f)}},this.handleTagInfoSaveClick=function(b){var c=HZ.data.ImageTags.get(a.getCurrentSpace().id)[r],d=HZ.data.Spaces.get(c.sid);this.saveTagSpaceToIdeabook(d)},this.handleEditTagClick=function(b,c){b.is(".image-tags-edit-button--check")?(b.attr("disabled",!0),HZ.ajaz.Services.ImageTags.updateCheckedImageTag(c).then(this.handleUpdateCheckedTagResponse.bind(this))):b.is(".image-tags-edit-button--edit")?(a.setEditTagId(c.tid),HZ.lb.Utils.lightboxEditorLoaded?(a.setEditTagMode(!0),a.refresh(!1),a.handleResize()):HZ.lb.Utils.loadLightboxEditor(!0,!0)):b.is(".image-tags-edit-button--delete")&&(b.attr("disabled",!0),HZ.ui.yamdi.Common.areYouSure(da,ea,ga,this.deleteTagDialogOKCallback.bind(this,c),fa,this.deleteTagDialogCancelCallback.bind(this,b)))},this.deleteTagDialogOKCallback=function(a){HZ.ajaz.Services.ImageTags.deleteImageTag(a).then(this.handleDeleteTagResponse.bind(this))},this.deleteTagDialogCancelCallback=function(a){a.attr("disabled",!1),HZ.ui.yamdi.Common.hideAllDialogs()},this.handleDeleteTagResponse=function(b){if(b&&b.success&&"true"==b.success){var c=b.imageTagId,d=HZ.data.ImageTags.get(a.getCurrentSpace().id);this.iterateTags(function(a,b){a.tid==c&&d.splice(b,1)}),HZ.ui.yamdi.Common.hideAllDialogs(),a.notifyPlugins("imageDataUpdated"),this.imageChanged()}},this.handleUpdateCheckedTagResponse=function(b){if(b&&b.success&&"true"==b.success){var c=b.imageTagId;HZ.data.ImageTags.get(a.getCurrentSpace().id);this.iterateTags(function(a,d){a.tid==c&&(a.t=b.type)}),a.notifyPlugins("imageDataUpdated"),this.imageChanged()}},this.navigateToTagSpace=function(b){if(b){var c={};c[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=a.getCurrentSpace().id;var d=new HZ.lb.Context("imageTag_"+b.id,HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS,c,[b.id],1,0,-1);d.setCurrentSpaceId(b.id),a.pushContext(d),a.refresh()}},this.navigateToRecommendationsContext=function(b,c){if(b&&c){var d=c.indexOf(b.id),e={};e[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=a.getCurrentSpace().id;var f=new HZ.lb.Context("imageTagRecs_"+b.id,HZ.lb.Config.CONTEXT_TYPE_PRODUCT_TAG_RECOGNITION,e,c,c.length,d+1,-1);f.setCurrentSpaceId(b.id),a.pushContext(f),a.refresh()}},this.saveTagSpaceToIdeabook=function(b){a.isSignupMode()?a.showLoginDialog():(HZ.spaceActions.AddToIdeabookDialog.init(b.id),a.showDialog(HZ.spaceActions.AddToIdeabookDialog))},this.getTagInfoElementByTagIndex=function(b){var c,d=HZ.data.ImageTags.get(a.getCurrentSpace().id)[b],e=d.tid,f=-1!=Object.keys(t.exact).indexOf(e),g=-1!=Object.keys(t.similar).indexOf(e),l=-1!=Object.keys(t.organic).indexOf(e),m=-1!=Object.keys(t.notes).indexOf(e),n=$();return f?(c=t.exact[d.tid],n=h):g?(c=t.similar[d.tid],n=i):l?(c=t.organic[d.tid],n=j):m&&(c=t.notes[d.tid],n=k),n.children().eq(c)},this.getTagTopicLink=function(a){var b={text:"",href:""},c=HZ.data.Spaces.get(a.sid);if(c&&c.brlnk){var d=HZ.data.Categories.getCategoryById(c.cat).name,e=HZ.data.Styles.get(c.s)?HZ.data.Styles.get(c.s)[0]:null;e?(a.t==J?b.text=_hgt("Shop Similar {productStyle} {productCategory}",{productStyle:e,productCategory:d}):b.text=_hgt("Shop {productStyle} {productCategory}",{productStyle:e,productCategory:d}),b.href=c.brlnk.s):(a.t==J?b.text=_hgt("Shop Similar {productCategory}",{productCategory:d}):b.text=_hgt("Shop {productCategory}",{productCategory:d}),b.href=c.brlnk.cat)}return b},this.imageDataUpdated=function(){m!=a.getCurrentSpace().id&&this.imageChanged()},this.imageResized=function(){this.calculateImageScale(),this.positionImageOverlay()},this.handleToggleTagsClick=function(){this.toggleTags()},this.toggleTags=function(){p?this.hideTags():this.unHideTags()},this.unHideTags=function(){p=!0,this.toggleImageOverlay(),this.updateToggleTagsButton()},this.hideTags=function(){p=!1,this.toggleImageOverlay(),this.updateToggleTagsButton()},this.toggleImageOverlay=function(){c.toggleClass("hidden",!p)},this.updateToggleTagsButton=function(){var b=HZ.data.ImageTags.get(a.getCurrentSpace().id),c=b&&b.length,e=!(a.isFile()||a.isProduct()||a.isEditMode());d.removeClass("active unavailable hidden"),e?c?p&&d.addClass("active"):d.addClass("unavailable"):d.addClass("hidden")},this.lightboxModeChanged=function(){a.isColorPicking()?this.hideTags():this.unHideTags()},this.lightboxUnloaded=function(){},this.lightboxScroll=function(){},this.calculateImageScale=function(){var b=a.getCurrentSpace(),c=a.getSpaceImage(b);if(z=1,c){var d=c.w,e=a.getImageBounds();z=e.w/d}}};

window.hzmr.push("lightboxImageTags2:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxImageTags2.js  **************/
/************* Start lightbox2.2AdPlugins.js for locale en-US **************/
try {HZ.lb.plugins.ProductPPCAdInfo=function(){var a,b,c=HZ.lb.Config.contentGroupIds.INFO,d=4,e=8;this.setOwner=function(d){a=d,b=$('<section id="lbPPCAds" class="lbInfoBox ppc-ad separator"></section>')[0],a.addInfoBoxToContentGroup(b,"ppc-ad",c)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=a.getCurrentSpace();$(b).empty(),a.isProduct()&&HZ.lb.plugins.PPCAdInfoRenderer.writeContent(c,b,d,e)}},HZ.lb.plugins.SpacePPCAdInfo=function(){var a,b,c=HZ.lb.Config.contentGroupIds.PRODUCTS,d=4,e=8;this.setOwner=function(d){a=d,b=$('<section id="lbPPCAds" class="lbInfoBox ppc-ad separator"></section>')[0],a.addInfoBoxToContentGroup(b,"ppc-ad",c)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=a.getCurrentSpace();$(b).empty(),a.isProduct()||HZ.lb.plugins.PPCAdInfoRenderer.writeContent(c,b,d,e)}},HZ.lb.plugins.Gtm=new function(){function a(){var a=!1;if(b.isMarketplaceProduct()){var d=HZ.data.ProductsInfo.get(c.id);if(d){var e={hasaccount:HZ.data.CurrentSessionUser?"y":"n",ecomm_prodid:"HZ_"+c.id,ecomm_category:c.cat};c.amtRaw&&c.cuid&&(e.ecomm_pvalue=Math.round(100*c.amtRaw)/100,e.ecomm_currency=HZ.data.Currencies.get(c.cuid)),HZ.utils.Gtm.pushData("view_product","product",e),a=!0}}return a}var b,c,d;this.setOwner=function(a){b=a},this.imageDataUpdated=function(){c=b.getCurrentSpace(),c.id==d&&this.imageChanged()},this.imageChanged=function(){c=b.getCurrentSpace(),d=c.id,a()&&(d=null)}},HZ.lb.plugins.PaidProInfo=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=HZ.lb.Config.contentGroupIds.OVERVIEW,o=32,p=8,q='<header class="sectionHeader row"><p class="sponsored col-xs-12">%SPONSORED%</p><div class="col-xs-12"><div class="%AVATAR_CLASS%">%PRO_AVATAR%</div><div class="%NAME_CLASS%">%PRO_NAME% <div class="pro-rating"><div class="review-rate">%REVIEW_RATING% <span class="review-count" itemprop="ratingCount">%NUM_OF_REVIEWS%</span></div></div></div></div></header><div class="row mbm"><h2 class="header-6 sectionTitle col-xs-12">%PRO_SHORT_DESC%</h2>%COOP_INFO%<a href="%PRO_PORTFOLIO_URL%" target="_blank" class="text-primary col-xs-12">%PORTFOLIO_CTA%<span class="more-icon"></span></a></div>',r='<div class="col-xs-12 mbl"><div class="row pro-coop"><div class="col-xs-2"><a href="%PRO_PORTFOLIO_URL%" target="_blank"><img src="%EMPTY_GIF%" style="background-image: url(%COOP_IMG_SRC%);" width="55" height="55" class="pro-coop-logo" objid="%COOP_BRAND_USER_ID%"></a></div><div class="col-xs-10"><p class="text-gray-light text-s pro-coop-rel"><a href="%PRO_PORTFOLIO_URL%" target="_blank">%COOP_LABEL%</a></p></div></div></div>',s='<section class="lbInfoBox sponsoredSpaceDescription">%HEADER%<div class="row"><p class="col-xs-12 pro-long-desc">%PRO_LONG_DESC%</p>%OFFER%%PRO_CONTACT%<span class="col-xs-12 mbl"><a href="%PRO_PORTFOLIO_URL%" target="_blank" class="btn btn-primary med btn-block"><i class="hzi-font hzi-Ideas-Fill icon"></i> %PROJECTS_CTA%</a></span></div>%THUMB_GRID%</section>',t='<section class="lbInfoBox sponsoredSpaceDescription">%HEADER%<div class="row"><p class="col-xs-12 pro-long-desc">%PRO_LONG_DESC%</p>%OFFER%<span class="col-xs-12 mbl"><button class="btn btn-primary med btn-block pro-contact-cta"><i class="hzi-font hzi-Pro-Fill icon"></i> %CONTACT_CTA%</button></span></div></section>',u='<section class="lbInfoBox sponsoredSpaceDescription">%HEADER%%OFFER%<div class="inline-form-placeholder"></div></section>',v='<ul class="thumb-grid grid-4">%THUMBS%</ul>',w='<div class="row pro-offer pro-offer-pro-plus"><h2 class="header-5 text-bold col-xs-12">%OFFER_DESC% <span class="disclaimer text-nowrap">%OFFER_DISCLAIMER%</span></h2></div>',x='<div class="col-xs-12"><div class="contact text-l text-bold row"><div class="phone-contact %PHONE_CLASS%"><span class="hzi-font hzi-Phone icon"></span>%PRO_PHONE%</div><div class="email-contact %EMAIL_CLASS%"><a href="javascript:;" class="pro-contact-cta"><span class="hzi-font hzi-Email-Small icon"></span>%PRO_EMAIL_CTA%</a></div></div></div>',y='<li><a target="_blank" href="%PRO_PORTFOLIO_URL%"><img src="%IMAGE_URL%" width="%WIDTH%" height="%HEIGHT%"></a></li>',z='<div class="row pro-contact-form"><h2 class="header-6 text-unbold col-xs-12">%FORM_TITLE%</h2> <form action="javascript:;" class="col-xs-12" scopeid="lb_contact_pro_inline" novalidate><fieldset class="row"><div class="form-group col-xs-12"><input type="email" name="email" class="form-control" id="%EMAIL_FIELD_ID%" placeholder="%EMAIL_PLACEHOLDER%" value="%EMAIL_VALUE%" required></div><div class="form-group col-xs-6"><input type="tel" name="phone" class="form-control" id="%PHONE_FIELD_ID%" placeholder="%PHONE_PLACEHOLDER%" required></div><div class="form-group col-xs-6"><input type="text" name="zip" class="form-control" id="%ZIP_FIELD_ID%" placeholder="%ZIP_PLACEHOLDER%" required></div><div class="form-group col-xs-12"><label class="control-label" for="%MESSAGE_FIELD_ID%">%MESSAGE_LABEL%</label><textarea rows="3" name="message" class="form-control" id="%MESSAGE_FIELD_ID%" placeholder="%MESSAGE_PLACEHOLDER%" required></textarea></div><div class="checkbox col-xs-12"><label><input name="disclaimer" type="checkbox" value="" required>%CHECKBOX_LABEL%</label> </div><div class="col-xs-12"><button type="submit" name="submit" compid="lb_contact_pro_inline_submit" class="btn med btn-block btn-primary trackMe"><i class="hzi-font hzi-Pro-Fill icon"></i> %BUTTON_LABEL%</button></div></fieldset></form></div><div class="row done-message"><div class="text-bold text-center col-xs-12"><i class="icon hzi-font hzi-Vote-Circle"></i> %DONE_MESSAGE%</div></div>',A=_hgt("Sponsored"),B=_hgt("View My Portfolio"),C=_hgt("See My Projects"),D=_hgt("Email Us"),E=_hgt("Contact Professional"),F=_hgt("Your Email"),G=_hgt("Enter your contact phone number"),H=_hgt("Enter your zip code"),I=_hgt("Message"),J=_hgt("Tell us a little about your project"),K=_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation."),L=_hgt("Thanks for Submitting");this.setOwner=function(e){switch(a=e,b=$("<div></div>"),c=b.get(0),a.addInfoBoxToContentGroup(c,"sponsoredSpaceDescriptionInfo",n),b.on("click",".pro-contact-cta",this.handleContactProClicked.bind(this)),m=s,j=!0,k=!1,l=!1,HZ.lb.Config.proContactForm){case"dialog":j=!1,k=!0,m=t;break;case"inline":j=!1,l=!0,m=u}j&&(d=$(HZ.utils.Html.template(HZ.lb.Templates.IMAGE_OVERLAY_TEMPLATE,{CTA:_hgt("SEE MY PROJECTS"),COMP_ID:"paid_pro_overlay",CSS_CLASS:"hidden"})).disableSelection(),d.on("click",this.handleVisitProfileClicked.bind(this)),a.addLbImageLayer(d))},this.lightboxLoaded=function(){HZ.data.CurrentSessionUser?(HZ.dialogs.ContactProDialog||(HZ.dialogs.ContactProDialog=new HZ.email.ContactProDialog),f=HZ.dialogs.ContactProDialog,HZ.ajaz.Services.User.getCurrentSessionUserEmail().then(this.handleGetUserEmailResponse.bind(this))):(HZ.dialogs.GuestContactProDialog||(HZ.dialogs.GuestContactProDialog=new HZ.email.GuestContactProDialog),f=HZ.dialogs.GuestContactProDialog)},this.handleGetUserEmailResponse=function(a){"true"==a.success&&a.userEmail&&HZ.data.CurrentSessionUser.setEmailAddress(a.userEmail)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty(),g=a.getCurrentSpace(),h=g.id,i=HZ.data.PaidProAds.get(h);var c,e=g.ow,f=i;if(f&&f.proName&&f.proShortDesc&&f.proLongDesc){var n=f.proProfileLink,r=f.rating,s=f.numReviews,t=f.proShortDesc,u=f.proLongDesc,z=f.proCoverPhotos,F=f.proOffers,G=f.proOffersDisc,H=f.proPhone,I=f.showProEmail,J=f.coopInformation,K=HZ.ui.render.User.getUserImageHtml(e,!0,n,1),L=HZ.ui.render.User.getUserHtml(e,!0,n),M=HZ.ui.render.Rate.getRateStars(r),N=_hgtp("","1 Review","{reviewsCount} Reviews",s,{reviewsCount:s}),O="";"undefined"!=typeof J&&(O=this.renderCoopInfo());var P=[];if(z&&z.length)for(var Q=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-o,4,p),R=Q,S=Q,T=Math.min(z.length,4),U=0;T>U;U++){var V=z[U],W=HZ.utils.Links.getSpaceImageUrl(V,R,S),X=HZ.utils.Html.template(y,{PRO_PORTFOLIO_URL:n,IMAGE_URL:W,WIDTH:R,HEIGHT:S});P.push(X)}var Y=HZ.utils.Html.template(v,{THUMBS:P.join("")});c={SPONSORED:A,PRO_AVATAR:K,PRO_NAME:L,AVATAR_CLASS:"author-avatar",NAME_CLASS:"author-details",REVIEW_RATING:M,NUM_OF_REVIEWS:N,COOP_INFO:O,PRO_SHORT_DESC:t,PRO_PORTFOLIO_URL:n,PORTFOLIO_CTA:B};var Z=HZ.utils.Html.template(q,c);if(F){var _,aa=j&&H?"col-xs-6":"hidden",ba=j&&I?H?"col-xs-6":"col-xs-12":"hidden";c={PHONE_CLASS:aa,EMAIL_CLASS:ba,PRO_PHONE:H||"",PRO_EMAIL_CTA:D},_=$("<div>"+HZ.utils.Html.template(x,c)+"</div>").html(),c={OFFER_DESC:F,OFFER_DISCLAIMER:G};var ca=HZ.utils.Html.template(w,c)}c={HEADER:Z,PRO_LONG_DESC:u,OFFER:ca,PRO_CONTACT:_,PRO_PORTFOLIO_URL:n,PROJECTS_CTA:C,THUMB_GRID:Y},k?c={HEADER:Z,PRO_LONG_DESC:u,OFFER:ca,CONTACT_CTA:E}:l&&(c={HEADER:Z,OFFER:ca}),b.append(HZ.utils.Html.template(m,c)),l&&b.find(".inline-form-placeholder").replaceWith(this.prepareInlineContactForm()),HZ.lb.Utils.registerTrackingUrl(f.impTrkLink,g.id),j&&d.removeClass("hidden").find(".cta").attr("objid",e)}else j&&d.addClass("hidden")},this.renderCoopInfo=function(){var a=i.proProfileLink,b=i.coopInformation,c=$("<div>");return c.append(HZ.utils.Html.template(r,{EMPTY_GIF:HZ.utils.Config.emptyGifData,PRO_PORTFOLIO_URL:a,COOP_IMG_SRC:b.logoFileUrl,COOP_BRAND_USER_ID:b.coopBrandUserId,COOP_LABEL:b.coopText})),c.html()},this.prepareInlineContactForm=function(){var a,b=i,c=_hgt("Contact {proName}",{proName:b.proName}),d=HZ.data.CurrentSessionUser.getEmailAddress()||"",e={FORM_TITLE:c,EMAIL_FIELD_ID:"contactProEmail"+h,EMAIL_PLACEHOLDER:F,EMAIL_VALUE:d,PHONE_FIELD_ID:"contactProPhone"+h,PHONE_PLACEHOLDER:G,ZIP_FIELD_ID:"contactProZip"+h,ZIP_PLACEHOLDER:H,MESSAGE_FIELD_ID:"contactProMessage"+h,MESSAGE_LABEL:I,MESSAGE_PLACEHOLDER:J,CHECKBOX_LABEL:K,BUTTON_LABEL:E,DONE_MESSAGE:L};return a=$(HZ.utils.Html.template(z,e)),a.off("submit change keydown focus blur").on("submit",this.onContactFormSubmit.bind(this)).on("change keydown","input, textarea",this.onContactFormChange.bind(this)).on("focus","input, textarea, button",this.onContactFormFocus.bind(this)).on("blur","input, textarea",this.onContactFormBlur.bind(this)),a},this.onContactFormChange=function(a){var b=$(a.delegateTarget);b.find(".form-field-error").remove(),b.find(".form-group").removeClass("has-error")},this.onContactFormFocus=function(b){e.remove(),a.detachKeyboardHandler()},this.onContactFormBlur=function(b){a.attachKeyboardHandler()},this.onContactFormSubmit=function(b){b.preventDefault();var c=$(b.target),d=c.get(0);if(d.checkValidity()){var e=(HZ.data.Users.get(a.getCurrentSpace().ow).id,i),f=e.proUserName,g=_hgt("Houzz project inquiry"),h=HZ.sendEmail.types.PRO,j=$(d.email).val(),k=$(d.phone).val(),l=$(d.zip).val(),m=$(d.message).val(),n=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:k})+"\n"+_hgt("Project Location: {zipCode}",{zipCode:l})+"\n\n"+_hgt("Sender email: {emailAddress}",{emailAddress:j})+"\n\n"+m;HZ.ajaz.Services.sendEmail(f,g,n,h,null,null,null,null,null,this.onContactFormSubmitResponse.bind(this)),c.find("[name=submit]").attr("disabled",!0)}else for(var o,p=["email","phone","zip","message","disclaimer"],q=p.length,r=0;q>r;r++)if(o=c.find("[name="+p[r]+"]"),!o.get(0).checkValidity()){this.handleFieldValidationError(o);break}},this.onContactFormSubmitResponse=function(a){"true"==a.success?(HZ.ui.yamdi.Common.hideAllDialogs(),b.find(".pro-contact-form").addClass("done"),_gaq.push(["_trackEvent","ContactProDialog","contactSuccess"])):(HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(_hgt("Send message error!"),a.errorMessage),b.find(".pro-contact-form button[name=submit]").attr("disabled",!1))},this.handleFieldValidationError=function(a){var b,c=a.get(0).validity;if(c.valueMissing)switch(a.attr("name")){case"email":b=_hgt("Please enter your email address");break;case"phone":b=_hgt("Please enter your phone number");break;case"zip":b=_hgt("Please enter your zip code");break;case"message":b=_hgt("Please add a short description of your project");break;case"disclaimer":b=HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE}else c.typeMismatch&&(b=HZ.sendEmail.texts.ERROR_INVALID_FROM_EMAIL_ADDRESS);e=$(HZ.utils.Html.template(HZ.lb.Templates.FORM_FIELD_ERROR_TEMPLATE,{MESSAGE:b})),this.showFieldError(a,e)},this.showFieldError=function(a,b){a.closest(".form-group").addClass("has-error"),a.after(b)},this.handleVisitProfileClicked=function(){var a,b=i;b&&b.proName&&b.proShortDesc&&b.proLongDesc&&(a=b.proProfileLink,window.open(a))},this.handleContactProClicked=function(){var b=i;f.prepare({toUserName:b.proUserName,toUserDisplayName:b.proName,subject:_hgt("Houzz project inquiry"),message:""}),f.getSendBtn().attr("compid","lbContactDlgSend"),a.showDialog(f)}},HZ.lb.plugins.LocalProsContact=function(){var a,b,c,d,e,f,g,h,i,j,k,l=HZ.lb.Config.contentGroupIds.OVERVIEW,m=_hgt("Ready to start your project?"),n=_hgt("Contact a Professional"),o=_hgt("Contact a Professional"),p=_hgt("Tell us about your project"),q=_hgt("Select Professionals"),r=_hgt("In this photo"),s=_hgt("Sponsored"),t=_hgt("Your Name"),u=_hgt("Your Email"),v=_hgt("Your Phone Number"),w=_hgt("Your Zip Code"),x=_hgt("Brief description of your project"),y=_hgt("Please select the professionals you wish to contact."),z=["name","email","phone","zip","message"],A='<div class="row"><p class="col-xs-12"><button class="btn btn-primary med btn-block"><i class="hzi-font hzi-Pro-Fill icon"></i> %CONTACT_CTA%</button></p></div>',B='<span class="text-xs text-gray-lightest pull-right">%PRO_ENTRY_LABEL%</span><div class="checkbox" posid="%POS_ID%" objid="%OBJ_ID%"><label><input type="checkbox" value="%PRO_USERNAME%"><div><div class="author-avatar">%AVATAR%</div><div class="author-details"><div class="text-m clearfix">%AUTHOR%</div><div class="pro-type text-gray-light">%PRO_TYPE%</div>%PRO_REVIEWS%<span class="pro-location-text text-nowrap"><i class="hzi-font hzi-location-pin-fill"></i>%PRO_LOCATION%</span></div></div></label></div>',C='<div class="row form-group"><div class="col-xs-6"><input type="text" name="name" class="form-control" placeholder="%NAME_INPUT_PLACEHOLDER%" required></div><div class="col-xs-6"><input type="email" name="email" class="form-control" placeholder="%EMAIL_INPUT_PLACEHOLDER%" required></div></div><div class="row form-group"><div class="col-xs-6"><input type="tel" name="phone" class="form-control" placeholder="%PHONE_INPUT_PLACEHOLDER%" required></div><div class="col-xs-6"><input type="text" name="zip" class="form-control" placeholder="%ZIP_INPUT_PLACEHOLDER%" required></div></div><div class="row form-group"><div class="col-xs-12"><textarea class="form-control" name="message" placeholder="%DESC_INPUT_PLACEHOLDER%" required></textarea></div></div><div class="row"><div class="col-xs-12"><h2 class="header-6 mb0">%PROS_TITLE%</h2></div><div class="col-xs-12 lb-contact-local-pros--local"><ul class="list-unstyled lb-contact-local-pros--list mb0"><li>%FEATURED_PRO_ENTRY%</li>%LOCAL_PRO_ENTRIES%</ul></div></div>';this.setOwner=function(h){a=h,b=$('<section id="lbLocalProsAd" compid="lb_local_pros_ad" class="lbInfoBox separator trackMe"></section>'),a.addInfoBoxToContentGroup(b.get(0),"localProsAd",l),c=$("<div>").appendTo(b),c.append(HZ.lb.RenderUtils.renderSectionHeader(m)),c.append(HZ.utils.Html.template(A,{CONTACT_CTA:n})),b.on("click",".btn-primary",this.handleCtaClick.bind(this)),b.addClass("hidden"),k=HZ.ui.AjaxThrobber.getThrobber(),f=$('<button type="button" class="btn btn-secondary text-s text-bold">'+_hgt("Cancel")+"</button>"),g=$('<button type="submit" class="btn btn-primary text-s text-bold">'+_hgt("Send Message")+"</button>"),d=new HZ.ui.yamdi.Dialog,d.init({dialogClassName:"lb-local-pros-dialog trackMe",formName:"lbContactLocalPros",title:o,controls:[k,f,g]}),e=$(d.getForm()),e.attr("novalidate",!0),e.attr("scopeid","lightbox"),e.attr("compid","lb_local_pros_dialog_form"),e.on("submit",this.handleDialogSubmit.bind(this)),e.on("change keydown focus","input, textarea",this.clearErrorState.bind(this)),e.on("click",".author-avatar",this.handleProAvatarClick.bind(this)),f.click(HZ.ui.Yamdi.hide.bind(HZ.ui.Yamdi,d))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var d=a.getCurrentSpace();if(c.detach(),d.fullyLoaded&&HZ.data.CurrentSessionUser){var e=d.id,f=HZ.data.LocalProsAd.get(e),g=f&&f.uids&&f.uids.length>1,h=d.ow,i=h>0&&HZ.data.Users.get(h)&&"1"==HZ.data.Users.get(h).p;g&&i&&(b.append(c),f.hasOwnProperty("proTrackingUrl")&&HZ.lb.Utils.registerTrackingUrl(f.proTrackingUrl,e),f.hasOwnProperty("impTeaserTrackingUrl")&&HZ.lb.Utils.registerTrackingUrl(f.impTeaserTrackingUrl,e),f.hasOwnProperty("proTeaserTrackingUrl")&&HZ.lb.Utils.registerTrackingUrl(f.proTeaserTrackingUrl,e))}},this.handleCtaClick=function(a){this.showLocalProsContactDialog()},this.showLocalProsContactDialog=function(){var b=a.getCurrentSpace(),c=HZ.data.LocalProsAd.get(b.id),e=HZ.data.HouzzClkTracking.get(b.id),f=a.getCurrentSpace().ow,g=HZ.data.Users.get(f);if(g){var h=e&&e[f]?e[f]:null,i=HZ.ui.render.User.getUserImageHtml(f,!0,"javascript:;",1),j=HZ.ui.render.User.getUserHtml(f,!0,h),k=$(HZ.ui.render.User.getProfessionalLocationHtml(g)).html(),l="";$.isNumeric(g.nr)&&parseInt(g.nr)>0&&(l=HZ.lb.RenderUtils.renderProReview(g));var m=$(HZ.utils.Html.template(B,{POS_ID:0,OBJ_ID:f,PRO_USERNAME:g.n,PRO_ENTRY_LABEL:r,AVATAR:i,AUTHOR:j,PRO_REVIEWS:l,PRO_TYPE:HZ.data.ProfessionalTypes.get(g.pt),PRO_LOCATION:k}));m.find(".pro-location-text").toggleClass("hidden",!(k.length>0));var n=$("<div>").append(m).html()}var o=_hgt("Near {location}",{location:c.loc}),y=$("<div>"),z=c.uids;z.forEach(function(a,b){if(g=HZ.data.Users.get(a)){var d=c[a];h=d.hasOwnProperty("clkTrackingUrl")?d.clkTrackingUrl:null,i=HZ.ui.render.User.getUserImageHtml(a,!0,"javascript:;",1),j=HZ.ui.render.User.getUserHtml(a,!0,h);var e="";$.isNumeric(g.nr)&&parseInt(g.nr)>0&&(e=HZ.lb.RenderUtils.renderProReview(g)),k=o;var f=HZ.utils.Html.template(B,{POS_ID:b+1,OBJ_ID:a,PRO_USERNAME:g.n,PRO_ENTRY_LABEL:s,AVATAR:i,AUTHOR:j,PRO_REVIEWS:e,PRO_TYPE:HZ.data.ProfessionalTypes.get(g.pt),PRO_LOCATION:k});$("<li>").append(f).appendTo(y)}});var A=HZ.utils.Html.template(C,{FORM_TITLE:p,PROS_TITLE:q,FEATURED_PRO_ENTRY:n,LOCAL_PRO_ENTRIES:y.html(),NAME_INPUT_PLACEHOLDER:t,EMAIL_INPUT_PLACEHOLDER:u,PHONE_INPUT_PLACEHOLDER:v,ZIP_INPUT_PLACEHOLDER:w,DESC_INPUT_PLACEHOLDER:x});d.setBody(A),a.showDialog(d),c.hasOwnProperty("impTrackingUrl")&&HZ.lb.Utils.registerTrackingUrl(c.impTrackingUrl,b.id)},this.handleProAvatarClick=function(a){var b=$(a.currentTarget),c=b.closest(".checkbox").find('input[type="checkbox"]');c.prop("checked",!c.prop("checked"))},this.handleDialogSubmit=function(a){a.preventDefault();var b=$(a.target),c=b.get(0);if(i=b.find(":checked"),c.checkValidity())if(0==i.length)d.showStatus(y);else{j=[],i.each(function(a,b){j.push($(b).val())});var e=HZ.sendEmail.types.PRO,f=$(c.name).val(),g=$(c.email).val(),h=$(c.zip).val(),k=$(c.phone).val(),l=$(c.message).val(),m=_hgt("Contact Name: {name}",{name:f})+"\n"+_hgt("Phone Number: {phoneNumber}",{phoneNumber:h})+"\n"+_hgt("Sender email: {emailAddress}",{emailAddress:g})+"\n\n"+_hgt("Sender zip code: {zipCode}",{zipCode:k})+"\n\n"+l;b.find("[type=submit]").attr("disabled",!0),HZ.ui.AjaxThrobber.setInCall(!0),j.forEach(function(a){HZ.ajaz.Services.sendEmail(a,"",m,e,null,null,null,null,null,this.onContactFormSubmitResponse.bind(this,a))}.bind(this))}else for(var n,o=z.length,p=0;o>p;p++)if(n=b.find("[name="+z[p]+"]"),!n.get(0).checkValidity()){this.handleFieldValidationError(n);break}},this.onContactFormSubmitResponse=function(a,b){"true"==b.success?(j.splice(j.indexOf(a),1),j.length||(HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.AjaxThrobber.setInCall(!1),g.attr("disabled",!1),HZ.ui.yamdi.Common.alert("",HZ.sendEmail.texts.CONFIRM_MESSAGE_SENT)),_gaq.push(["_trackEvent","ContactLocalProsDialog","contactSuccess"])):(HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(_hgt("Send message error!"),b.errorMessage),g.attr("disabled",!1),HZ.ui.AjaxThrobber.setInCall(!1))},this.handleFieldValidationError=function(a){var b,c=a.get(0).validity;if(c.valueMissing)switch(a.attr("name")){case"name":b=_hgt("Please enter your name");break;case"email":b=_hgt("Please enter your email address");break;case"phone":b=_hgt("Please enter your phone number");break;case"zip":b=_hgt("Please enter your zip code");break;case"message":b=_hgt("Please add a short description of your project")}else c.typeMismatch&&(b=HZ.sendEmail.texts.ERROR_INVALID_FROM_EMAIL_ADDRESS);h=$(HZ.utils.Html.template(HZ.lb.Templates.FORM_FIELD_ERROR_TEMPLATE,{MESSAGE:b})),this.showFieldError(a,h)},this.showFieldError=function(a,b){a.parent().addClass("has-error"),a.after(b)},this.clearErrorState=function(a){d.hideStatus(),e.find(".has-error").removeClass("has-error"),h&&h.length&&h.remove()}},HZ.lb.plugins.TrackClick=function(){var a;this.setOwner=function(b){a=b},this.lightboxLoaded=function(){var b,c=a.getCurrentSpace();if(c&&HZ.data.HouzzClkTracking.get(c.id)&&(b=HZ.data.HouzzClkTracking.get(c.id))){var d=b[c.id];d&&d.length>0&&HZ.lb.Utils.registerTrackingUrl(d,c.id)}}},HZ.lb.plugins.ProductAdInfo=function(){var a,b,c=HZ.lb.Config.contentGroupIds.OVERVIEW,d=_hgt("Save to ideabook"),e=_hgt("Sponsored"),f=_hgt("Products in this Photo:"),g='<header class="sectionHeader row"><p class="sponsored-badge col-xs-12">%SPONSORED%</p><div class="ad-brand-logo col-xs-12">%BRAND_LOGO%</div>%OFFER%<h2 class="sectionTitle text-l text-bold mbm col-xs-12">%AD_SECTION_TITLE%</h2></header><ul class="thumb-grid grid-1 clearfix"></ul>',h='<li><div class="row"><div class="col-xs-3 thumb" title="%SAVE_MESSAGE%" compid="addToIdeabook"><img src="%IMG_SRC%" class="image" style="%IMG_STYLE%"><a href="javascript:;" class="btn tint save" compid="addToIdeabook"><i class="plus-icon hzi-font hzi-Add-Photo-Button"></i></a></div><div class="col-xs-9"><h3 class="%SPACE_TITLE_CLASS%"><a href="%SPACE_LINK%" target="_blank" rel="nofollow">%SPACE_TITLE%</a></h3><a id="%LINK_ID%" href="%VISIT_STORE_URL%" target="_blank" class="btn btn-primary med">%VISIT_STORE_CTA%<span class="more-icon"></span></a></div></div></li>',i='<h2 class="header-5 text-bold col-xs-12 pro-offer">%OFFER_DESC%</h2>',j=131,k=131;this.setOwner=function(d){a=d,b=$('<section id="lbProductAds" scopeid="lightboxBrandAds" class="lbInfoBox separator productAds trackMe"></section>'),a.addInfoBoxToContentGroup(b.get(0),"productAdInfo",c)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c,l=a.getCurrentSpace(),m=!0,n=[];if(l&&l.fullyLoaded&&HZ.data.ProductAds.get(l.id)&&(c=HZ.data.PhotoAds.get(l.id),c?m=!1:c=HZ.data.ProductAds.get(l.id)),c&&c.products&&c.products.length>0&&!c.mpAd){c.adHtml&&(c.adHtml="<div>"+$(c.adHtml).html()+"</div>");var o=c.buttonText?_hgt(c.buttonText):_hgt("Visit Store"),p=c.products,q=6,r=p.length,s=Math.min(q,r),t=0;p=p.filter(function(a){return t++<s&&!!HZ.data.Spaces.get(a.sid)}),p.forEach(function(a){var b=a.sid,c=HZ.data.Spaces.get(b),e=c.t,f=HZ.utils.Links.getSpaceImageUrl(b,j,k,!1),g=a.tlink,i=a.ptlink,l="pLink_"+b,p={SAVE_MESSAGE:d,IMG_SRC:HZ.utils.Config.emptyGifData,IMG_URL:f,IMG_STYLE:"background-image:url("+f+");",SPACE_TITLE_CLASS:m?"hidden":"",SPACE_LINK:i,SPACE_TITLE:e,VISIT_STORE_URL:g,VISIT_STORE_CTA:o,LINK_ID:l},q=$(HZ.utils.Html.template(h,p));q.on("click",".thumb",b,this.handleProdAddToIdeabookClick.bind(this)),n.push(q)}.bind(this));var u={SPONSORED:m?"":e,BRAND_LOGO:!m&&c.adHtml?c.adHtml:"",AD_SECTION_TITLE:f,OFFER:c.brandAdOffers?HZ.utils.Html.template(i,{OFFER_DESC:c.brandAdOffers}):""};b.append(HZ.utils.Html.template(g,u)),b.find(".thumb-grid").append(n),HZ.lb.Utils.registerTrackingUrl(c.impTrkLink,l.id)}},this.handleProdAddToIdeabookClick=function(b){if(a.isSignupMode())a.showLoginDialog();else{var c=b.data;HZ.spaceActions.AddToIdeabookDialog.init(c),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}},this.lightboxLoaded=function(){var b,c=a.getCurrentSpace();c&&HZ.data.PhotoAds.get(c.id)&&(b=HZ.data.PhotoAds.get(c.id),b.clkTrkLink&&HZ.lb.Utils.registerTrackingUrl(b.clkTrkLink,c.id))}},HZ.lb.plugins.MarketPlaceAds=function(){var a,b,c,d,e=HZ.lb.Config.contentGroupIds.OVERVIEW,f='<li posid="%POS_ID%" objid="%OBJ_ID%" class="%CLASS%"><div class="row"><div class="col-xs-4"><div class="img-responsive-wrapper img-responsive-square"><img class="img-responsive" src="%IMG_SRC%" width="%THUMB_WIDTH%" height="%THUMB_HEIGHT%"/></div></div><div class="col-xs-8"><p><a href="%SPACE_LINK%" target="_blank" rel="nofollow">%SPACE_TITLE%</a></p><p>%BUTTON%</p></div></div></li>',g='<a compid="lb_mp_ad_buy" class="btn btn-primary med"><i class="hzi-font hzi-Buy"></i> %BUTTON_LABEL%</span></a>',h='<a class="btn btn-secondary" disabled><i class="hzi-font hzi-Buy"></i> %BUTTON_LABEL%</span></a>',i=120,j=120,k=_hgt("Buy"),l=_hgt("Sold Out"),m=_hgt("Products in this Photo"),n=_hgt("Related products in this Photo");this.setOwner=function(c){a=c,b=$('<section id="lbProductAds" scopeid="lb_mp_ad" class="lbInfoBox separator mp-ad"></section>'),a.addInfoBoxToContentGroup(b.get(0),"productAdInfo",e),b.on("click",".mp-ad-thumb",this.handleThumbClick.bind(this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){if(b.empty(),c=[],d=[],a.isMarketPlaceAd()){b.append(HZ.lb.RenderUtils.renderSectionHeader(m));var e=a.getCurrentSpace(),g=HZ.data.PhotoAds.get(e.id),h=g.products,i=[];if(h.forEach(function(a,b){var d=HZ.data.Spaces.get(a.sid);c.push(d.id),i.push(this.getThumbReplacementMap(d,b,a))}.bind(this)),b.append(HZ.lb.RenderUtils.renderThumbGrid(1,i,"mp-ad-thumb",f,"lb_mp_ad_products")),g.hasOwnProperty("relatedProductList")){var j=g.relatedProductList;Array.isArray(j)&&j.length>0&&(b.append(HZ.lb.RenderUtils.renderSectionHeader(n)),i=[],j.forEach(function(a,b){var c=HZ.data.Spaces.get(a.id);d.push(c.id),i.push(this.getThumbReplacementMap(c,b))}.bind(this)),b.append(HZ.lb.RenderUtils.renderThumbGrid(1,i,"mp-ad-thumb mp-ad-thumb--related",f,"lb_mp_ad_rel_products")))}g.hasOwnProperty("impTrkLink")&&HZ.lb.Utils.registerTrackingUrl(g.impTrkLink,e.id)}},this.getThumbReplacementMap=function(a,b,c){var d=a.id,e=HZ.data.ProductsInfo.get(d),f={};if(e&&e.mp){var m,n=c&&c.hasOwnProperty("ptlink")?c.ptlink:HZ.utils.Links.getSpaceLink(d),o=e.av,p=a.t,q=HZ.utils.Links.getSpaceImageUrl(d,i,j,!1);m=o?HZ.utils.Html.template(g,{BUTTON_LABEL:k}):HZ.utils.Html.template(h,{BUTTON_LABEL:l}),f={POS_ID:b,OBJ_ID:d,THUMB_WIDTH:i,THUMB_HEIGHT:j,IMG_SRC:q,SPACE_LINK:n,SPACE_TITLE:p,BUTTON:m,SPACE_DESC:a}}return f},this.handleThumbClick=function(b){var e=$(b.currentTarget),f=e.is(".mp-ad-thumb--related"),g=e.data("space-desc").id,h=f?d:c,i={};i[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=g;var j=new HZ.lb.Context("marketPlaceAds_"+g,HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS,i,h,h.length,h.indexOf(g),-1);j.setCurrentSpaceId(g),a.pushContext(j),a.refresh()}};

window.hzmr.push("lightbox2.2AdPlugins:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightbox2.2AdPlugins.js  **************/
/************* Start lightbox2.2Plugins.js for locale en-US **************/
try {HZ.lb.Templates={SECTION_HEADER:'<header class="section-header"><h2 class="text-m text-bold">%TITLE%</h2></header>',THUMB_GRID:'<ul class="clearfix thumb-grid %GRID_CLASS%" %COMP_ID_ATTR%></ul>',SIMPLE_THUMB:'<li s="%SPACE_ID%" objId="%SPACE_ID%" i="%INDEX%" class="thumb %CLASS%"><a href="%CLICK_URL%" target="_blank"><div class="img-responsive-wrapper img-responsive-square"><img class="img-responsive" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div></a></li>',PRODUCT_THUMB:'<li s="%SPACE_ID%" objId="%SPACE_ID%" i="%INDEX%" class="thumb %CLASS%" title="%TITLE_ATTR%"><a href="%CLICK_URL%" target="_blank" class="lb-mpp-thumb"><div class="img-responsive-wrapper img-responsive-square"><img class="img-responsive" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div><div class="thumb-overlay"><div class="thumb-overlay-text">%OVERLAY_TEXT%<span class="more-icon"></span></div></div></a>%THUMB_META%</li>',PPC_THUMB:'<li s="%SPACE_ID%" class="thumb %CLASS%" ><a id="ppc%SPACE_ID%" objid="%SPACE_ID%" href="%CLICK_URL%" class="lb-ppc-thumb" target="_blank" rel="nofollw"><div class="img-responsive-wrapper img-responsive-square"><img class="img-responsive" i="%INDEX%" s="%SPACE_ID%" src="%IMG_SRC%" width="%WIDTH%" height="%HEIGHT%"/></div><div class="thumb-overlay"><div class="thumb-overlay-text">%OVERLAY_TEXT%<span class="more-icon"></span></div></div></a><div class="lb-ppc-info text-bold">%PPC_INFO%</div></li>',THUMB_META_TEMPLATE:'<div class="space-meta"><div class="space-price">%PRICE%</div></div>',PRODUCT_BADGE:'<span class="text-xs text-bold">%BADGE_TEXT%</span>',SPACE_FACET:'<li><a href="javascript:;" class="%CSS_CLASS%">%FACET_TEXT%</a></li>',PRODUCT_SALE_PROMO:'<p><span class="sale-badge">%SALE_BADGE_LABEL%</span><span class="header-5 sale-title">%SALE_LABEL%</span><span class="text-m">%SALE_SELLER%</span></p>',PRODUCT_PRICE:'<span class="product-price">%FINAL_PRICE%</span>&nbsp;<del class="text-m">%STRIKE_TROUGH_PRICE%</del>',SHIPPING_SELLER_INFO:'<span class="text-bold">%SHIPPING_COST%</span>&nbsp;<span class="shipping-info"><a class="colorLink" href="javascript:;">%SHIPPING_LINK_TEXT%<i class="hzi-font hzi-Arrow-R"></i></a></span>',PRODUCT_QUANTITY:'<ul class="list-unstyled list-inline mb0"><li class="text-bold">%QUANTITY_LABEL%</li><li><select id="qtySelector" class="form-control">%QTY_OPTIONS%</select><i></i></li><li>%QTY_COMMENT%</li></ul>',QUANTITY_OPTION:'<option value="%QTY%">%QTY%</option>',MPP_MAIN_BUTTON:'<button class="btn %BS_BTN_CLASS% btn-lg btn-block header-3 ptl pbm %MPP_BTN_CLASS%" scopeid="lbMpProductBuyBox" compid="addToCart" objid="%SPACE_ID%" %DISABLED%><i class="hzi-font hzi-Buy"></i> %LABEL%</button>',PPC_MAIN_BUTTON:'<button class="btn btn-primary btn-lg btn-block header-3 ptl pbm btn-visit-store" scopeid="lbNonMpProductInfoBox" compid="visitStore" objid="%SPACE_ID%"><i class="hzi-font hzi-Buy"></i> %LABEL%</button>',BLANK_LINK:'<a target="_blank" href="%LINK_URL%" title="%TITLE_ATTR%">%LINK_TEXT%</a>',IMAGE_OVERLAY_TEMPLATE:'<div class="image-overlay trackMe %CSS_CLASS%" compid="%COMP_ID%"><div class="shape"></div><div class="cta header-2">%CTA%</div></div>',IDEABOOK_SPACE_COMMENT:'<div class="space-comment clearfix"><div class="col-xs-12"><div class="col-xs-1">%AUTHOR_AVATAR%</div><div class="col-xs-11"><p class="%QUOTE_CLASS% mb0">%COMMENT%</p></div></div></div>',PRO_REVIEW_TEMPLATE:'<div class="pro-rating"><div class="review-rate">%REVIEW_RATING% <span class="review-count" itemprop="ratingCount">%NUM_OF_REVIEWS%</span></div></div>',FORM_FIELD_ERROR_TEMPLATE:'<div class="form-field-error"><span class="outer-tip"></span><span class="inner-tip"></span><span class="message">%MESSAGE%</span></div>'},HZ.lb.RenderUtils={renderSectionHeader:function(a){return $(HZ.utils.Html.template(HZ.lb.Templates.SECTION_HEADER,{TITLE:a}))},renderThumbGrid:function(a,b,c,d,e){var f="",g=["grid-"+a];e&&(f='compid="'+e+'"',g.push("trackMe"));var h=$(HZ.utils.Html.template(HZ.lb.Templates.THUMB_GRID,{GRID_CLASS:g.join(" "),COMP_ID_ATTR:f}));if(Array.isArray(b)){var i=c?c:"";b.forEach(function(a){a.CLASS=i;var b=$(HZ.utils.Html.template(d,a));a.SPACE_DESC&&b.data("space-desc",a.SPACE_DESC),h.append(b)})}return h},renderIdeabookSpaceComment:function(a,b){if(a&&b){var c=$("<div>").append(a.b).html(),d=HZ.ui.render.User.getUserImageHtml(b.au),e=b.featured?"":"text-quoted";return a.b?$(HZ.utils.Html.template(HZ.lb.Templates.IDEABOOK_SPACE_COMMENT,{AUTHOR_AVATAR:d,COMMENT:UIHelper.convertLinksInString(c),QUOTE_CLASS:e})):$}},renderBrowseCategoryLink:function(a){var b=HZ.data.Categories.getCategoryById(a.cat),c=a.brlnk;if(b&&c&&c.cat){var d=HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:c.cat,TITLE_ATTR:_hgt("Browse this Category"),LINK_TEXT:b.name});return $(d).addClass("text-primary")}return""},renderBrowseStyleLink:function(a){var b=HZ.utils.Styles.getStyleName(a.s),c=a.brlnk;if(b&&c&&c.s){var d=HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:c.s,TITLE_ATTR:_hgt("Browse this Style"),LINK_TEXT:b});return $(d).addClass("text-primary")}return""},renderBrowseLocationLink:function(a){var b,c=a.brlnk;if(c&&c.ma){b=a.ma;var d=HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:c.ma,TITLE_ATTR:_hgt("Browse this Location"),LINK_TEXT:b});return $(d).addClass("text-primary")}return a.loc},renderProReview:function(a){var b="";return $.isNumeric(a.r)&&$.isNumeric(a.nr)&&(b=HZ.utils.Html.template(HZ.lb.Templates.PRO_REVIEW_TEMPLATE,{REVIEW_RATING:HZ.ui.render.Rate.getRateStars(a.r),NUM_OF_REVIEWS:_hgtp("","1 Review","{reviewsCount} Reviews",a.nr,{reviewsCount:a.nr})})),b}},HZ.lb.plugins.ContentTabs=function(){var a,b,c,d,e,f,g,h,i,j='<li data-group-id="%GROUP_ID%" class="content-group-tab %GROUP_ID%" objid="%OBJ_ID%"><i class="icon hzi-font %ICON_CLASS%"></i></li>';this.setOwner=function(f){a=f,c=a.getContentTabsNode(),b=a.getInfoElement(),d=HZ.lb.Config.spaceContentGroupIds,e=HZ.lb.Config.productContentGroupIds},this.lightboxLoaded=function(){this.contentGroupsChanged()},this.contentGroupsChanged=function(){var b=c.empty();b.on("click.lightbox",".content-group-tab:not(.current):not(.disabled)",this.handleTabClick.bind(this));var f=[{type:"space",tabs:d,compId:"space_tabs"},{type:"product",tabs:e,compId:"product_tabs"}];f.forEach(function(c){var d=c.type,e=c.tabs,f=c.compId;h=$("<ul class='list-unstyled content-group-tabs trackMe'></ul>").attr("compid",f).addClass(d).appendTo(b).disableSelection(),e.forEach(function(b){var c=a.getContentGroupById(b),d={GROUP_ID:c.id,ICON_CLASS:c.iconClass,OBJ_ID:c.id+"_tab"},e=$(HZ.utils.Html.template(j,d));h.append(e)})}),this.activateCurrentTab()},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var b=!!HZ.data.ColorPickerAd.get(a.getCurrentSpace().id),d=c.find(".content-group-tab."+HZ.lb.Config.contentGroupIds.COLOR_PICKER);d.toggleClass("hidden",!b),this.activateCurrentTab()},this.pluginAfterShown=function(){clearTimeout(f),f=setTimeout(this.disableEmptyTabs.bind(this),5)},this.lightboxScroll=function(){var b=a.getContentBox(),c=b.h/4,d=this.getCurrentTabIds().slice(0).reverse(),e=a.getContentGroupPositions(),f=d.length-1,h=0,j=a.getContentScrollTop();j>0&&d.forEach(function(a,b){var d=e[a].top-j,g=e[a].bottom-j;(d>0&&c>d||0>d&&g>c)&&(h=Math.max(f-b,h))}),i||a.registerTimeout("currentGroupIndexDebounce",function(){h=$.isNumeric(g)?g:h,a.setCurrentContentGroupIndex(h),g=null}.bind(this),20)},this.currentContentGroupChanged=function(){this.activateCurrentTab()},this.activateCurrentTab=function(){var b=a.getCurrentContentGroupIndex(),c=this.getCurrentTabsNode(),d=c.find(".content-group-tab").removeClass("current"),e=d.eq(b);e.addClass("current")},this.disableEmptyTabs=function(){var b=this.getCurrentTabIds(),c=this.getCurrentTabsNode(),d=c.find(".content-group-tab").removeClass("disabled"),e=this.hasVisibleContent;b.forEach(function(b,c){var f=a.getNodeByContentGroupId(b);f.removeClass("no-content");var g=e(f);g||($(d.get(c)).addClass("disabled"),f.addClass("no-content"))})},this.handleTabClick=function(b){var c=$(b.currentTarget).data("group-id");c==HZ.lb.Config.contentGroupIds.COLOR_PICKER&&a.enterColorPickerMode();var d=this.getCurrentTabIds();g=d.indexOf(c),a.setCurrentContentGroupIndex(g),this.focusCurrentContentGroup()},this.focusCurrentContentGroup=function(){b.find(".lbInfoBox").removeClass("scrolling scrolled");var c=a.getCurrentContentGroupIndex(),d=this.getContentGroupId(c),e=a.getContentGroupPositions()[d];if(e){var f=a.getNodeByContentGroupId(d),g=f.find(".lbInfoBox").addClass("scrolling");i=!0,a.animateScrollTo(e.top,function(){i=!1,g.removeClass("scrolling").addClass("scrolled")}.bind(this))}},this.getContentGroupId=function(a){var b=this.getCurrentTabIds();return b[a]},this.getCurrentTabIds=function(){var b=a.getLbType();return b==a.SPACE_TYPE?d:e},this.getCurrentTabsNode=function(){var b=a.getLbType();return c.find("."+b)},this.hasVisibleContent=function(a){var b=a.children(),c=!1;return b.each(function(){var a=$(this),b=a.hasClass("hidden"),d=a.is(":empty");return d||b?void(c=!1):(c=!0,!1)}),c}},HZ.lb.plugins.SpaceAuthorInfo=function(){var a,b,c,d,e,f=HZ.lb.Config.contentGroupIds.OVERVIEW,g='<div class="col-xs-12"><div class="author-avatar">%AVATAR%</div><div class="author-details">%AUTHOR% %PRO_REVIEWS%%LOCATION%</div></div>';this.setOwner=function(b){a=b,c=$('<section class="space-owner"></section>'),d=$('<section class="space-owner"></section>'),a.addInfoBoxToContentGroup(c.get(0),"spaceAuthorInfo",f),a.addFixedContent(d.get(0),"spaceAuthorInfo")},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){c.empty(),d.empty(),e=0,b=a.getCurrentSpace();var f,h=b.ow,i=HZ.data.Users.get(h);if(i){f=$('<div compid="photoOwner" class="row"></div>');var j=HZ.data.HouzzClkTracking.get(b.id),k=j&&j[h]?j[h]:null,l=HZ.ui.render.User.getUserImageHtml(h,!0,k,1),m=HZ.ui.render.User.getUserHtml(h,!0,k),n=!!parseInt(i.nr,10),o="",p="";n?o=HZ.lb.RenderUtils.renderProReview(i):p=HZ.ui.render.User.getProfessionalLocationHtml(i);var q={AVATAR:$("<div>").append($(l).addClass("trackMe")).html(),AUTHOR:$("<div>").append($(m).addClass("trackMe")).html(),LOCATION:p,PRO_REVIEWS:o};f.append($(HZ.utils.Html.template(g,q)))}f&&(c.append(f),d.append(f.clone()),e=c.outerHeight())},this.lightboxScroll=function(){var b=a.getContentGroupPositions(),c=b[HZ.lb.Config.contentGroupIds.PRODUCTS].top,f=Math.min(Math.max(0,a.getContentScrollTop()-c),e),g=a.getContentMask();g.css({bottom:f-1}),d.css({top:-f}),a.handleContentResize()}},HZ.lb.plugins.SpaceInfo=function(){function a(a,b){return $.each(b,function(b,c){var d=$("<li>").append(c);a.append(d)}),a}var b,c,d=HZ.lb.Config.contentGroupIds.OVERVIEW,e='<ul class="space-facets"></ul>',f='<header>							<h2 class="header-5 mbs">%TITLE%</h2>						</header>',g='<a class="pro-ext-link text-primary" target="blank" href="%WEBSITE_URL%">%LINK_TEXT%<span class="more-icon"></span></a>';this.setOwner=function(a){b=a,c=$('<section id="lbSpaceInfo" class="lbInfoBox separator space-info trackMe"></section>'),c.toggleClass("separator",!HZ.lb.Config.tuckProjectSpaces),b.addInfoBoxToContentGroup(c.get(0),"spaceInfo",d)},this.imageChanged=function(){if(c.empty(),!b.isProduct()&&!b.isFullPageAd()){var d=b.getCurrentSpace(),h=b.getContext(),i=h.getType(),j=h.getDescriptor(),k=k?k.empty():$(e),l={tag:"a",attr:{href:HZ.utils.Links.getSpaceLinkWithSEO(d.id),target:"_blank","class":"hz-space"}},m=HZ.data.Galleries.get(j[HZ.lb.Config.DESCRIPTOR_FIELD_GALLERY_ID]),n=HZ.data.Projects.get(d.pid),o=m&&i==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK,p=n&&i==HZ.lb.Config.CONTEXT_TYPE_PROJECT,q=d.t?d.t:p?n.t:o?m.t:"",r=_hgt("<t1>{spaceTitle}</t1>",{t1:o?{}:l,spaceTitle:q}),s=HZ.utils.Html.template(f,{TITLE:r});c.append(s);var t,u=[],v=HZ.lb.RenderUtils.renderBrowseStyleLink(d);v&&u.push(v);var w=HZ.lb.RenderUtils.renderBrowseLocationLink(d);if(w&&u.push(w),d.l&&d.tl){var x=_hgt("Website"),y=HZ.utils.Html.template(g,{WEBSITE_URL:d.tl,LINK_TEXT:x});u.push(y)}u.length&&(t=a(k,u),c.append(t));var z=b.getSpaceDescription();if(z){var A=$("<div>").append(UIHelper.convertLinksInString(z)).html(),B=$("<p class='space-description'></p>").append(A);c.append(B),B.peekable()}o&&c.append(HZ.lb.RenderUtils.renderIdeabookSpaceComment(d,m))}},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.SpaceActions=new function(){var a,b,c,d,e='<button class="btn btn-primary med save" title="%TITLE_ATTR%"  compId="addToIdeabook"><i class="icon hzi-font hzi-Add-Photo-Button"></i>%LABEL%</button>',f='<button class="btn med tint email" title="%TITLE_ATTR%" compId="sendEmail"><i class="icon hzi-font hzi-Email"></i> %LABEL%</button>',g='<button class="btn med tint download-file" title="%TITLE_ATTR%" compId="download_file"><i class="icon hzi-font hzi-Download-Lightbox"></i> %LABEL%</button>';this.setOwner=function(h){a=h,d=$(HZ.utils.Html.template(g,{TITLE_ATTR:_hgt("Download this file"),LABEL:_hgt("Download")})),d.click(this.handleDownload.bind(this));var i=d.get(0);a.addActionItem(i,HZ.lb.ActionBar.ACTION_BAR_LEFT),b=$(HZ.utils.Html.template(e,{TITLE_ATTR:_hgt("Save To Ideabook"),LABEL:_hgt("Save")})),b.click(this.handleAddToIdeabook.bind(this)),c=b.find(".buzz-count");var j=b.get(0);a.addActionItem(j,HZ.lb.ActionBar.ACTION_BAR_CENTER);var k=_hgt("Email{contextEmailVerb}",{contextEmailVerb:""}),l=$(HZ.utils.Html.template(f,{TITLE_ATTR:k,LABEL:k}));l.click(this.handleEmail.bind(this));var m=l.get(0);a.addActionItem(m,HZ.lb.ActionBar.ACTION_BAR_CENTER)},this.imageChanged=function(){setTimeout(a.hideSpaceActions.bind(a),2500);var b=a.getCurrentSpace(),c=b&&b.ift;d.toggleClass("hidden",!c)},this.handleAddToIdeabook=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getContext().getCurrentSpaceId();HZ.spaceActions.AddToIdeabookDialog.init(b),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}},this.handleEmail=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getCurrentSpace();HZ.dialogs.EmailDialog.prepare({type:HZ.sendEmail.types.SPACE,referenceId:b.id,subject:b.t,message:b.prod?HZ.sendEmail.texts.DEFAULT_MESSAGE_PRODUCT:HZ.sendEmail.texts.DEFAULT_MESSAGE_SPACE}),a.showDialog(HZ.dialogs.EmailDialog)}},this.handleEmbed=function(){var b=a.getCurrentSpace();HZ.spaceActions.EmbedDialog.setSpaceId(b.id),a.showDialog(HZ.spaceActions.EmbedDialog)},this.handleEdit=function(){var b=a.getCurrentSpace();if(b)if(a.lightboxEditorEnabled){var c=HZ.houseUtils.Permissions,d=c.hasPermission(b,c.CAN_EDIT_HOUSE);if(!d)return!1;0==HZ.lb.Utils.lightboxEditorLoaded?HZ.lb.Utils.loadLightboxEditor(!0,!1):(a.setEditMode(!0),a.refresh(!1),a.handleResize())}else{var e=HZ.utils.Links.getEditSpaceLink(b.id);window.open(e)}},this.handleImageTag=function(){var b=a.getCurrentSpace();if(b)if(a.lightboxEditorEnabled){var c=HZ.houseUtils.Permissions,d=c.hasPermission(b,c.CAN_EDIT_HOUSE);if(!d)return!1;0==HZ.lb.Utils.lightboxEditorLoaded?HZ.lb.Utils.loadLightboxEditor(!0,!0):(a.setEditTagMode(!0),a.refresh(!1),a.handleResize())}else{var e=HZ.utils.Links.getEditSpaceLink(b.id);window.open(e)}},this.handlePrint=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getCurrentSpace(),c=UIHelper.isMSIE;HZ.utils.Print.printSpace(b.id,c)}},this.handleDownload=function(){var b=a.getCurrentSpace();b&&b.ift&&HZ.ajaz.Services.getDownloadUrl(b.id,function(a){window.location.href=a.dl})},this.handleAddToCart=function(){var b=a.getCurrentSpace(),c=HZ.data.ListingsInfo.get(a.getSelectedListingId()),d=c.lid,e=$("#qtySelector").val()||1;HZ.cart.Actions.addItem(b.id,d,e)},this.handleVisitStoreClicked=function(){var b=a.getCurrentSpace(),c=b.tl,d=HZ.utils.Links.getSpaceLink(b.id),e=HZ.data.PPCAds.get(b.id),f=HZ.lb.Config.SIGNUP_TRACKING_LB_VISIT_STORE;e&&e.isPPCProduct&&e.ppcProductUrl?(c=e.ppcProductUrl,window.open(c)):c&&(a.isSignupMode()?HZ.auth.Manager.signup(f,HZ.lb.Config.SIGNUP_MSG_PRODUCT_INFO,d,null,{rvent:HZ.lb.Config.SIGNUP_TRACKING_VISIT_STORE_CLICKS}):window.open(c))}},HZ.lb.plugins.ProjectInfo=function(){var a,b,c,d,e,f=6,g=HZ.lb.Config.contentGroupIds.OVERVIEW,h=32,i=8;this.setOwner=function(f){a=f,b=$('<section compid="lbProjectPhotos" class="lbInfoBox photosInProject separator"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"projectInfo",g),d=5,e=5,$(c).on("click","li",this.handleProjectInfoDivClicked)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c,g,j=a.getCurrentSpace(),k=a.getCurrentSpaceProject();if(c=k?k.count:0,g=c?c-1:0,b.empty(),a.isRecommendationsContext()||a.isFullPageAd()||a.isEditMode()||a.isProjectContext());else if(k&&k.sids&&k.sids.length>1){var l={tag:"a",attr:{href:k.link,"class":"text-primary",target:"_blank"}},m=0,n=k.t;HZ.lb.Config.tuckProjectSpaces&&(n=k.t==j.t?_hgt("this Project"):k.t);for(var o=_hgtp("<t1>{projectTitle}</t1>","Other Photo in <t1>{projectTitle}</t1>","Other Photos in <t1>{projectTitle}</t1>",g,{t1:l,projectTitle:n,photoCount:c-1}),p=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-h,e,i),q=p,r=p,s=[],t=k.sids,u=Math.min(e,t.length),v=0;u>v;v++){var w=t[v],x=HZ.data.Spaces.get(w);if(w!=j.id){if(!(x&&f>m))break;var y=HZ.utils.Links.getSpaceImageUrl(w,q,r,x.bg),z=HZ.utils.Links.getSpaceLink(w);s.push({SPACE_ID:w,INDEX:m,IMG_SRC:y,WIDTH:q,HEIGHT:r,CLICK_URL:z}),m++}else u+=1}var A=$(HZ.lb.RenderUtils.renderSectionHeader(o));HZ.lb.Config.tuckProjectSpaces&&A.removeClass("section-header").addClass("mbm"),b.append(A),b.append(HZ.lb.RenderUtils.renderThumbGrid(d,s,"",HZ.lb.Templates.SIMPLE_THUMB))}},this.handleProjectInfoDivClicked=function(b){if(!b.ctrlKey&&!b.metaKey){b.preventDefault();var c=$(b.currentTarget);if(c.attr("s")){var d=c.attr("s"),e=c.attr("i"),g=a.getCurrentSpace(),h=HZ.data.Projects.get(g.pid);if(e>f&&(e=0),h){var i={};i[HZ.lb.Config.DESCRIPTOR_FIELD_PROJECT_ID]=h.pid,i[HZ.lb.Config.DESCRIPTOR_FIELD_CATEGORY]=a.getCurrentSpace().cat;var j=new HZ.lb.Context("project_"+h.pid,HZ.lb.Config.CONTEXT_TYPE_PROJECT,i,h.sids,h.count,e+1,h.sids.length);j.setCurrentSpaceId(d),a.pushContext(j),a.refresh()}}}}},HZ.lb.plugins.ProductsInRoom=function(){var a,b,c,d,e=HZ.lb.Config.contentGroupIds.INFO,f=5,g=5,h=_hgt("Photos with this (or similar) product:"),i=32,j=8;this.setOwner=function(d){a=d,b=$('<section compId="lbProductsInRoom" class="trackMe lbInfoBox productsInRoom separator"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"productsInRoom",e),$(c).click(this.handleProductsInRoomDivClicked)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=a.getCurrentSpace(),e=a.isRecommendationsContext()||a.isFullPageAd();if(d=HZ.data.ProductsInRoom.get(c.id),b.empty(),a.isProduct()&&!e){var k=a.getContextStack(),l=null;k.length>=2&&(l=k[1].getCurrentSpaceId());var m=0;if(d&&d.count>1){for(var n=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-i,f,j),o=n,p=n,q=[],r=d.sids,s=r.length,t=0;s>t;t++)if(g>m){var u=r[t];if(u!=l){var v=HZ.utils.Links.getSpaceImageUrl(u,o,p),w=HZ.utils.Links.getSpaceLink(u);q.push({SPACE_ID:u,INDEX:m,IMG_SRC:v,WIDTH:o,HEIGHT:p,CLICK_URL:w}),m++}}m&&(b.append(HZ.lb.RenderUtils.renderSectionHeader(h)),b.append(HZ.lb.RenderUtils.renderThumbGrid(f,q,"products-in-room",HZ.lb.Templates.SIMPLE_THUMB)))}}},this.handleProductsInRoomDivClicked=function(b){if(!(b.ctrlKey||b.metaKey||HZ.lb.Config.isViewSpace)){b.preventDefault();var c=a.getCurrentSpace(),e=$(b.target);if(e.attr("s")||(e=e.closest("li")),e.attr("s")&&d.count>1){var f=parseInt(e.attr("s")),g=parseInt(e.attr("i")),h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=c.id;var i=new HZ.lb.Context("productsInRoom_"+c.id,HZ.lb.Config.CONTEXT_TYPE_PRODUCTS_IN_ROOM,h,d.sids,d.count,g+1,-1);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.ProductRelatedProducts=function(){var a,b,c,d=4,e=16,f=HZ.lb.Config.contentGroupIds.INFO;this.setOwner=function(d){a=d,b=$('<section class="lbInfoBox product-rel-prod separator trackMe" compId="lbProductRelatedProducts"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"productRelatedProducts",f),b.click(HZ.lb.plugins.PhotoRelatedProducts.handleClick)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=a.isRecommendationsContext()||a.isFullPageAd();a.isProduct()&&!c&&(HZ.lb.plugins.PhotoRelatedProducts.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRelatedProducts.canRender()&&b.append(HZ.lb.plugins.PhotoRelatedProducts.generateContent(d,e,!0))}},HZ.lb.plugins.SpaceRelatedProducts=function(){var a,b,c,d=HZ.lb.Config.isViewSpace||HZ.lb.Config.promotePhotoRelatedProd?HZ.lb.Config.contentGroupIds.OVERVIEW:HZ.lb.Config.contentGroupIds.PRODUCTS,e=4,f=8;this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox space-rel-prod separator trackMe" compId="lbSpaceRelatedProducts"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"spaceRelatedProducts",d),b.click(HZ.lb.plugins.PhotoRelatedProducts.handleClick)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=!(a.isRecommendationsContext()||a.isFullPageAd()||a.isPalette()||a.isProductAd());!a.isProduct()&&c&&(HZ.lb.plugins.PhotoRelatedProducts.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRelatedProducts.canRender()&&b.append(HZ.lb.plugins.PhotoRelatedProducts.generateContent(e,f,!0))}},HZ.lb.plugins.PhotoRelatedProducts=new function(){var a,b,c,d=!1,e=32,f=8;this.setOwner=function(b){a=b},this.setPhotoData=function(){b=a.getCurrentSpace(),c=HZ.data.PhotoRelatedProducts.get(b.id),d=!1},this.isDataLoaded=function(){return c&&c.count>1},this.canRender=function(){return this.isDataLoaded()&&!this.isRendered()},this.isRendered=function(){return d},this.generateContent=function(b,g,h){var i=0,j=$("<div></div>");if(this.isDataLoaded()){var k=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-e,b,f),l=k,m=k;j.append(HZ.lb.RenderUtils.renderSectionHeader(_hgt("Related Products")));for(var n=[],o=c.sids,p=Math.min(o.length,g),q=0;p>q;q++){var r=c.sids[q],s=HZ.data.Spaces.get(r),t=s.price,u=HZ.utils.Links.getSpaceImageUrl(r,l,m),v=HZ.utils.Links.getSpaceLink(r),w=h?HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:t}):"";n.push({SPACE_ID:r,INDEX:i,IMG_SRC:u,WIDTH:l,HEIGHT:m,CLICK_URL:v,THUMB_META:w,OVERLAY_TEXT:_hgt("Shop Houzz")})}j.append(HZ.lb.RenderUtils.renderThumbGrid(b,n,"related-product",HZ.lb.Templates.PRODUCT_THUMB)),d=!0}return j.html()},this.handleClick=function(d){if(!(d.ctrlKey||d.metaKey||HZ.lb.Config.isViewSpace)){d.preventDefault();var e=$(d.target);if(e.attr("s")||(e=e.closest("li")),e.attr("s")&&c.count>1){var f=parseInt(e.attr("s")),g=parseInt(e.attr("i")),h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=b.id;var i=new HZ.lb.Context("photoRelatedProducts_"+b.id,HZ.lb.Config.CONTEXT_TYPE_PHOTO_RELATED_PRODUCTS,h,c.sids,c.count,g+1,-1);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.CoBuyProducts=function(){var a,b,c,d,e=HZ.lb.Config.contentGroupIds.INFO,f=4,g=4,h=32,i=8;this.setOwner=function(d){a=d,b=$('<section class="lbInfoBox cobuy-prod separator trackMe" compId="lbCoBuyProducts"></section>'),c=$(HZ.lb.RenderUtils.renderSectionHeader(_hgt("Frequently Bought Together"))),a.addInfoBoxToContentGroup(b.get(0),"coBuyProducts",e),b.on("click",".thumb",this.handleThumbClick.bind(this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){d={},b.empty();var c=a.isMarketplaceProduct()&&!(a.isRecommendationsContext()||a.isFullPageAd()||a.isPalette()||a.isProductAd()),e=HZ.data.CoBuySpaces.get(a.getCurrentSpace().id),f=e&&e.length;f&&c&&this.renderContent()},this.renderContent=function(){b.empty().append(c);var e=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-h,f,i),g=e,j=e,k=[];this.iterateCoBuySpaces(function(a,b){var c=HZ.data.Spaces.get(a);if(c){d[a]=b;var e=HZ.utils.Links.getSpaceImageUrl(a,g,j),f=HZ.utils.Links.getSpaceLink(a),h=$(HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:c.price||"&nbsp;"})),i=$(HZ.lb.RenderUtils.renderBrowseCategoryLink(c)).addClass("space-cat-link"),l=$('<div class="space-cat"></div>');l.append(i),h.append(l);var m=$("<div></div>").append(h).html();k.push({SPACE_ID:a,INDEX:b,IMG_SRC:e,WIDTH:g,HEIGHT:j,CLICK_URL:f,THUMB_META:m,OVERLAY_TEXT:_hgt("Shop Houzz"),SPACE_DESC:c})}}),b.append(HZ.lb.RenderUtils.renderThumbGrid(f,k,"related-product related-product-cobuy",HZ.lb.Templates.PRODUCT_THUMB))},this.iterateCoBuySpaces=function(b){var c=HZ.data.CoBuySpaces.get(a.getCurrentSpace().id);c=c.slice(0,g),c.forEach(b)},this.handleThumbClick=function(b){if(!(b.ctrlKey||b.metaKey||$(b.target).is(".space-cat-link")||HZ.lb.Config.isViewSpace)){b.preventDefault();var c=HZ.data.CoBuySpaces.get(a.getCurrentSpace().id),e=$(b.currentTarget),f=e.data("space-desc"),g=f.id,h=d[g],i={};i[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=g;var j=new HZ.lb.Context("photoRelatedProducts_"+g,HZ.lb.Config.CONTEXT_TYPE_PHOTO_RELATED_PRODUCTS,i,c,c.length,h+1,-1);j.setCurrentSpaceId(g),a.pushContext(j),a.refresh()}}},HZ.lb.plugins.VisuallySimilarProducts=function(){var a,b,c,d,e=HZ.lb.Config.contentGroupIds.INFO,f=4,g=4;this.setOwner=function(d){a=d,b=$('<section class="lbInfoBox visually-similar-prod separator trackMe" compId="lbVisuallySimilarProducts"></section>'),c=$(HZ.lb.RenderUtils.renderSectionHeader(_hgt("Visually Similar Products"))),a.addInfoBoxToContentGroup(b.get(0),"visuallySimilarProducts",e),b.click(HZ.lb.plugins.PhotoRelatedProducts.handleClick)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){d={},b.empty();var c=a.isMarketplaceProduct()&&!(a.isRecommendationsContext()||a.isFullPageAd()||a.isPalette()||a.isProductAd()),e=HZ.data.VisuallySimilarSpaces.get(a.getCurrentSpace().id),f=e&&e.length;f&&c&&(HZ.lb.plugins.PhotoRelatedProducts.setPhotoData(),this.renderContent())},this.renderContent=function(){if(HZ.lb.plugins.PhotoRelatedProducts.canRender()){b.append(HZ.lb.plugins.PhotoRelatedProducts.generateContent(f,g,!0));var a=b.find(".section-header");a.replaceWith(c)}}},HZ.lb.plugins.ProductCollections=function(){var a,b,c,d,e,f,g=8,h=4,i=32,j=8,k="collectionSpaceIds",l="collectionName",m="collectionCurator",n=HZ.lb.Config.contentGroupIds.INFO;this.setOwner=function(c){a=c,b=$('<section class="lbInfoBox product-collections separator trackMe" compId="lbProductCollections"></section>'),a.addInfoBoxToContentGroup(b.get(0),"productCollections",n),b.on("click",".thumb",this.handleThumbClick.bind(this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty(),d={},this.renderContent()},this.renderContent=function(){b.empty();var n=a.getCurrentSpace(),o=HZ.data.ProductCollections.get(n.id);if(o&&o[k]){var p=o[k],q=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-i,h,j);e=q,f=q;var r={tag:"span"};c=$(HZ.lb.RenderUtils.renderSectionHeader(_hgt("More from the <t1>{collection} Collection</t1> by {curator}",{t1:r,collection:o[l],curator:o[m]})));var s=[];p.slice(0,g).forEach(function(a,b){var c=HZ.data.Spaces.get(a);if(c){d[a]=b;var g=HZ.data.ProductsInfo.get(a),h=HZ.utils.Links.getSpaceImageUrl(a,e,f),i=HZ.utils.Links.getSpaceLink(a),j=c.price?c.price:g&&g.p?g.p:"&nbsp;",k=$(HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:j})),l=$("<div></div>").append(k).html();s.push({SPACE_ID:a,INDEX:b,IMG_SRC:h,WIDTH:e,HEIGHT:f,CLICK_URL:i,THUMB_META:l,OVERLAY_TEXT:_hgt("Shop Houzz"),SPACE_DESC:c})}}),s&&s.length>0&&(b.append(c),b.append(HZ.lb.RenderUtils.renderThumbGrid(h,s,"production-collections-product",HZ.lb.Templates.PRODUCT_THUMB)))}},this.handleThumbClick=function(b){if(!(b.ctrlKey||b.metaKey||HZ.lb.Config.isViewSpace)){b.preventDefault();var c=a.getCurrentSpace(),e=HZ.data.ProductCollections.get(c.id);if(!e)return;var f=e[k],g=$(b.currentTarget),h=g.data("space-desc"),i=h.id,j=d[i],l={};l[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=i;var m=new HZ.lb.Context("productCollections_"+i,HZ.lb.Config.CONTEXT_TYPE_PRODUCT_COLLECTIONS,l,f,f.length,j+1,-1);m.setCurrentSpaceId(i),a.pushContext(m),a.refresh()}}},HZ.lb.plugins.SpaceRecommendations=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.OVERVIEW,e=5,f=5;this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox recommendations-spaces separator trackMe" compId="lbSpaceRecommendations"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"recommendationsSpaces",d),b.click(this.handleClick)},this.handleClick=function(a){HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.handleClick.call(HZ.lb.plugins.PhotoRecommendations,a)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=a.isRecommendationsContext()||a.isProjectContext()||a.getContextType()==HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS;a.isProduct()||c||(HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRecommendations.canRender()&&b.append(HZ.lb.plugins.PhotoRecommendations.generateContent(e,f,"photo"))}},HZ.lb.plugins.ProductRecommendations=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.OVERVIEW,e=5,f=5;this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox recommendations-products separator trackMe" compId="lbProductRecommendations"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"recommendationsProducts",d),b.click(this.handleClick)},this.handleClick=function(a){HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.handleClick.call(HZ.lb.plugins.PhotoRecommendations,a)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=a.isRecommendationsContext()||a.getContextType()==HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS;a.isProduct()&&!c&&(HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRecommendations.canRender()&&b.append(HZ.lb.plugins.PhotoRecommendations.generateContent(e,f,"product"))}},HZ.lb.plugins.ProductRecommendedProducts=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.INFO,e=4,f=8;this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox product-rel-prod separator trackMe" compId="lbProductRecommendationsProduct"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"productRelatedProducts",d),b.click(this.handleClick)},this.handleClick=function(a){HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.handleClick.call(HZ.lb.plugins.PhotoRecommendations,a)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=a.isRecommendationsContext()||a.isFullPageAd();a.isProduct()&&!c&&(HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.Recommendations),HZ.lb.plugins.PhotoRecommendations.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRecommendations.canRender()&&b.append(HZ.lb.plugins.PhotoRecommendations.generateContent(e,f,"product"))}},HZ.lb.plugins.RelatedPhotos=function(){var a,b,c,d=HZ.lb.Config.showRelSpacesBelowSponsProd?HZ.lb.Config.contentGroupIds.PRODUCTS:HZ.lb.Config.contentGroupIds.OVERVIEW,e=5,f=5;this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox similar-spaces separator trackMe" compId="lbSimilarSpaces"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"relatedPhotos",d),$(c).click(this.handleClick)},this.handleClick=function(a){HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.SimilarSpaces),HZ.lb.plugins.PhotoRecommendations.handleClick.call(HZ.lb.plugins.PhotoRecommendations,a)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){b.empty();var c=a.isFullPageAd()||a.isRecommendationsContext()||a.isProjectContext()||a.getContextType()==HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS;
a.isProduct()||c||(HZ.lb.plugins.PhotoRecommendations.setDataCollection(HZ.data.SimilarSpaces),HZ.lb.plugins.PhotoRecommendations.setPhotoData(),this.renderContent())},this.renderContent=function(){HZ.lb.plugins.PhotoRecommendations.canRender()&&b.append(HZ.lb.plugins.PhotoRecommendations.generateContent(e,f,"photo"))}},HZ.lb.plugins.PhotoRecommendations=new function(){var a,b,c=!1,d=32,e=8;this.setOwner=function(b){a=b},this.setDataCollection=function(a){this.dataCollection=a},this.setPhotoData=function(){b=a.getCurrentSpace(),this.recommendations=this.dataCollection?this.dataCollection.get(b.id):{sids:[],count:0},c=!1},this.isDataLoaded=function(){return this.recommendations&&this.recommendations.sids.length>1},this.canRender=function(){return this.isDataLoaded()&&!this.isRendered()},this.isRendered=function(){return c},this.generateContent=function(b,f,g){var h=0,i=$("<div></div>");if(this.itemType=g,this.isDataLoaded()){var j,k="",l=this.recommendations.sids,m=l.length;switch(g){case"photo":switch(this.dataCollection){case HZ.data.Recommendations:j=_hgtp("","People also liked this photo","People also liked these photos",m);break;case HZ.data.SimilarSpaces:j=_hgt("Related Photos")}k="recommended-space";break;case"product":j=_hgt("People who liked this also liked"),k="related-product"}i.append(HZ.lb.RenderUtils.renderSectionHeader(j));for(var n=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-d,b,e),o=n,p=n,q=[],r=Math.min(f,m),s=0;r>s;s++){var t=l[s],u=HZ.data.Spaces.get(t),v=HZ.utils.Links.getSpaceLink(t),w=HZ.utils.Links.getSpaceImageUrl(t,o,p,u.bg);if("photo"==g)q.push({SPACE_ID:t,INDEX:h,IMG_SRC:w,WIDTH:o,HEIGHT:p,CLICK_URL:v});else if("product"==g){var x=u.price,y=HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:x});q.push({SPACE_ID:t,INDEX:h,IMG_SRC:w,WIDTH:o,HEIGHT:p,CLICK_URL:v,THUMB_META:y,OVERLAY_TEXT:_hgt("Shop Houzz")})}h++}"photo"==g?i.append(HZ.lb.RenderUtils.renderThumbGrid(b,q,k,HZ.lb.Templates.SIMPLE_THUMB)):"product"==g&&i.append(HZ.lb.RenderUtils.renderThumbGrid(b,q,k,HZ.lb.Templates.PRODUCT_THUMB)),c=!0}return i.html()},this.handleClick=function(c){if(!(c.ctrlKey||c.metaKey||HZ.lb.Config.isViewSpace)){c.preventDefault();var d=$(c.target);if(d.attr("s")||(d=d.closest("li")),this.recommendations=this.dataCollection?this.dataCollection.get(b.id):{sids:[],count:0},d.attr("s")&&this.recommendations.count>1){var e=parseInt(d.attr("s")),f=parseInt(d.attr("i")),g={};if(g[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=b.id,"photo"==this.itemType)var h=new HZ.lb.Context("recommendations_"+b.id,HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS,g,this.recommendations.sids,this.recommendations.count,f+1,-1);else if("product"==this.itemType)var h=new HZ.lb.Context("recommendations_"+b.id,HZ.lb.Config.CONTEXT_TYPE_PHOTO_RELATED_PRODUCTS,g,this.recommendations.sids,this.recommendations.count,f+1,-1);h.setCurrentSpaceId(e),a.pushContext(h),a.refresh()}}}},HZ.lb.plugins.ProductReviews=function(){var a,b,c,d,e,f,g,h,i,j,k=HZ.lb.Config.contentGroupIds.DISCUSSION;this.setOwner=function(b){a=b,c=$('<section class="lbInfoBox product-reviews separator"></section>'),d=c.get(0),a.addInfoBoxToContentGroup(d,"productReviews",k),h=$.proxy(this.onResourcesLoaded,this)},this.imageDataUpdated=function(){this.renderReviews()},this.imageChanged=function(){b=a.getCurrentSpace(),e=HZ.data.ProductReviews.get(b.id),e&&e.reviewHtml&&c.show(),c.empty();var d=a.isRecommendationsContext()||a.isFullPageAd();a.isProduct()&&!d&&this.renderReviews()},this.renderReviews=function(){if(f||g){if(f&&(b=a.getCurrentSpace(),e=HZ.data.ProductReviews.get(b.id),e&&e.reviewsHtml)){var d,k,l,m,n,o,p,q,r,s,t,u,v,w=HZ.ui.AjaxThrobber.getThrobber(),x=i;d=$(e.reviewsHtml),d.find("header h2").removeClass("text-l mbm").addClass("text-m text-bold"),k=d.find("form#reviewForm").clone(),c.empty().append(d.html()),x.initExpandButton(),x.setLoadMoreElement($("#moreReviews")),$(x.getExpandButton()).removeClass("hzBtn primary").addClass("btn btn-secondary btn-block"),l=k.find("input.rating[type=number]"),m=l.val()>0,l.rating(),j.initRatingLables(k.find(".rating-input"),k.find(".rate-desc"),HZ.reviews.RateStarsLabels.RATING_LABELS),n=x.deleteButton=k.find("#deleteReviewButton"),o=x.cancelButton=k.find("#cancelReviewButton"),p=k.find("#editReviewButton"),q=$("#submitReviewButton"),n.click($.proxy(x.onDeleteClick,x)).detach(),o.click($.proxy(x.onCancelClick,x)).detach(),p.click($.proxy(x.onEditClick,x)),r=[n,w,o,q],k.find(".header-5, .controls.main").remove(),s=k.find(".form-ui").detach(),q.detach(),m&&n.removeClass("hidden"),t=m?_hgt("Edit Review"):_hgt("Write Review"),u={title:t,formName:"reviewForm",body:s,controls:r},v=x.dialog=new HZ.ui.yamdi.Dialog,v.init(u),k.remove(),x.setFormNode(v.getForm()),x.initReviewVote();var y=$.proxy(x.onExpandClick,x);$("#noReviewsCta, .review-actions > .edit").click(y)}}else this.loadResources(h)},this.onReviewsUpdate=function(c,d){if(b=a.getCurrentSpace(),e=HZ.data.ProductReviews.get(b.id),e&&e.reviewsHtml){var f=e.reviewsHtml,g=$(f),h=g.find(".reviews");h.replaceWith(d.newValue),g=$("<div></div>").append(g),e.reviewsHtml=g.html()}},this.loadResources=function(a){f?a():(g=!0,HZ.utils.ResourceLoader.requireLightboxProductReviewResources(a))},this.onResourcesLoaded=function(){f=!0,g=!1,i=HZ.reviews.ProductReviewsUIManager.getInstance(),i.setDisplayMode(HZ.reviews.ProductReviewsUIManager.DISPLAY_MODE_DIALOG),$(".product-reviews").on("update.reviews",$.proxy(this.onReviewsUpdate,this)),j=HZ.reviews.RateStarsLabels.getInstance(),this.renderReviews()}},HZ.lb.plugins.ProductInfo=function(){function a(){var a=I,b=$(a);b.addClass("scrolling"),e.scrollToSelector(a,function(){b.removeClass("scrolling").addClass("scrolled")})}function b(){e.scrollToSelector(".lbInfoBox.product-reviews")}function c(){e.scrollToSelector(".lbInfoBox.questions")}function d(){$(".loadComments").click(),e.scrollToSelector("#lbComments")}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=10,G=9,H=HZ.lb.Config.contentGroupIds.PRODUCTS,I=".lbInfoBox.seller-shipping-info",J=_hgt("Add to Cart"),K=_hgt("Out of Stock"),L=_hgt("Visit Store"),M=_hgt("*Price not verified"),N=_hgt("This price has been supplied by a user of Houzz and, therefore, may not accurately reflect the current price of the product."),O=_hgt("Currently not Available"),P=_hgt("Shipping & Seller Information"),Q=_hgt("HOUZZ EXCLUSIVE"),R=_hgt("SALE"),S=_hgt("Your product is being sold by multiple sellers. The title, description, and other metadata you provided for your product listing may not appear here."),T='<div class="row"><div class="col-xs-12">%BREADCRUMBS%</div></div><div class="row"><div class="col-xs-12 product-badge">%BADGE%</div></div><div class="row"><h1 class="col-xs-12 header-5 mt0 mb0 product-title">%TITLE%</h1></div><div class="row product-reviews mts"><ul class="col-xs-12 list-inline list-unstyled product-stats">%STATS%</ul></div><div class="row"><div class="col-xs-12">%SALE_PROMO%</div></div><div class="row"><div class="col-xs-12 header-1 mt0 mb0">%PRICE%</div></div><div class="row"><div class="col-xs-12">%SALE_PROMO_SAVINGS%</div></div><div class="row"><div class="col-xs-12 mbl mtm">%SHIPPING%</div></div><div class="row"><div class="col-xs-12">%QUANTITY%</div></div><div class="row"><div class="col-xs-12">%MAIN_BUTTON%</div></div>',U='<div class="row"><div class="col-xs-12">%BREADCRUMBS%</div></div><div class="row"><h1 class="col-xs-12 header-5 mt0 mb0 product-title">%TITLE%</h1></div><div class="row product-reviews mts"><ul class="col-xs-12 list-inline list-unstyled product-stats">%STATS%</ul></div><div class="row"><div class="col-xs-12 header-1 mt0 mbm">%PRICE% </div><span title="%PRICE_COMMENT_TITLE_ATTR%">&nbsp;%PRICE_COMMENT%</span></div><div class="row"><div class="col-xs-12">%STOCK_MESSAGE%</div></div><div class="row"><div class="col-xs-12">%MAIN_BUTTON%</div></div>',V='<div class="banner-listing-owner text-center text-l text-bold hidden"><div class="banner-listing-owner-close-x"><i class="hzi-font hzi-CloseX"></i></div><div class="banner-listing-owner-content">%CONTENT%</div></div>';this.setOwner=function(j){e=j,f=$('<section class="lbInfoBox product-info-content separator"></section>'),g=f.get(0),e.addInfoBoxToContentGroup(g,"productInfo",H),f.on("click",".btn-add-to-cart",HZ.lb.plugins.SpaceActions.handleAddToCart).on("click",".btn-visit-store",HZ.lb.plugins.SpaceActions.handleVisitStoreClicked).on("click",".shipping-info",a).on("click",".review-stars-stats",b).on("click",".questions-stats",c).on("click",".save-stats",d),h=$(HZ.utils.Html.template(HZ.lb.Templates.IMAGE_OVERLAY_TEMPLATE,{CTA:L,COMP_ID:"visit_store_overlay"})).addClass("hidden").disableSelection(),h.on("click",HZ.lb.plugins.SpaceActions.handleVisitStoreClicked),e.addLbImageLayer(h),i=$(HZ.utils.Html.template(V,{CONTENT:S})),i.on("click",".banner-listing-owner-close-x",this.handleListingOwnerBannerCloseClick.bind(this)),e.addLbImageLayer(i),HZ.lb.Config.isCheckoutEnabled&&HZ.cart&&HZ.cart.Actions.subscribeCartUpdate("lightbox",function(a,b){"add"===b.operation&&b.message&&b.message.q&&f.find("#qtySelector").val(b.message.q)})},this.imageChanged=function(){if(f.empty(),i.addClass("hidden"),j=e.getCurrentSpace(),k=HZ.utils.User.isHiddenUser(j.ow),e.isProduct()){l=HZ.data.ProductsInfo.get(j.id);var a=HZ.data.ListingsInfo.get(e.getSelectedListingId());if(h.toggleClass("hidden",!e.isPPCProduct()),t=this.getBreadcrumbsHtml(j),v=this.getProductTitleHtml(j),w=this.getProductStatsHtml(j),l||a){if(a?(p=a.avail,q=a.buyable):p=l.av,e.isMarketplaceProduct()){u=this.getProductBadgeHtml(l),x=this.getSalePromoHtml(a),y=k?"":this.getPriceHtml(a,l),B=this.getSaleSavingsHtml(a),C=this.getShippingHtml(a),D=this.getQuantityHtml(a),E=this.getMainButtonHtml(a,j,l),f.append(HZ.utils.Html.template(T,{BREADCRUMBS:t,BADGE:u,TITLE:v,STATS:w,SALE_PROMO:x,PRICE:y,SALE_PROMO_SAVINGS:B,SHIPPING:C,QUANTITY:D,MAIN_BUTTON:E})),$("#qtySelector").customDropdown(),HZ.module.AvailabilityNotification.setMountNode($("#availabilityNotificationBtn")),HZ.module.AvailabilityNotification.setABTestValue(HZ.lb.Config.useNotifyMeText),HZ.module.AvailabilityNotification.updateView(j.id,"lbMpProductBuyBox",e.isSignupMode(),HZ.lb.Config.notifyMeSourceLink,"header-3 ptl pbm");var b=new HZ.QtySelector;b.init(document.getElementById("qtySelector"))}else if(j.fullyLoaded){s=a?a.discon:l?!l.av:!1;var c=s?"":a?a.p:j.price,d=HZ.data.SpaceListingIds.get(j.id)?1==HZ.data.SpaceListingIds.get(j.id).length:!0,g=!!j.tl,m=HZ.data.Users.get(j.ow),n=m&&m.mpv,o=n&&2==j.srct&&8==j.srct,F=!!HZ.data.CurrentSessionUser;r=l&&l.puv&&!!c,y=F&&d&&g&&p&&!o?HZ.utils.Html.template('<span class="product-price">%FINAL_PRICE%</span>&nbsp;<button class="btn btn-primary btn-visit-store">%VISIT_STORE_LABEL%</button>',{FINAL_PRICE:c,VISIT_STORE_LABEL:_hgt("Visit Store")}):HZ.utils.Html.template('<span class="product-price">%FINAL_PRICE%</span>',{FINAL_PRICE:c}),z=r?M:"",A=r?N:"",E=this.getMainButtonHtml(a,j,l),f.append(HZ.utils.Html.template(U,{BREADCRUMBS:t,TITLE:v,STATS:w,PRICE:y,PRICE_COMMENT_TITLE_ATTR:A,PRICE_COMMENT:z,STOCK_MESSAGE:s?O:"",MAIN_BUTTON:E}))}if(l&&a){var G=HZ.data.CurrentSessionUser,H=G?G.getUserId():-1,I=HZ.data.SpaceListingIds.get(j.id),J=!1;I&&I.forEach(function(a){var b=HZ.data.ListingsInfo.get(a);b&&b.vid==H&&b.lid!=l.plid&&(J=!0)}),J&&i.removeClass("hidden")}}}f.css("display","block")},this.imageDataUpdated=function(){this.imageChanged()},this.getBreadcrumbsHtml=function(a){var b=a&&a.brlnk?a.brlnk:null,c=$("<div>");if(b){var d=b.crumbs;if(d){var e=$('<ul class="list-unstyled list-inline text-primary breadcrumbs"></ul>').appendTo(c);d.forEach(function(a){var b=$('<li class="breadcrumbs-crumb"></li>').toggleClass("breadcrumbs-crumb--highlight text-xs",a.highlight).appendTo(e);b.append(HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:a.url,LINK_TEXT:a.label}))})}}return c.html()},this.getProductBadgeHtml=function(a){var b=$("<div>");return a&&a.excl&&b.append(HZ.utils.Html.template(HZ.lb.Templates.PRODUCT_BADGE,{BADGE_TEXT:Q})),b.html()},this.getProductTitleHtml=function(a){var b=$("<div>");return a&&a.t&&b.append(HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:HZ.utils.Links.getSpaceLinkWithSEO(a.id),TITLE_ATTR:a.t,LINK_TEXT:a.t})),b.html()},this.getProductStatsHtml=function(a){m=!!a.ratingHtml,n=!!a.nques,o=!!a.bc;var b=[];if(m&&b.push(HZ.utils.Html.template(HZ.lb.Templates.SPACE_FACET,{CSS_CLASS:"review-stars-stats",FACET_TEXT:a.ratingHtml})),n){var c=_hgtp("","{numQuestions} Question","{numQuestions} Questions",a.nques,{numQuestions:a.nques});b.push(HZ.utils.Html.template(HZ.lb.Templates.SPACE_FACET,{CSS_CLASS:"questions-stats",FACET_TEXT:c}))}if(o){var d=_hgtp("","{numSaves} Save","{numSaves} Saves",a.bc,{numSaves:a.bcf});b.push(HZ.utils.Html.template(HZ.lb.Templates.SPACE_FACET,{CSS_CLASS:"save-stats",FACET_TEXT:d}))}return b.join("")},this.getSalePromoHtml=function(a){var b=$("<div>");if(a&&a.pl){var c,d=HZ.utils.Links.getSoldByLink(a.vid),e=HZ.data.Users.get(a.vid).d;if(a&&a.dv)c=_hgt("by Houzz");else if(d){var f={tag:"a",attr:{target:"_blank",href:d}};c=_hgt("by <t1>{sellerName}</t1>",{sellerName:e,t1:f})}else c=e;var g=HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:a.plink,LINK_TEXT:a.pl});b.append(HZ.utils.Html.template(HZ.lb.Templates.PRODUCT_SALE_PROMO,{SALE_BADGE_LABEL:R,SALE_LABEL:g,SALE_SELLER:c}))}return b.html()},this.getPriceHtml=function(a,b){var c=$("<div>"),d=a?a.p:b?b.p:"",e=a&&a.pop?a.pop:b.msrpstr?b.msrpstr:"";return c.append(HZ.utils.Html.template(HZ.lb.Templates.PRODUCT_PRICE,{FINAL_PRICE:d,STRIKE_TROUGH_PRICE:e})),c.html()},this.getSaleSavingsHtml=function(a){var b=$("<div>");return a&&a.pasf&&b.append($('<span class="text-primary"></span>').append(a.pasf)),b.html()},this.getShippingHtml=function(a){var b,c=$("<div>");return a&&(a.fs?b=_hgt("Free Shipping!"):a.estsc&&(b=_hgt("+ {shippingCost} Shipping",{shippingCost:a.estsc})),c.append(HZ.utils.Html.template(HZ.lb.Templates.SHIPPING_SELLER_INFO,{SHIPPING_COST:b,SHIPPING_LINK_TEXT:P}))),c.html()},this.getQuantityHtml=function(a){var b=$("<div>"),c=[],d="";if(a&&q)if(p){var e=parseInt(a.q,10);Math.min(e+1,G);F>e&&(d=_hgt("Only {quantity} Left!",{quantity:e}));for(var f=1;f<=Math.min(e,G);f++)c.push(HZ.utils.Html.template(HZ.lb.Templates.QUANTITY_OPTION,{QTY:f}));e>G&&c.push(HZ.utils.Html.template(HZ.lb.Templates.QUANTITY_OPTION,{QTY:G+1+"+"}));$(HZ.utils.Html.template(HZ.lb.Templates.PRODUCT_QUANTITY,{QUANTITY_LABEL:_hgt("Quantity:"),QTY_OPTIONS:c.join(""),QTY_COMMENT:d})).appendTo(b)}else b.append(_hgt("Sold Out"));return b.html()},this.getMainButtonHtml=function(a,b,c){var d=$("<div>"),f={},g="",h=!1;if(HZ.data.ProductsInfo.get(b.id)&&(h=HZ.data.ProductsInfo.get(b.id).parent),a&&a.mpListing||c&&c.mp)if(g=HZ.lb.Templates.MPP_MAIN_BUTTON,p&&q)f={BS_BTN_CLASS:"btn-primary",MPP_BTN_CLASS:"btn-add-to-cart",SPACE_ID:b.id,DISABLED:"",LABEL:J};else if(p||h)f={BS_BTN_CLASS:"btn-primary",MPP_BTN_CLASS:"btn-add-to-cart",SPACE_ID:b.id,DISABLED:"disabled",LABEL:J};else{if(HZ.lb.Config.isNotifyMeEnabled)return"<div id='availabilityNotificationBtn'></div>";f={BS_BTN_CLASS:"btn-secondary",MPP_BTN_CLASS:"btn-add-to-cart",SPACE_ID:b.id,DISABLED:"disabled",LABEL:K}}else s=a?a.discon:c?!c.av:!1,!e.isSignupMode()||s||e.isPPCProduct()||(g=HZ.lb.Templates.PPC_MAIN_BUTTON,f={SPACE_ID:b.id,LABEL:L});return d.append(HZ.utils.Html.template(g,f)),d.html()},this.handleListingOwnerBannerCloseClick=function(a){i.addClass("hidden")}},HZ.lb.plugins.ProductIdeabookComment=function(){var a,b,c=HZ.lb.Config.contentGroupIds.PRODUCTS;this.setOwner=function(d){a=d,b=$('<section class="lbInfoBox variationSelectors separator"></section>'),a.addInfoBoxToContentGroup(b[0],"productIdeabookComment",c)},this.imageChanged=function(){if(b.empty(),a.isGalleryContext()){var c=HZ.lb.RenderUtils.renderIdeabookSpaceComment(a.getCurrentSpace(),a.getCurrentSpaceGallery());b.append(c)}},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.MPProductVariation=function(){function a(a){}var b,c,d=-1,e="openLB",f="navigateNext",g="changeVar",h="changeVarNoMatch",i=e,j=!0,k=null,l=HZ.lb.Config.contentGroupIds.PRODUCTS;this.setOwner=function(a){b=a,k=HZ.productVariation.BoxLinkSelector2.updateView,c=$('<section class="lbInfoBox variationSelectors separator"></section>'),b.addInfoBoxToContentGroup(c[0],"mpProductVariation",l),HZ.productVariation.Manager.setSelector(HZ.productVariation.BoxLinkSelector2),HZ.productVariation.Manager.setRenderer(this),HZ.productVariation.Manager.initUI()},this.lightboxLoaded=function(){HZ.productVariation.BoxLinkSelector2.updateView=a,d=-1,i=e,j=!0},this.lightboxUnloaded=function(){HZ.productVariation.BoxLinkSelector2.updateView=k},this.imageChanged=function(){var a=b.getCurrentSpace(),k=a.id;c.empty(),j=!0;var l,n,o=b.getContext().getCursorPosition(),p=HZ.data.Variations.get(k),q=!0,r=!1;if(o&&(o.cursor!=d?(i=-1==d?e:f,d=o.cursor):p?p.exactMatch===!1?(i=h,p.exactMatch=!0):i=g:i=f),HZ.data.ProductsInfo.get(k)&&(r=HZ.data.ProductsInfo.get(k).parent),p){if(l=p.availVar,null==l||0==l.length)return null;n=1==l.length,n?q=!r&&i!=g&&i!=h:(q=!r,(i==h||i==g)&&(q=!1)),j=q,m(q)}else j=!r},this.imageDataUpdated=function(){c.is(":empty")&&m(j)};var m=function(a){var d=b.getCurrentSpace();HZ.productVariation.Manager.setSpaceId(d.id),c.empty(),HZ.productVariation.BoxLinkSelector2.setCollapsed(a);var e=HZ.productVariation.Manager.drawSelectors(d.id);null!=e&&(c.append(e),c.removeClass("hidden"))};this.updateView=function(a){var c=b.getContext();c.stashAndReplaceCurrentSpaceId(a),b.refresh()}},HZ.lb.plugins.PreSalesPhone=function(){var a,b,c=HZ.lb.Config.contentGroupIds.INFO,d=HZ.lb.Config.preSalesPhoneNumber,e='<header class="phone-header row">            <h2 class="sectionTitle text-m text-bold col-xs-12">%TITLE%</h2>        </header>        <div class="row">            <p class="col-xs-12">%MESSAGE%</p>        </div>        <div class="row phone-row">            <span class="hzi-font hzi-Phone phone-img"></span><span class="phone">%PHONE%</span>        </div>';this.setOwner=function(d){a=d,b=$('<section class="lbInfoBox pre-sales-phone separator"></section>'),a.addInfoBoxToContentGroup(b[0],"preSalesPhone",c)},this.imageChanged=function(){var c=$(b).empty(),f=a.getCurrentSpace(),g=!1,h=HZ.data.ProductsInfo.get(f.id);if(h&&(g=h.showPhone)){var i=h.pvid,j=HZ.data.Users.get(i);g=j?g&&j.idv:!1}if(g){var k=_hgt("Have questions about this product (ID#: {id})?",{id:f.id}),l=_hgt("Our Houzz specialists are ready to help!"),m=_hgt("Call during our regular hours: Monday - Friday, 5am - 7pm PT");if(HZ.utils.RegularHour.isRegularHour(HZ.ajaz.Services.PACIFIC_TIME_ZONE_OFFSET))var n=$(HZ.utils.Html.template(e,{TITLE:k,MESSAGE:l,PHONE:d}));else var n=$(HZ.utils.Html.template(e,{TITLE:k,MESSAGE:m,PHONE:d}));c.append(n)}},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.ProductDescription=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.INFO;this.setOwner=function(c){a=c,b=$('<section class="lbInfoBox product-description separator"></section>'),a.addInfoBoxToContentGroup(b.get(0),"productDescription",d)},this.imageChanged=function(){var d=a.getCurrentSpace(),e="";if(d.fullyLoaded&&c!=d.id&&(b.empty(),c=d.id,!a.isFullPageAd())){if(a.isMarketplaceProduct()){var f=HZ.data.ProductsInfo.get(d.id);f&&f.desc&&(e=f.desc)}else if(a.isProduct()){var g=a.getSpaceDescription();if(g){var h=g;d.f&&d.au&&d.au!=d.ow&&d.cau&&(h+=" &mdash; <span class='userName'>"+HZ.ui.render.User.getUsersHtml(d.au,!0)+"</span>"),e=h}}if(""!=e){var i=$('<header class="section-header row"></header>').appendTo(b);i.append('<h2 class="sectionTitle text-m text-bold col-xs-12">'+_hgt("Product Description")+"</h2>");var j=$('<div class="row invisible"></div>').appendTo(b),k=$('<p class="description-text col-xs-12"></p>').appendTo(j),l=$("<div>").append(e);k.append(l),a.registerTimeout("prodDescPeek",function(){j.removeClass("invisible"),k.peekable()},0)}}},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.CommonSpecificationRenderer=new function(){function a(){var a=b.getCurrentSpace(),c="";if(a.ow&&7!=a.ow&&!b.isFullPageAd()){var d=HZ.data.Users.get(a.ow);if(d){var e=null,f=HZ.data.HouzzClkTracking.get(a.id);f&&f[a.ow]&&(e=f[a.ow]),c=HZ.ui.render.User.getUserHtml(a.ow,!0,e)}}else c="<div class='space-owner'></div>";return c}var b,c,d,e=!1,f=/[\sa-z]/gi,g="w",h="h",i="d",j="wt",k={};k[g]=_hgt("W"),k[h]=_hgt("H"),k[i]=_hgt("D"),k[j]="",this.setOwner=function(a){b=a,d=[g,h,i,j],c=HZ.data.ProductAttributes.filter(function(a){var b=a.unit;return"dimensions"==b||"weight"==b})},this.imageChanged=function(){},this.renderEditorialDescription=function(a){var c,d=b.getCurrentSpace(),e=b.getSpaceDescription();e&&(c=e,d.f&&d.au&&d.au!=d.ow&&d.cau&&(c+=" &mdash; <span class='userName'>"+HZ.ui.render.User.getUsersHtml(d.au,!0)+"</span>")),a.empty();var f=$("<div class='description-text'></div>").appendTo(a);c?f.peekable("show").peekable("setContent",c):f.peekable("hide")},this.renderSpecification=function(){var d,g,h,i=b.getCurrentSpace(),l=HZ.data.PPCAds.get(i.id),m=$("<div></div>"),n=!!HZ.data.CurrentSessionUser;b.isMarketplaceProduct()||l&&l.isPPCProduct||(e=!n);var o,p,q,r=HZ.data.ProductsInfo.get(i.id),s=HZ.data.ListingsInfo.get(b.getSelectedListingId()),t=$('<dl class="product-attributes horizontal-list text-m"></dl>'),u='<dt class="key">%LABEL%</dt><dd class="value">%VALUE%&nbsp;</dd>',v=0,w=a();if(i.prod&&w){var x=HZ.data.SpaceListingIds.get(i.id)?1==HZ.data.SpaceListingIds.get(i.id).length:!0;d=_hgt("Sold By"),g="";var y=HZ.data.Users.get(i.ow).mpv;if(o=!!i.tl,p=y&&(2==i.srct||8==i.srct),q=!s&&r&&r.av||s&&!s.discon,n&&o&&q&&!p&&w&&(g=w+' | <a href="javascript:;" class="visitStore icon-wrap">'+_hgt("Visit Store")+'<span class="more-icon"></span></a>'),g&&x){var z=$(HZ.utils.Html.template(u,{LABEL:d,VALUE:g}));t.append(z),v++}}if(r){d=_hgt("Size"),g="";var A=!!r[j];A&&(d=_hgt("Size/Weight"));var B=[];c.forEach(function(a){var b=a.key,c=a.unit;if(r[b]){var d=k[b]+" "+r[b]+(c?r[c]:"");B.push(d)}});var C=B.some(function(a){return a.length>0&&parseInt(a.replace(f,""),10)>0});if(C&&(g=B.join(" / "),h=HZ.utils.Html.template(u,{LABEL:d,VALUE:g}),t.append(h),v++),HZ.data.ProductAttributes.forEach(function(a){var b=a.unit,c=a.key;"dimensions"!=b&&"weight"!=b&&"s"!=c&&(d=a.label,g=r[c],null!=g&&(h=HZ.utils.Html.template(u,{LABEL:d,VALUE:g}),t.append(h),v++))}),r.manu){var D=r.manuId,E=D?HZ.utils.Links.getManufacturerLink(r):"",F=E?HZ.data.Users.get(D).d:r.manu+"&nbsp;";d=_hgt("Manufactured By"),g=E?'<a target="_blank" href="'+E+'" class="colorLink">'+F+"</a>":F,h=HZ.utils.Html.template(u,{LABEL:d,VALUE:g}),t.prepend(h)}r.assembly&&(h=HZ.utils.Html.template(u,{LABEL:_hgt("Assembly Required"),VALUE:_hgt("Yes")}),t.append(h))}if(!i.prod){var G=HZ.lb.RenderUtils.renderBrowseLocationLink(i);G&&t.append(HZ.utils.Html.template(u,{LABEL:_hgt("Location"),VALUE:$("<div>").append(G).html()}))}if(r&&r.p65d===!0&&(d=_hgt("California Residents"),g=_hgt("<t1>Click here for Proposition 65 warning</t1>",{t1:{tag:"a",attr:{href:"javascript:;","class":"colorLink p65d"}}}),h=HZ.utils.Html.template(u,{LABEL:d,VALUE:g}),t.append(h)),v>0&&i.prod){var H="";H+='<header class="section-header">',H+='<h2 class="sectionTitle text-m text-bold">'+_hgt("Product Specification")+"</h2>",H+="</header>",m.append(H),m.append(t)}return m.html()},this.imageDataUpdated=function(){}},HZ.lb.plugins.ProductSpecification=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.INFO;this.setOwner=function(c){a=c,b=$('<section class="lbInfoBox product-spec separator"></section>')[0],a.addInfoBoxToContentGroup(b,"productSpecs",d),$(b).on("click",".p65d",$.proxy(this.onP65DClick,this)).on("click",".visitStore",HZ.lb.plugins.SpaceActions.handleVisitStoreClicked)},this.imageChanged=function(){$(b).empty(),c=a.getCurrentSpace(),c.prod&&$(b).append(HZ.lb.plugins.CommonSpecificationRenderer.renderSpecification())},this.imageDataUpdated=function(){this.imageChanged()},this.onP65DClick=function(a){HZ.ui.yamdi.Common.alert(_hgt("WARNING"),_hgt("This product contains a chemical known to the State of California to cause cancer, birth defects, or other reproductive harm."))}},HZ.lb.plugins.SpaceSpecification=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.OVERVIEW;this.setOwner=function(c){a=c,b=$('<section class="lbInfoBox space-spec separator"></section>')[0],a.addInfoBoxToContentGroup(b,"space-spec",d)},this.imageChanged=function(){$(b).empty(),c=a.getCurrentSpace(),a.isFullPageAd()||a.isProduct()||$(b).append(HZ.lb.plugins.CommonSpecificationRenderer.renderSpecification())},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.ProductListingsInfo=function(){var a,b,c,d,e=HZ.lb.Config.contentGroupIds.INFO;this.setOwner=function(f){a=f,b=$('<section class="lbInfoBox seller-shipping-info separator"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"shipping-info",e),d=HZ.listingInfo.Renderer,d.setMountNode(c)},this.imageChanged=function(){var b=a.getCurrentSpace();if(b.fullyLoaded){var c=b.id,e=a.getSelectedListingId();d.updateView(c,e)}},this.imageDataUpdated=function(){this.imageChanged()}},HZ.lb.plugins.QuestionsInfo=new function(){var a,b,c,d,e,f,g,h,i=HZ.lb.Config.contentGroupIds.DISCUSSION,j=2,k=null;this.setOwner=function(d){a=d,b=$('<section id="lbQuestions" class="lbInfoBox separator questions"></section>'),c=b.get(0),a.addInfoBoxToContentGroup(c,"questionsInfo",i),b.click($.proxy(this.handleDivClicked,this)).on("mousedown",".lbQuestionFeedDiv a",function(){var a=this.href;0==a.indexOf("http://")&&(this.target="_blank")}).on("click","#askQuestionButton, #lbQuestionsFeedCTALink",$.proxy(this.handleAskAQuestion,this)),this.initFeedComments(),$(document).on("keyboardHandlerRequired.lightbox",function(b,d){var e=d.event.target;$(e).closest(c)&&a.detachKeyboardHandler()}).on("keyboardHandlerReleased.lightbox",function(b,d){var e=d.event.target;$(e).closest(c)&&a.attachKeyboardHandler()})},this.initFeedComments=function(){"undefined"!=typeof HZ.feedComments?HZ.feedComments.init({source:"lightbox",feedContainer:c}):HZ.lb.Utils.loadFeedCommentsResources(this.initFeedComments.bind(this))},this.lightboxScroll=function(){this.loadIfVisible()},this.loadIfVisible=function(){setTimeout(function(){$("#lbQuestions .section-header").visible()&&a.getCurrentSpace().fullyLoaded&&l.apply(this)}.bind(this),500)};var l=function(){var b=a.getCurrentSpace();e||HZ.data.Questions.get(b.id)||(e=!0,HZ.ajaz.Services.getQuestionsData(b.id,$.proxy(m,this)))},m=function(a){HZ.lb.Utils.validateData(a);var b,c=a.results.questions;if(a&&a.results)for(b in c)HZ.data.Questions.put(b,c[b]);e=!1,this.renderQuestions(),f.removeClass("hidden"),g.removeClass("hidden")};this.imageDataUpdated=function(){this.renderQuestions(),$(".askButton",c).removeClass("hidden"),f.removeClass("hidden"),g.removeClass("hidden")},this.imageChanged=function(){k?(HZ.data.Questions.deleteObj(k),k=a.getCurrentSpace().id):k=a.getCurrentSpace().id,g?g.empty():$.noop()},this.renderQuestions=function(){var c,e,h,i=a.getCurrentSpace(),k=[],l=[],m=0;if(i&&(c=HZ.data.Questions.get(i.id)),b.find(".edit-comment-rte").each(function(a,b){var c=$(b),d=c.find(".temp");c.removeClass("active").find(".rich-text-editor-wrapper").remove(),c.find("#cancel-edit-comment").remove(),c.children(".commentForm").hide().appendTo(d.find(".editCommentDiv")),c.find("input[name=isHtml]").remove(),d.children().appendTo(c),d.remove()}),b.find(".add-comment-rte").each(function(a,b){var c=$(b);c.removeClass("active").find(".rich-text-editor-wrapper").remove(),c.find(".addCommentExtra").hide(),c.find(".commentBody").show(),c.find(".hzProIndicator").hide(),c.find("input[name=isHtml]").remove()}),this.storeQuestionData(),d=!0,c&&c.length>0){for(var n=0;n<c.length;n++){var o=c[n],p=('"'+o.body+'"',"");o.processedFeedHtml?p="<div class='lbQuestionFeedDiv' sid='"+i.id+"' qid='"+n+"'>"+o.processedFeedHtml+"</div>":o.feedHtml&&(p="<div class='lbQuestionFeedDiv' sid='"+i.id+"' qid='"+n+"'>"+o.feedHtml+"</div>"),j>m&&o.count>0?(l.push(p),m++):k.push(p)}for(;l.length<j&&k.length>0;)l.push(k.shift())}else{var q=a.isProduct()?_hgt("Have a question about this product? Ask our community."):_hgt("Have a question about this photo? Ask our community.");l.push("<div class='lbQuestionFeedCTA'>"+q+"</div>")}var r,s=a.isProduct(),t=s?i.nques:i.qc;h=_hgt("Ask a Question"),r=s?_hgtp("Product questions","This product has one question","This product has {questionCount} questions",t,{questionCount:t}):_hgtp("Questions About This Photo","Question About This Photo","Questions About This Photo ({questionCount})",t,{questionCount:i.qcf}),b.empty().append('<header class="section-header row hidden"><h2 class="questionsHeader title text-m text-bold col-xs-12">'+r+'</h2><span class="col-xs-12"><button id="askQuestionButton" class="btn btn-secondary btn-block" compId="lbAsk">'+h+"</button></span></header>").append('<div id="questionsContainer" class="hidden">'+l.join("")+"</div>"),f=b.find("header.section-header"),g=$("#questionsContainer");var u=k.length;if(u>0){var v=_hgtp("","Show 1 more question","Show {questionCount} more questions",u,{questionCount:u})+"<span class='more-icon'></span>";b.append("<a class='lbQuestionsMore loadMoreBtn' href='javascript:;'>"+v+"</a><div class='lbQuestionsListUnansweredDiv text-s'>"+k.join("")+"</div>")}e=$("#askQuestionButton"),e.toggleClass("hidden",a.isEditMode()),b.find(".attachment-previews").empty(),b.find("textarea.commentBody").initPlaceHolders(),HZ.clipping.Clip.init({})},this.storeQuestionData=function(){$(c).find(".feedAttach .feed-question-body").peekable("destroy"),$(".lbQuestionFeedDiv",c).each(function(a,b){var c=$(b),d=c.attr("sid"),a=c.attr("qid"),e=HZ.data.Questions.get(d);e&&e[a]&&e[a].feedHtml&&(e[a].processedFeedHtml=c.html())})},this.handleDivClicked=function(a){var b=a.target;if(b&&b.className.indexOf("lbQuestionsMore")>=0){b.style.display="none";var c=$(".lbQuestionsListUnansweredDiv");c[0].style.display="block",c.find(".feed-question-body").peekable()}},this.pluginAfterShown=function(a){clearTimeout(h),h=setTimeout(function(){if(d){var a=$(c).find(".feedAttach .feed-question-body");a.length>0&&(a.peekable(),d=!1)}this.loadIfVisible()}.bind(this),30)},this.imageResized=function(){this.loadIfVisible()},this.handleAskAQuestion=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getContext().getCurrentSpaceId(),c=a.getCurrentSpace(),d=HZ.data.Users.get(c.ow),e=d?d.p:0;HZ.spaceActions.QuestionDialog.init(b,e),HZ.spaceActions.QuestionDialog.setShowLinkOnNewWindow(!0),HZ.spaceActions.QuestionDialog.setQuestionTopic(c.prod?HZ.spaceActions.QuestionDialog.PRODUCT_TOPIC:HZ.spaceActions.QuestionDialog.SPACE_TOPIC),a.showDialog(HZ.spaceActions.QuestionDialog)}}},HZ.lb.plugins.ContextBreadcrumbs=new function(){var a,b,c,d='<div class="crumb"><div class="crumbArrow"><span class="hzi-font hzi-Left-Arrow backArrow"></span><span class="backText">%CTA%</span></div><div class="crumbImage"><img src="%IMG_SRC%"></div></div>';this.setOwner=function(d){a=d,b=$('<div id="lbContextBreadcrumbs"></div>'),c=b.get(0),a.addBreadcrumbs(c),$("#lbContextBreadcrumbs").click($.proxy(this.handleBreadcrumbClick,this))},this.contextChanged=function(){var c=a.getContextStack(),e=c.length>1;if(b.empty(),e){var f=c[1].getCurrentSpaceId();f&&b.append(HZ.utils.Html.template(d,{CTA:_hgt("Back"),IMG_SRC:HZ.utils.Links.getSpaceImageUrl(f,39,39)})),this.showBreadcrumbs()}else this.hideBreadcrumbs()},this.handleBreadcrumbClick=function(){a.popContext(),a.refresh()},this.hideBreadcrumbs=function(){b.addClass("hidden")},this.showBreadcrumbs=function(){b.removeClass("hidden")}},HZ.lb.plugins.GalleryComment=function(){var a,b;this.setOwner=function(c){a=c,b=$('<section class="lbInfoBox separator"></section>'),a.addInfoBoxToContentGroup(b[0],"galleryComment","")},this.imageChanged=function(){var c=a.getCurrentSpace(),d=a.getContext(),e="";d.getType()!=HZ.lb.Config.CONTEXT_TYPE_IDEABOOK||a.isFullPageAd()||(b.show(),c.b&&(e='<div class="gallery-comment text-s">'+c.b+"</div>")),
b.html(e)}},HZ.lb.SocialShareButtons={map:{facebook:{className:"uiButtonFacebook",fontClass:"hzi-Facebook",name:"Facebook",platform:HZ.utils.Config.socialSharePlatforms.facebook,compId:"shareOnFacebook"},twitter:{className:"uiButtonTwitter",fontClass:"hzi-Twitter",name:"Twitter",platform:HZ.utils.Config.socialSharePlatforms.twitter,compId:"shareOnTwitter"},googlePlus:{className:"uiButtonGooglePlus",fontClass:"hzi-Google",name:"Google+",platform:HZ.utils.Config.socialSharePlatforms.googlePlus,compId:"shareOnGooglePlus"},vkontakte:{className:"uiButtonVkontakte",fontClass:"hzi-Vkontakte",name:"Vkontakte",platform:HZ.utils.Config.socialSharePlatforms.vkontakte,compId:"shareOnVkontakte"},odnoklassniki:{className:"uiButtonOdnoklassniki",fontClass:"hzi-Odnoklassniki",name:"Odnoklassniki",platform:HZ.utils.Config.socialSharePlatforms.odnoklassniki,compId:"shareOnOdnoklassniki"},line:{className:"uiButtonLine",fontClass:"hzi-Line",name:"line",platform:HZ.utils.Config.socialSharePlatforms.line,compId:"shareOnLine"}},shareLink:function(a,b){HZ.spaceActions.Share.openShareWindowForSpace(b,a)}},HZ.lb.plugins.SpaceShareButtons=function(){var a,b,c,d='<span class="hzBtn med tint expand">										<ul class="shelf unstyled" data-items="5">											<li class="item">												<a class="hzi-font hzi-Embed icon" compid="embed" title="%EMBED_TITLE%" href="javascript:;"></a>											</li>											<li class="item">												<a class="hzi-font hzi-Print icon" compid="print" title="%PRINT_TITLE%" href="javascript:;"></a>											</li>										</ul> 										<i class="hzi-font hzi-LB-Share icon"></i>									</span>',e='<li class="item">									<a class="hzi-font icon %CSS_CLASS%" compid="%COMP_ID" title="%TITLE_ATTR%" href="javascript:;"></a>								</li>';this.setOwner=function(c){a=c,b=$("<span>"),a.addActionItem(b.get(0),HZ.lb.ActionBar.ACTION_BAR_CENTER)},this.imageChanged=function(){if(!c){var a=HZ.utils.Html.escapeHtmlEntities(_hgt("Embed this photo on blog")),f=HZ.utils.Html.escapeHtmlEntities(_hgt("Print Photo"));b.append(HZ.utils.Html.template(d,{EMBED_TITLE:a,PRINT_TITLE:f})),b.on("click",".hzi-Embed",HZ.lb.plugins.SpaceActions.handleEmbed),b.on("click",".hzi-Print",HZ.lb.plugins.SpaceActions.handlePrint);var g=HZ.lb.Config.socialListConfig||[],h=HZ.lb.SocialShareButtons.map,i=b.find(".shelf");g.forEach(function(a){var b=h[a];if(b){var c=b.fontClass,d=b.compId,f=b.name,g=HZ.utils.Html.escapeHtmlEntities(_hgt("Share a link on {socialPlatform}",{socialPlatform:f})),j=$(HZ.utils.Html.template(e,{CSS_CLASS:c,COMP_ID:d,TITLE_ATTR:g})).appendTo(i);j.click(this.handleShareButtonClick.bind(this,b.platform))}}.bind(this)),c=!0}},this.handleShareButtonClick=function(b,c){var d=a.getCurrentSpace();HZ.spaceActions.Share.openShareWindowForSpace(b,d.id),c.stopPropagation()}},HZ.lb.plugins.AdminMenu=function(){var a,b,c,d,e,f=HZ.houseUtils.Permissions,g=HZ.lb.plugins.SpaceActions,h=HZ.utils.Html.escapeHtmlEntities(_hgt("Edit Image Tags")),i=HZ.utils.Html.escapeHtmlEntities(_hgt("Toggle Edit Mode")),j='<div id="lbAdminMenu">									<a class="btn med tint tag" title="'+h+'" href="javascript:;">										<i class="hzi-font hzi-Add-Tag icon"></i>									</a>									<a id="lbEditButton" class="btn med tint edit" compid="lbEditButton" title="'+i+'" href="javascript:;">										<i class="hzi-font hzi-Edit icon"></i>									</a>								</div>';this.setOwner=function(d){a=d;var e=$(j);c=e,e.find("#lbEditButton").click($.proxy(g.handleEdit,g)),e.find(".hzi-Add-Tag").parent().click($.proxy(g.handleImageTag,g)),b=e.get(0),a.addActionItem(b,HZ.lb.ActionBar.ACTION_BAR_RIGHT)},this.imageChanged=function(){this.updateDisplay()},this.imageDataUpdated=function(){this.updateDisplay()},this.updateDisplay=function(){var b=a.getCurrentSpace();b&&(d=!!f.hasPermission(b,f.CAN_EDIT_HOUSE),e=!!f.hasPermission(b,f.CAN_EDIT_IMAGE_TAGS)),c.toggleClass("can-edit",d),c.toggleClass("can-tag",e)}},HZ.lb.plugins.BrowserHistoryManager=new function(){var a,b,c,d=!0,e=!1,f=!0;this.setOwner=function(c){a=c,b=window.history.location||window.location},this.setEnabled=function(a){d=a},this.updateHistory=function(){var c,d=a.getCurrentSpace(),e=history.state;if(f||e&&e.spaceId!=d.id){for(var g=a.getContextStack(),h=[],i=0;i<g.length;i++)h.push(g[i].getName());var j=HZ.utils.Styles.getStyleUrl(d.s),k=HZ.data.Categories.getCategoryById(d.cat),l=HZ.data.Users.get(d.ow),m=null;null!=l&&(m=l.d);var n=HZ.utils.PageTitles.getViewSpacePageTitle(d.t,j,k?k.name:null,d.ma,m),o=HZ.utils.Links.getSpaceLinkWithSEO(d.id),p=b&&0==b.protocol.indexOf("https");p&&(o=o.replace("http://","https://")),a.isEditMode()&&(o+="#lb-edit"),c={spaceId:d.id,contextName:h},f?(a.isViewSpace()?history.replaceState(c,n,o):history.pushState(c,n,o),f=!1):history.replaceState(c,n,o)}},this.imageChanged=function(){d&&this.updateHistory()},this.lightboxLoaded=function(){d&&(c=b.href,e=!0,$(window).on("popstate",function(d){var f=d.state;e&&(b.href==c?a.hide():f&&f.spaceId!=a.getCurrentSpace().id&&a.reload(f.spaceId,f.contextName))}))},this.lightboxUnloaded=function(){d&&(e=!1,f=!0,b.href!=c&&history.back())}},HZ.lb.plugins.TrackingManager=function(){var a,b,c;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbTrackingIframe",a.addImageLayer(b)},this.imageChanged=function(){var b=!0;switch(HZ.lb.Config.TRACK_IMPRESSIONS){case!1:b=!1;break;case"CONTEXT_ONLY":b=a.getContextStack().length>1}b&&!a.isEditMode()&&this.sendImpressionReport()},this.sendImpressionReport=function(){c&&(c.stop&&c.stop(),b.removeChild(c));var d=a.getCurrentSpace(),e=(HZ.utils.Styles.getStyleUrl(d.s),HZ.data.Categories.getCategoryById(d.cat),HZ.utils.Links.getSpaceLinkWithSEO(d.id)),f=window.location&&0==window.location.protocol.indexOf("https");f&&(e=e.replace("http://","https://")),e+="?lightbox=on",c=document.createElement("iframe"),c.src=e,b.appendChild(c);var g;if(d&&HZ.data.HouzzImpTracking.get(d.id)&&(g=HZ.data.HouzzImpTracking.get(d.id),g&&g.length>0))for(var h=0;h<g.length;h++){var i=g[h];i&&i.length>0&&HZ.lb.Utils.registerTrackingUrl(i,d.id)}}},HZ.lb.plugins.AlternativeImages=new function(){var a,b,c,d=60,e='<img s="%SPACE_ID%" width="%WIDTH%" height="%HEIGHT%" class="%CLASS%" src="%SRC%" />';this.setOwner=function(d){a=d,b=$('<div class="alt-images">'),c=b.get(0),a.addImageControl(c),b.click(this.handleThumbClicked.bind(this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){if(!a.isEditMode()){var c,f,g=a.getCurrentSpace(),h=g.id,i=g.iids,j="",k=i.length,l=k>0,m=1==k;if(l){j="";for(var n=0;k>n;n++){f=HZ.utils.Links.getSpaceImageUrl(h,d,d,null,null,n),c=0==n?"selected":"",m&&(c+=" hide");var o={SPACE_ID:h,INDEX:n,WIDTH:d,HEIGHT:d,CLASS:c,SRC:f};j+=HZ.utils.Html.template(e,o)}}b.html(j),b.css("top",-b.parent().height()/2+"px")}},this.handleThumbClicked=function(a){var c=$(a.target),d=c.index();$.isNumeric(d)&&(b.find("img").removeClass("selected"),c.addClass("selected"),HZ.lb.plugins.ImageViewer.setActiveSpaceImageIndex(d))}},HZ.lb.plugins.Comments=function(){function a(){var a,c,e="",f="",g=b.getCurrentSpace(),h=g.bc;if(g&&g.fullyLoaded&&h>0){var i=g.bcf,j=b.isPalette();if(g.commentsLoaded)if(c=HZ.data.Comments.get(g.id)){for(var k in c){a=c[k];for(var l=0;a&&l<a.length;l++){var m=a[l],n=m.c,o=HZ.utils.Links.getGalleryLink(m.gid),p=m.title,q={tag:"a",attr:{href:o,target:"_blank"}};f+="<div class='commentsItem'>",f+="<div class='commentsItemUser'>"+HZ.ui.render.User.getUserImageHtml(m.uid,!0)+"</div>",f+="<div class='commentsItemText text-s'><small class='text-xs' scopeid='idbk_view'>"+_hgt("Added to <t1>{galleryTitle}</t1>:",{t1:q,galleryTitle:p})+'</small><br>"'+n+'"</div>',f+="</div>"}}f&&(e="<div class='text-m text-bold'>",e+=g.prod?_hgtp("","This Product was added to {ideabookCount} ideabook:","This Product was added to {ideabookCount} ideabooks, including:",h,{ideabookCount:i}):j?_hgtp("","This Palette was added to {ideabookCount} ideabook:","This Palette was added to {ideabookCount} ideabooks, including:",h,{ideabookCount:i}):_hgtp("","This Photo was added to {ideabookCount} ideabook:","This Photo was added to {ideabookCount} ideabooks, including:",h,{ideabookCount:i}),e+="</div>",e+="<div class='commentsList'>"+f+"</div>")}else e+="<div class='text-m text-bold' style='margin-bottom:15px;'>",e+=g.prod?_hgtp("","This Product was added to {ideabookCount} ideabook.","This Product was added to {ideabookCount} ideabooks.",h,{ideabookCount:i}):j?_hgtp("","This Palette was added to {ideabookCount} ideabook.","This Palette was added to {ideabookCount} ideabooks.",h,{ideabookCount:i}):_hgtp("","This Photo was added to {ideabookCount} ideabook.","This Photo was added to {ideabookCount} ideabooks.:",h,{ideabookCount:i}),e+="</div>";else e+="<div class='text-m text-bold' style='margin-bottom:15px;'>",e+=g.prod?_hgtp("","This Product was added to {ideabookCount} ideabook.","This Product was added to {ideabookCount} ideabooks.",h,{ideabookCount:i}):j?_hgtp("","This Palette was added to {ideabookCount} ideabook.","This Palette was added to {ideabookCount} ideabooks.",h,{ideabookCount:i}):_hgtp("","This Photo was added to {ideabookCount} ideabook.","This Photo was added to {ideabookCount} ideabooks.",h,{ideabookCount:i}),e+=" <a href='javascript:;' class='loadComments text-bold text-s icon-wrap'>"+_hgt("More")+"<span class='more-icon'></span></a>",e+="</div>"}d.innerHTML=e}var b,c,d,e=!1,f=HZ.lb.Config.contentGroupIds.DISCUSSION;this.setOwner=function(a){b=a,c=$('<section id="lbComments" class="lbInfoBox separator trackMe"></section>'),d=c.get(0),b.addInfoBoxToContentGroup(d,"comments",f),c.click($.proxy(this.handleDivClicked,this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=b.getCurrentSpace();e=c.commentsLoaded,a()},this.handleDivClicked=function(c){if(!e){var d=b.getCurrentSpace();d.commentsLoaded?(a(),b.scrollToSelector("#lbComments")):this.loadComments(!0)}},this.loadComments=function(c){var d=a.bind(this);c&&(d=function(){a(),b.scrollToSelector("#lbComments")}.bind(this)),HZ.lb.plugins.SpaceDataLoader.loadSpaceBuzz(d)}},HZ.lb.plugins.PaletteSourcePhoto=function(){var a,b,c,d=HZ.lb.Config.contentGroupIds.OVERVIEW;this.setOwner=function(c){a=c,b=$('<section id="lbPaletteSourcePhoto" class="lbInfoBox separator"></section>')[0],a.addInfoBoxToContentGroup(b,"paletteSourcePhoto",d),$(b).click(this.handleDivClicked)},this.imageChanged=function(){var d,e=a.getCurrentSpace(),f=142;if(a.isPalette()){if($(b).closest(".column").addClass("o-visible"),c&&(d=c.id),c=HZ.data.ColorPaletteSource.get(e.id),c&&c.id>0&&c.id!=d){var g="",h=HZ.utils.Links.getSpaceImageUrl(c.id,f,f);g+="<div class='sourcePhotoContainer'>",g+="<div class='title text-s text-bold mbm'>",g+="<a class='sourcePhoto' target='_blank' href='"+c.u+"'>",g+=_hgt("Colors from this space"),g+="<span class='more-icon'></span>",g+="</a>",g+="</div>",g+="<div id='spaceImage'>",g+="<img width='"+f+"' height='"+f+"' s='"+c.id+"' i='0' class='rowFirst' src='"+h+"'>",g+="<div class='title' s='"+c.id+"' i='0'>"+c.t+"</div>",g+="</div>",g+="</div>",b.innerHTML=g}}else c=null,b.innerHTML=""},this.imageDataUpdated=function(){this.imageChanged()},this.handleDivClicked=function(b){var d=$(b.target),e=a.getCurrentSpace();if(d.attr("s")||(d=d.parent("div")),d.attr("s")){var f=d.attr("s"),g=d.attr("i");if(c){var h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=c.id;var i=new HZ.lb.Context("palette_source_photo_"+e.id,HZ.lb.Config.CONTEXT_TYPE_PALETTE_SOURCE_PHOTO,h,[c.id],1,g+1,-1);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.ColorPickerCTA=function(){var a,b,c,d,e,f=HZ.lb.Config.contentGroupIds.OVERVIEW,g=_hgt("Show Paint Colors"),h=_hgt("Hide Paint Colors"),i=_hgt("Sponsored by:"),j='<div class="row trackMe" objid="%SPACE_ID%"><div class="col-xs-6"><button class="btn btn-default btn-block js-cta btn-color-picker-cta" compid="lb_color_picker_cta"><i class="color-picker-icon"></i><span class="color-picker-btn-label">%BUTTON_LABEL%</span></button></div><div class="col-xs-6"><p class="text-xs sponsored">%SPONSORED_LABEL%</p><p class="color-picker-sponsor-logo %SPONSOR_CSS_CLASS%"></p></div></div>';this.setOwner=function(e){a=e,b=$('<section class="lbInfoBox color-picker-cta separator"></section>'),c=$('<section class="lbInfoBox color-picker-cta"></section>'),d=b.add(c),d.on("click",".js-cta",this.handleCtaClick.bind(this)),d.on("click",".js-close",this.handleCloseClick.bind(this)),a.addInfoBoxToContentGroup(b.get(0),"colorPickerCTA",f),a.addInfoBoxToContentGroup(c.get(0),"colorPickerCTA2",HZ.lb.Config.contentGroupIds.COLOR_PICKER)},this.imageChanged=function(){var b=a.getCurrentSpace(),c=HZ.data.ColorPickerAd.get(b.id);if(d.empty().addClass("hidden"),c&&c.mft&&!a.isFullPageAd()){d.removeClass("hidden");var f=c.mft;d.append(HZ.utils.Html.template(j,{SPACE_ID:b.id,BUTTON_LABEL:g,SPONSORED_LABEL:i,SPONSOR_CSS_CLASS:f})),HZ.lb.Utils.registerTrackingUrl(c.impTrkLink,b.id)}e=d.find(".js-cta")},this.lightboxModeChanged=function(){var b=e.find(".color-picker-btn-label");a.isColorPicking()?(e.removeClass("js-cta").addClass("js-close"),b.text(h)):(e.removeClass("js-close").addClass("js-cta"),b.text(g))},this.imageDataUpdated=function(){this.imageChanged()},this.handleCtaClick=function(b){a.enterColorPickerMode(),a.setCurrentContentGroupIndex(HZ.lb.Config.spaceContentGroupIds.indexOf(HZ.lb.Config.contentGroupIds.COLOR_PICKER)),a.focusCurrentContentGroup()},this.handleCloseClick=function(b){a.exitColorPickerMode(),a.animateScrollTo(0)}},HZ.lb.plugins.ColorPicker=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=HZ.lb.Config.contentGroupIds.COLOR_PICKER,x=5,y=210,z=70,A=20,B=30,C=(y+B)/2+40,D=z+A,E='<div class="trackMe js-color-picker-info" scopeid="lb_color_picker" objid="%SPACE_ID%"><ul class="list-unstyled row mtm">%SWATCHES%</ul><div class="row"><p class="col-xs-12"><button class="btn btn-primary med btn-block color-picker-buy" compid="lb_buy_palette_samples">%BUY_LABEL%</button></p><p class="col-xs-6"><button class="btn btn-secondary med btn-block color-picker-save" compid="lb_save_palette_to_ibk"><i class="hzi-font hzi-Add-Photo-Button icon"></i><span class="text-s"> %SAVE_LABEL%</span></button></p><p class="col-xs-6"><button class="btn btn-secondary med btn-block color-picker-share" compid="lb_share_palette"><i class="hzi-font hzi-LB-Share icon"></i><span class="text-s"> %SHARE_LABEL%</span></button></p></div>%AD_HTML%</div>',F='<div class="row mbm"><div class="col-xs-2"><div class="color-wheel"></div></div><div class="col-xs-10"><p class="text-bold mtl">%TITLE%</p></div></div>',G='<div class="row ptm"><div class="color-picker-sponsorship"><div class="col-xs-3"><p class="text-xs">%SPONSORED_LABEL%</p></div><div class="col-xs-9"><p class="color-picker-sponsor-logo %SPONSOR%"></p></div></div></div>',H='<li class="color-picker-swatch"><div class="%SWATCH_CLASS%"><div class="color-swatch" style="background-color:%HEX%;"></div></div><div class="%INFO_CLASS%"><p class="color-name">%TITLE%</p><p class="color-cta"><a class="text-primary text-nowrap color-picker-get-paint" href="javascript:;">%CTA% <i class="more-icon"></i></a></p></div></li>',I='<div class="color-picker-marker" dragable="false">%ARROWS%<i class="marker-crosshair" style="background-color:%BG_COLOR%;"></i><div class="marker-info-bubble"><ul class="list-unstyled text-right row">%SWATCH%</ul><div class="info-bubble-tip"></div></div></div>',J='<div class="anim-arrows"><i class="marker-crosshair-anim"></i><i class="marker-crosshair-anim"></i><i class="marker-crosshair-anim"></i></div>',K=_hgt("This Room's Paint Colors"),L=_hgt("Sponsored by:"),M=_hgt("Buy Samples"),N=_hgt("Save Palette"),O=_hgt("Share Palette"),P=_hgt("Get this paint");this.setOwner=function(f){a=f,b=$(document),c=$('<section class="lbInfoBox color-picker-info"></section>'),a.addInfoBoxToContentGroup(c.get(0),"colorPickerInfo",w),e=a.getNodeByContentGroupId(w),d=$('<div class="color-picker-markers"></div>'),a.addLbImageLayer(d.get(0)),c.on("mouseenter mouseleave",".color-picker-swatch",this.handleSwatchHover.bind(this)).on("click",".color-picker-swatch:not(.current)",this.handleSwatchClick.bind(this)).on("click",".color-picker-swatch .color-picker-get-paint",this.handleGetPaintClick.bind(this)).on("click",".color-picker-buy",this.handleBuySamplesClick.bind(this)).on("click",".color-picker-save",this.handleSaveClick.bind(this)).on("click",".color-picker-share",this.handleShareClick.bind(this)),d.on("mouseenter mouseleave",".color-picker-marker:not(.current)",this.handleSwatchHover.bind(this)).on("click",".color-picker-marker .color-picker-get-paint",this.handleGetPaintClick.bind(this)),b.on("mousedown",".color-picker-marker .marker-crosshair",this.handleColorMarkerDragStart.bind(this))},this.imageChanged=function(){if("undefined"!=typeof ColorAnalyzer){g=0,n=[],o=[],q=[],e.addClass("no-content"),c.addClass("hidden"),k=k?k:new ColorAnalyzer(HZ.lb.Config.STATIC_URL.replace(/^http:/,"")),k.reset(),c.empty(),d.empty();var b=a.getCurrentSpace(),f=HZ.data.ColorPickerAd.get(b.id),h=f&&f.mft;h&&(e.removeClass("no-content"),c.removeClass("hidden"),c.append('<div id="#placeholders"></div>'));var i=a.getImageBounds();v={xMin:0,xMax:i.w,yMin:0,yMax:i.h}}else HZ.lb.Utils.loadColorPickerResources(this.imageChanged.bind(this))},this.lightboxModeChanged=function(){a.isColorPicking()&&(o.length||this.analyzeCurrentImage())},this.analyzeCurrentImage=function(){var b=a.getCurrentSpace(),c=a.isFullPageAd();if(b&&!c&&!l){var d=HZ.data.ColorPickerAd.get(b.id),e=d&&d.mft;if(e){f=d.adHtml,p=d.mft,m=$("<img>").attr("src",a.getImageData().src),this.calculateImageScale();var g=m.get(0);l=!0,k.getColors(g,this.colorAnalyzerGetColorsCallback.bind(this))}}},this.currentContentGroupChanged=function(){o.length?a.getCurrentContentGroupId()==w?a.enterColorPickerMode():a.exitColorPickerMode():a.getCurrentContentGroupId()==w&&this.analyzeCurrentImage()},this.colorAnalyzerGetColorsCallback=function(a,b){l=!1,a&&b&&(n=a,o=b,HZ.ajaz.Services.getManufacturerColors(a,p).then(this.handleManufacturerColorsResponse.bind(this)))},this.handleManufacturerColorsResponse=function(a){a.success&&"true"==a.success&&(q=[],a.palette.forEach(function(a){q.push(a[0])}),this.calculateImageScale(),this.renderAdInfo(),this.renderImageMarkers(),this.setSelectedSwatchIndex(g))},this.renderAdInfo=function(){var b={SPACE_ID:a.getCurrentSpace().id,HEADER:this.renderHeader(),SPONSORSHIP:this.renderSponsorship(),SWATCHES:this.renderSwatchList(),BUY_LABEL:M,SAVE_LABEL:N,SHARE_LABEL:O,AD_HTML:f};c.find(".js-color-picker-info").remove(),c.append(HZ.utils.Html.template(E,b))},this.renderHeader=function(){var a=HZ.utils.ColorPicker.getPaintManufacturerDisplayName(p),b={TITLE:K,SPONSOR:a};return HZ.utils.Html.template(F,b)},this.renderSponsorship=function(){var a={SPONSORED_LABEL:L,SPONSOR:p};return HZ.utils.Html.template(G,a)},this.renderSwatchList=function(){var a=[],b=this.renderSwatch.bind(this);return q.forEach(function(c){c&&a.push(b(c))}),a.join("")},this.renderSwatch=function(a){var b=a.name.toLowerCase(),c=a.code,d=HZ.utils.Color.rgbToHex(a.red,a.green,a.blue),e={HEX:d,TITLE:b+" "+c,CTA:P,SWATCH_CLASS:"col-xs-2",INFO_CLASS:"col-xs-10"};return HZ.utils.Html.template(H,e)},this.renderImageMarkers=function(){d.empty();for(var a=Math.min(o.length,q.length,x),b=0;a>b;b++){var c=q[b];d.append(this.renderImageMarker(c,b))}this.positionImageMarkers()},this.renderImageMarker=function(a,b){var c="rgb("+[a.red,a.green,a.blue].join(",")+")",d=a.name.toLowerCase(),e=a.code,f=HZ.utils.Color.rgbToHex(a.red,a.green,a.blue),g={HEX:f,TITLE:d+" "+e,CTA:P,SWATCH_CLASS:"col-xs-3",INFO_CLASS:"col-xs-9"},h=HZ.utils.Html.template(H,g),i=0==b?J:"";return HZ.utils.Html.template(I,{BG_COLOR:c,SWATCH:h,ARROWS:i})},this.positionImageMarkers=function(){var b=a.getImageBounds(),c=this.positionMarkerInfo.bind(this);d.css({top:b.y,left:b.x,width:b.w,height:b.h}),d.find(".color-picker-marker").each(function(a,b){var d=$(b),e=o[a];d.css({top:e.y*r,left:e.x*r}),c(d)})},this.positionMarkerInfo=function(b){var c=parseInt(b.css("top")),d=parseInt(b.css("left")),e=a.getImageBounds();b.removeClass("bubble-left bubble-right bubble-bottom"),C>d?b.addClass("bubble-right"):d>e.w-C&&b.addClass("bubble-left"),D>c&&b.addClass("bubble-bottom")},this.handleSwatchClick=function(a){this.setSelectedSwatchIndex($(a.currentTarget).index())},this.handleSwatchHover=function(a){var b=$(a.currentTarget).index();switch(a.type){case"mouseenter":this.setHighlightedSwatchIndex(b);break;case"mouseleave":this.setHighlightedSwatchIndex(null)}},this.handleColorMarkerDragStart=function(a){var c=$(a.target).closest(".color-picker-marker").addClass("dragging");d.addClass("dragging"),i=c.index(),this.setSelectedSwatchIndex(i);var e=parseInt(c.css("top")),f=parseInt(c.css("left")),g=m.get(0);return s={w:g.naturalWidth,h:g.naturalHeight},j=this.getPointRGB(f,e),u={top:e,left:f},t={x:a.pageX,y:a.pageY},b.on("mouseup.colorPicker",this.onColorMarkerDragEnd.bind(this)),b.on("mousemove.colorPicker",this.onColorMarkerDragMove.bind(this)),a.preventDefault(),!1},this.onColorMarkerDragMove=function(a){var b=a.pageX-t.x,c=a.pageY-t.y,e=Math.max(v.yMin,Math.min(v.yMax,u.top+c)),f=Math.max(v.xMin,Math.min(v.xMax,u.left+b)),g=$(d.children().get(i));g.css({top:e,left:f});var h=this.getPointRGB(f,e);return j=h,g.find(".marker-crosshair").css({backgroundColor:"rgb("+[h.r,h.g,h.b].join(",")+")"}),o[i]={x:Math.ceil(f/r),y:Math.ceil(e/r)},this.positionMarkerInfo(g),a.preventDefault(),!1},this.onColorMarkerDragEnd=function(a){b.off(".colorPicker"),d.removeClass("dragging"),$(d.children().get(i)).removeClass("dragging"),this.getManufacturerPaintForRGB(i,j),i=null,j=null},this.getPointRGB=function(a,b){var c=Math.ceil(b/r),d=Math.ceil(a/r),e=k.imageData.data,f=4*(s.w*c+d),g=e[f],h=e[f+1],i=e[f+2];return{r:g,g:h,b:i}},this.getManufacturerPaintForRGB=function(a,b){var e=[[b.r,b.g,b.b]],f=$(d.children().get(a)),g=$(c.find(".color-picker-swatch").get(a)),h=this.renderImageMarker.bind(this),i=this.renderSwatch.bind(this);HZ.ajaz.Services.getManufacturerColors(e,p).then(function(b){if(b.success&&"true"==b.success&&b.palette&&b.palette.length){var c=b.palette[0][0];q[a]=c;var d=$(h(c)).attr("class",f.attr("class")).attr("style",f.attr("style"));f.replaceWith(d);var e=$(i(c)).attr("class",g.attr("class"));g.replaceWith(e)}})},this.handleGetPaintClick=function(a){var b=this.getClickedElementIndex(a),c=this.generateGetPaintUrl(q[b]);this.navigateToAdvertiserSite(c)},this.handleBuySamplesClick=function(a){var b=this.generateSamplesUrl();this.navigateToAdvertiserSite(b)},this.getClickedElementIndex=function(a){var b;switch(a.delegateTarget){case d.get(0):b=".color-picker-marker";break;case c.get(0):b=".color-picker-swatch"}return $(a.target).closest(b).index()},this.generateGetPaintUrl=function(b){var c=HZ.data.ColorPickerAd.get(a.getCurrentSpace().id),d=[c.secondaryBuyLink];switch(p){case HZ.utils.ColorPicker.manufacturer.BEHR:case HZ.utils.ColorPicker.manufacturer.DULUX:case HZ.utils.ColorPicker.manufacturer.DULUX_AS:d.push("/?_BUY_="),d.push(b.code),b.color_family&&d.push("&_HUE_="+b.color_family);break;case HZ.utils.ColorPicker.manufacturer.V33:d.push("/?_BUY_="),d.push(HZ.utils.Color.toHex(b.red)),d.push(HZ.utils.Color.toHex(b.green)),d.push(HZ.utils.Color.toHex(b.blue))}return d.join("")},this.generateSamplesUrl=function(){var b=HZ.data.ColorPickerAd.get(a.getCurrentSpace().id),c=[b.buyLink];switch(p){case HZ.utils.ColorPicker.manufacturer.BEHR:c.push("/?_BUY_=");var d=[];q.forEach(function(a){d.push(a.code)}),c.push(d.join(","))}return c.join("")},this.handleSaveClick=function(b){if(HZ.data.CurrentSessionUser){var c=a.getCurrentSpace(),d=c.id;HZ.spaceActions.AddToIdeabookDialog.init(d),HZ.spaceActions.AddToIdeabookDialog.setColorPalette(q,p),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}else a.showLoginDialog()},this.handleShareClick=function(b){if(HZ.data.CurrentSessionUser){var c=a.getCurrentSpace(),d=c.id,e=m.get(0),f=HZ.utils.Links.getPaletteShareLink(d,q,o,p,e.naturalWidth,e.naturalHeight),g=HZ.utils.Links.getGenerateColorPaletteImageLink(q,p),h={type:43,referenceId:d,subject:_hgt("My color palette"),message:_hgt("Take a look at this {paintManufacturer} color palette I created on Houzz.",{paintManufacturer:HZ.utils.ColorPicker.getPaintManufacturerDisplayName(p)}),event:"scp",scopeId:"lightBoxColorPicker",allowShare:!0,mfr:p,colorPaletteShareLink:f,generateColorPaletteImageLink:g};HZ.dialogs.ShareColorPaletteDialog.prepare(h),a.showDialog(HZ.dialogs.ShareColorPaletteDialog)}else a.showLoginDialog()},this.setSelectedSwatchIndex=function(a){g=a,this.onSelectedSwatchIndexChanged()},this.onSelectedSwatchIndexChanged=function(){var a=c.find(".color-picker-swatch"),b=d.find(".color-picker-marker");a.add(b).removeClass("current"),$(a.get(g)).add(b.get(g)).addClass("current")},this.setHighlightedSwatchIndex=function(a){h=a,this.onHighlightedSwatchIndexChanged()},this.onHighlightedSwatchIndexChanged=function(){var a=c.find(".color-picker-swatch"),b=d.find(".color-picker-marker");a.add(b).removeClass("focused"),null!=h&&$(a.get(h)).add(b.get(h)).addClass("focused")},this.imageDataUpdated=function(){this.imageChanged()},this.calculateImageScale=function(){if(m){var b=m.get(0),c=b.naturalWidth,d=a.getImageBounds();r=d.w/c}else r=1},this.imageResized=function(){this.calculateImageScale(),this.positionImageMarkers()},this.navigateToAdvertiserSite=function(a){window.open(a,p)}},HZ.lb.plugins.ShoppingCart=function(){var a,b,c,d,e,f,g='<div id="lbCart" class="hidden"><a class="cart-info" title="%TITLE_ATTR%" href="%CART_URL%" target="_blank"><i class="hzi-font hzi-Cart"></i><span class="cart-count">%CART_COUNT%</span></a><div class="cart-preview"><div class="cart-loading"></div></div></div>';this.setOwner=function(b){a=b},this.lightboxLoaded=function(){if(b=HZ.lb.Config.isCheckoutEnabled){var a=HZ.data.cachedCartCount,h=this.formatCartCount(a),i={TITLE_ATTR:_hgt("View Your Shopping Cart"),CART_URL:HZ.utils.Config.viewShoppingCartUrl,CART_COUNT:h};c=$("#lbCart").length?$("#lbCart"):$(HZ.utils.Html.template(g,i)).appendTo($("#lbMainControls")),d=c.find(".cart-count"),e=c.find(".cart-preview"),f=c.find(".cart-loading"),HZ.cart.Actions.subscribeCartUpdate("lightbox",this.onCartUpdate.bind(this)),this.updateCartDisplay(a),c.hover(this.showCartPreview.bind(this))}},this.showCartPreview=function(){e.is(".loading, .loaded")||(e.addClass("loading"),HZ.ajaz.Services.Cart.getCartDetails(this.handleCartDetailsResponse.bind(this)))},this.handleCartDetailsResponse=function(a){this.updateCartPreviewDisplay(a.cartHeaderHTML),e.removeClass("loading").addClass("loaded")},this.onCartUpdate=function(a,b){"undefined"!=typeof b.cartCount&&this.updateCartDisplay(b.cartCount,b.cartHeaderHTML)},this.updateCartDisplay=function(a,e){a>0&&b?(d.html(this.formatCartCount(a)),e&&this.updateCartPreviewDisplay(e),c.removeClass("hidden")):c.addClass("hidden")},this.updateCartPreviewDisplay=function(a){e.html(a)},this.formatCartCount=function(a){return a>9?"9+":a}},HZ.lb.plugins.PPCAdInfoRenderer=new function(){var a,b=32,c=8;this.setOwner=function(b){a=b},this.imageChanged=function(){},this.imageDataUpdated=function(){},this.writeContent=function(d,e,f,g){var h,i=$(e);if(!a.isEditMode()&&(d&&(h=HZ.data.PPCAds.get(d.id)),h&&!(a.isFeaturedGalleryContext()||a.isFullPageAd()||a.isProductAd()||a.isPalette()))){if(h.products&&h.products.length>0){for(var j=HZ.lb.Utils.calculateThumbWidth(a.getContentBox().w-b,f,c),k=j,l=j,m=[],n=Math.min(h.products.length,g),o=0;n>o;o++){var p=h.products[o],q=p.sid,r=HZ.utils.Links.getSpaceImageUrl(q,k,l,1),s=p.tlink,t=p.p;HZ.utils.Html.template(HZ.lb.Templates.THUMB_META_TEMPLATE,{PRICE:t});m.push({SPACE_ID:q,CLICK_URL:s,CLASS:"",INDEX:o,IMG_SRC:r,WIDTH:k,HEIGHT:l,OVERLAY_TEXT:_hgt("Visit Store"),PPC_INFO:t})}i.append(HZ.lb.RenderUtils.renderSectionHeader(_hgt("Sponsored Products"))),i.append(HZ.lb.RenderUtils.renderThumbGrid(f,m,"",HZ.lb.Templates.PPC_THUMB,"lb_ppc_products"))}h.impTrkLink&&HZ.lb.Utils.registerTrackingUrl(h.impTrkLink,d.id)}}},HZ.lb.plugins.ContentFooter=function(){var a,b="copyrightNotice",c="termsOfUse",d="privacyPolicy",e={},f=[c,d,b],g='<div class="row trackMe text-center"><div class="col-xs-8 col-xs-offset-2"><ul class="list-unstyled list-inline">%FOOTER_ITEMS%</ul>';this.setOwner=function(b){a=b},this.lightboxLoaded=function(){var h=a.getContentFooter();if(h.is(":empty")&&a.isViewSpace()){var i=[],j=$.extend(!0,{},HZ.lb.Config.footerData);f.forEach(function(a){e[a]=HZ.lb.Config.footerData[a],delete j[a]}),Object.keys(j).forEach(function(a){var b=j[a],c=$("<li></li>").append($(HZ.utils.Html.template(HZ.lb.Templates.BLANK_LINK,{LINK_URL:b.url,TITLE_ATTR:b.label,LINK_TEXT:b.label})).attr("compid",b.compId).addClass("text-xs"));i.push($("<div>").append(c).html())});var k=e[c],l=e[d],m={tag:"a",attr:{href:k.url,title:k.label,target:"_blank",compid:k.compid,"class":"text-xs"}},n={tag:"a",attr:{href:l.url,title:l.label,target:"_blank",compid:l.compid,"class":"text-xs"}},o=$("<li>");o.append(_hgt("<t1>Terms</t1> & <t2>Privacy</t2>",{t1:m,t2:n})).append("&nbsp;").append(e[b].label),i.push($("<div>").append(o).html()),h.append(HZ.utils.Html.template(g,{FOOTER_ITEMS:i.join("")}))}}},HZ.lb.plugins.Analytics=function(){var a,b,c,d,e=30;this.setOwner=function(b){a=b,this.reset()},this.reset=function(){c={scroll:{}},b=null,d=0},this.imageChanged=function(){var c=a.getCurrentSpace(),d=c.id,e=!0;if(b!=d){switch(HZ.lb.Config.TRACK_IMPRESSIONS){case!1:e=!1;break;case"CONTEXT_ONLY":e=a.getContextStack().length>1}e&&!a.isEditMode()&&this.sendImpressionReport()}b=d},this.sendImpressionReport=function(){var c=a.getContextStack(),d=c.length>1,e=a.getContext(),f={isChild:d};$.extend(!0,f,e.getDescriptor()),f.bd&&!$.isPlainObject(f.bd)&&(f.bd=JSON.parse(f.bd));var g=e.getCursorPosition(),h={spaceId:a.getCurrentSpace().id,lbType:a.isProduct()?"product":"photo",ctx:f,idx:g};b?h.previousSpaceId=b:h.isFirstLightbox=!0,HZ.utils.Logger.sendEventLogLightweight("lb_impression",h)},this.imageDataUpdated=function(){},this.lightboxScroll=function(){var b=a.getContentScrollTop();if(b>d&&b>e){var f=a.getCurrentSpace().id;c.scroll[f]||(c.scroll[f]=this.sendScrollReport())}else d=b},this.sendScrollReport=function(){var b={spaceId:a.getCurrentSpace().id,type:a.isProduct()?"product":"space"};return HZ.utils.Logger.sendEventLogLightweight("lb_scroll",b)},this.lightboxLoaded=function(){this.reset()},this.lightboxUnloaded=function(){this.reset()}};var enableTagBoundingBox=HZ.lb.Config.enableTagBoundingBox,isViewSpace=HZ.lb.Config.isViewSpace,isCheckoutEnabled=HZ.lb.Config.isCheckoutEnabled,promotePhotoRelatedProd=HZ.lb.Config.promotePhotoRelatedProd,tuckProjectSpaces=HZ.lb.Config.tuckProjectSpaces;lightbox.addPlugin(new HZ.lb.plugins.Analytics),lightbox.addPlugin(HZ.lb.plugins.PhotoRelatedProducts),lightbox.addPlugin(HZ.lb.plugins.PhotoRecommendations),lightbox.addPlugin(HZ.lb.plugins.PPCAdInfoRenderer),lightbox.addPlugin(HZ.lb.plugins.CommonSpecificationRenderer),lightbox.addPlugin(HZ.lb.plugins.SpaceActions),lightbox.addPlugin(new HZ.lb.plugins.ProductInfo),lightbox.addPlugin(new HZ.lb.plugins.MPProductVariation),lightbox.addPlugin(new HZ.lb.plugins.ProductIdeabookComment),lightbox.addPlugin(new HZ.lb.plugins.PreSalesPhone),lightbox.addPlugin(new HZ.lb.plugins.ProductDescription),lightbox.addPlugin(new HZ.lb.plugins.ProductSpecification),isCheckoutEnabled&&(HZ.lb.Config.enableProductCollections&&lightbox.addPlugin(new HZ.lb.plugins.ProductCollections),lightbox.addPlugin(new HZ.lb.plugins.CoBuyProducts),lightbox.addPlugin(new HZ.lb.plugins.ProductRelatedProducts),lightbox.addPlugin(new HZ.lb.plugins.ProductRecommendedProducts),lightbox.addPlugin(new HZ.lb.plugins.VisuallySimilarProducts)),lightbox.addPlugin(new HZ.lb.plugins.ProductsInRoom),lightbox.addPlugin(new HZ.lb.plugins.ProductReviews),lightbox.addPlugin(new HZ.lb.plugins.ProductListingsInfo),lightbox.addPlugin(new HZ.lb.plugins.SpaceShareButtons),lightbox.addPlugin(new HZ.lb.plugins.SpaceAuthorInfo),
lightbox.addPlugin(new HZ.lb.plugins.SpaceInfo),tuckProjectSpaces&&lightbox.addPlugin(new HZ.lb.plugins.ProjectInfo),lightbox.addPlugin(new HZ.lb.plugins.LocalProsContact),lightbox.addPlugin(new HZ.lb.plugins.ProductAdInfo),isCheckoutEnabled&&(isViewSpace||promotePhotoRelatedProd)&&lightbox.addPlugin(new HZ.lb.plugins.SpaceRelatedProducts),tuckProjectSpaces||lightbox.addPlugin(new HZ.lb.plugins.ProjectInfo),lightbox.addPlugin(new HZ.lb.plugins.ColorPickerCTA),isCheckoutEnabled&&(isViewSpace||promotePhotoRelatedProd||lightbox.addPlugin(new HZ.lb.plugins.SpaceRelatedProducts),lightbox.addPlugin(new HZ.lb.plugins.SpacePPCAdInfo)),lightbox.addPlugin(new HZ.lb.plugins.SpaceRecommendations),lightbox.addPlugin(new HZ.lb.plugins.RelatedPhotos),lightbox.addPlugin(new HZ.lb.plugins.PaidProInfo),lightbox.addPlugin(new HZ.lb.plugins.MarketPlaceAds),lightbox.addPlugin(HZ.lb.plugins.Gtm),lightbox.addPlugin(new HZ.lb.plugins.AdminMenu),enableTagBoundingBox?lightbox.addPlugin(new HZ.lb.plugins.ImageTags2):lightbox.addPlugin(HZ.lb.plugins.ImageTags),lightbox.addPlugin(new HZ.lb.plugins.ProductRecommendations),lightbox.addPlugin(new HZ.lb.plugins.PaletteSourcePhoto),lightbox.addPlugin(new HZ.lb.plugins.SpaceSpecification),lightbox.addPlugin(HZ.lb.plugins.QuestionsInfo),lightbox.addPlugin(new HZ.lb.plugins.Comments),lightbox.addPlugin(HZ.lb.plugins.AlternativeImages),lightbox.addPlugin(HZ.lb.plugins.ContextBreadcrumbs),lightbox.addPlugin(HZ.lb.plugins.BrowserHistoryManager),lightbox.addPlugin(new HZ.lb.plugins.ColorPicker),lightbox.addPlugin(new HZ.lb.plugins.ShoppingCart),lightbox.addPlugin(new HZ.lb.plugins.ContentTabs),lightbox.addPlugin(new HZ.lb.plugins.ContentFooter),lightbox.addPlugin(new HZ.lb.plugins.TrackClick),lightbox.addPlugin(new HZ.lb.plugins.TrackingManager);

window.hzmr.push("lightbox2.2Plugins:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightbox2.2Plugins.js  **************/
/************* Start jQ-AjaxFileUpload.js for locale en-US **************/
try {!function(a){a.fn.ajaxfileupload=function(b){var c={params:{},action:"",onStart:function(){console.log("starting upload"),console.log(this)},onComplete:function(a){console.log("got response: "),console.log(a),console.log(this)},onCancel:function(){console.log("cancelling: "),console.log(this)},valid_extensions:["gif","png","jpg","jpeg","tif","tiff"],submit_button:null},d=!1;return b&&a.extend(c,b),this.each(function(){var b=a(this);if(b.data("ajaxUploader-setup")!==!0){b.change(function(){d=!1,null==c.submit_button&&e()}),null==c.submit_button||c.submit_button.click(function(){d||e()});var e=function(){if(""==b.val())return c.onCancel.apply(b,[c.params]);var e=b.val().split(".").pop().toLowerCase();if("1"!=c.params.supportAllFiles&&-1==a.inArray(e,c.valid_extensions))c.onComplete.apply(b,[{status:!1,message:"The select file type is invalid. File must be "+c.valid_extensions.join(", ")+"."},c.params]);else{d=!0,g(b);var f=c.onStart.apply(b);f!==!1&&b.parent("form").submit()}};b.data("ajaxUploader-setup",!0);var f=function(b,e){var f,g=a(b).contents().find("body").text();try{f=a.parseJSON(a.trim(g))}catch(h){f=g}e.siblings().remove(),e.unwrap(),d=!1,c.onComplete.apply(e,[f,c.params])},g=function(b){var d="ajaxUploader-iframe-"+Math.round((new Date).getTime()/1e3);a("body").append('<iframe width="0" height="0" style="display:none;" name="'+d+'" id="'+d+'"/>'),a("#"+d).load(function(){f(this,b)}),b.wrap(function(){return'<form action="'+c.action+'" method="POST" enctype="multipart/form-data" target="'+d+'" />'}).after(function(){var a,b="";for(a in c.params)b+='<input type="hidden" name="'+a+'" value="'+c.params[a]+'" />';return b})}}})}}(jQuery);

window.hzmr.push("jQ-AjaxFileUpload:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jQ-AjaxFileUpload.js  **************/
/************* Start summernote.js for locale en-US **************/
try {!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d});var b,c="function"==typeof define&&define.amd,d=function(b){var c="Comic Sans MS"===b?"Courier New":"Comic Sans MS",d=a("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),e=d.css("fontFamily",c).width(),f=d.css("fontFamily",b+","+c).width();return d.remove(),e!==f},e={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(a.fn.jquery),isSupportAmd:c,hasCodeMirror:c?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:d,isW3CRangeSupport:!!document.createRange},f=function(){var b=function(a){return function(b){return a===b}},c=function(a,b){return a===b},d=function(a){return function(b,c){return b[a]===c[a]}},e=function(){return!0},f=function(){return!1},g=function(a){return function(){return!a.apply(a,arguments)}},h=function(a,b){return function(c){return a(c)&&b(c)}},i=function(a){return a},j=0,k=function(a){var b=++j+"";return a?a+b:b},l=function(b){var c=a(document);return{top:b.top+c.scrollTop(),left:b.left+c.scrollLeft(),width:b.right-b.left,height:b.bottom-b.top}},m=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b};return{eq:b,eq2:c,peq2:d,ok:e,fail:f,self:i,not:g,and:h,uniqueId:k,rect2bnd:l,invertObject:m}}(),g=function(){var b=function(a){return a[0]},c=function(a){return a[a.length-1]},d=function(a){return a.slice(0,a.length-1)},e=function(a){return a.slice(1)},g=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(b(e))return e}},h=function(a,b){for(var c=0,d=a.length;d>c;c++)if(!b(a[c]))return!1;return!0},i=function(b,c){return-1!==a.inArray(c,b)},j=function(a,b){return b=b||f.self,a.reduce(function(a,c){return a+b(c)},0)},k=function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},l=function(a,d){if(!a.length)return[];var f=e(a);return f.reduce(function(a,b){var e=c(a);return d(c(e),b)?e[e.length]=b:a[a.length]=[b],a},[[b(a)]])},m=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]&&b.push(a[c]);return b},n=function(a){for(var b=[],c=0,d=a.length;d>c;c++)i(b,a[c])||b.push(a[c]);return b},o=function(a,b){var c=a.indexOf(b);return-1===c?null:a[c+1]},p=function(a,b){var c=a.indexOf(b);return-1===c?null:a[c-1]};return{head:b,last:c,initial:d,tail:e,prev:p,next:o,find:g,contains:i,all:h,sum:j,from:k,clusterBy:l,compact:m,unique:n}}(),h=String.fromCharCode(160),i="\ufeff",j=function(){var b=function(b){return b&&a(b).hasClass("note-editable")},c=function(b){return b&&a(b).hasClass("note-control-sizing")},d=function(b){var c;if(b.hasClass("note-air-editor")){var d=g.last(b.attr("id").split("-"));return c=function(b){return function(){return a(b+d)}},{editor:function(){return b},editable:function(){return b},popover:c("#note-popover-"),handle:c("#note-handle-"),dialog:c("#note-dialog-")}}return c=function(a){return function(){return b.find(a)}},{editor:function(){return b},dropzone:c(".note-dropzone"),toolbar:c(".note-toolbar"),editable:c(".note-editable"),codable:c(".note-codable"),statusbar:c(".note-statusbar"),popover:c(".note-popover"),handle:c(".note-handle"),dialog:c(".note-dialog")}},k=function(a){return a=a.toUpperCase(),function(b){return b&&b.nodeName.toUpperCase()===a}},l=function(a){return a&&3===a.nodeType},m=function(a){return a&&/^BR|^IMG|^HR/.test(a.nodeName.toUpperCase())},n=function(a){return b(a)?!1:a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase())},o=k("LI"),p=function(a){return n(a)&&!o(a)},q=function(a){return!u(a)&&!r(a)&&!n(a)},r=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},s=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},t=k("BLOCKQUOTE"),u=function(a){return s(a)||t(a)||b(a)},v=k("A"),w=function(a){return q(a)&&!!D(a,n)},x=function(a){return q(a)&&!D(a,n)},y=k("BODY"),z=e.isMSIE?"&nbsp;":"<br>",A=function(a){return l(a)?a.nodeValue.length:a.childNodes.length},B=function(a){var b=A(a);return 0===b?!0:j.isText(a)||1!==b||a.innerHTML!==z?!1:!0},C=function(a){m(a)||A(a)||(a.innerHTML=z)},D=function(a,c){for(;a;){if(c(a))return a;if(b(a))break;a=a.parentNode}return null},E=function(a,c){c=c||f.fail;var d=[];return D(a,function(a){return b(a)||d.push(a),c(a)}),d},F=function(a,b){var c=E(a);return g.last(c.filter(b))},G=function(b,c){for(var d=E(b),e=c;e;e=e.parentNode)if(a.inArray(e,d)>-1)return e;return null},H=function(a,b){b=b||f.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.previousSibling;return c},I=function(a,b){b=b||f.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c},J=function(a,b){var c=[];return b=b||f.ok,function d(e){a!==e&&b(e)&&c.push(e);for(var f=0,g=e.childNodes.length;g>f;f++)d(e.childNodes[f])}(a),c},K=function(b,c){var d=b.parentNode,e=a("<"+c+">")[0];return d.insertBefore(e,b),e.appendChild(b),e},L=function(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a},M=function(b,c){return a.each(c,function(a,c){b.appendChild(c)}),b},N=function(a){return 0===a.offset},O=function(a){return a.offset===A(a.node)},P=function(a){return N(a)||O(a)},Q=function(a,b){for(;a&&a!==b;){if(0!==S(a))return!1;a=a.parentNode}return!0},R=function(a,b){for(;a&&a!==b;){if(S(a)!==A(a.parentNode)-1)return!1;a=a.parentNode}return!0},S=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},T=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},U=function(a,c){var d,e;if(0===a.offset){if(b(a.node))return null;d=a.node.parentNode,e=S(a.node)}else T(a.node)?(d=a.node.childNodes[a.offset-1],e=A(d)):(d=a.node,e=c?0:a.offset-1);return{node:d,offset:e}},V=function(a,c){var d,e;if(A(a.node)===a.offset){if(b(a.node))return null;d=a.node.parentNode,e=S(a.node)+1}else T(a.node)?(d=a.node.childNodes[a.offset],e=0):(d=a.node,e=c?A(a.node):a.offset+1);return{node:d,offset:e}},W=function(a,b){return a.node===b.node&&a.offset===b.offset},X=function(a){if(l(a.node)||!T(a.node)||B(a.node))return!0;var b=a.node.childNodes[a.offset-1],c=a.node.childNodes[a.offset];return b&&!m(b)||c&&!m(c)?!1:!0},Y=function(a,b){for(;a;){if(b(a))return a;a=U(a)}return null},Z=function(a,b){for(;a;){if(b(a))return a;a=V(a)}return null},$=function(a,b,c,d){for(var e=a;e&&(c(e),!W(e,b));){var f=d&&a.node!==e.node&&b.node!==e.node;e=V(e,f)}},_=function(b,c){var d=E(c,f.eq(b));return a.map(d,S).reverse()},aa=function(a,b){for(var c=a,d=0,e=b.length;e>d;d++)c=c.childNodes.length<=b[d]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[d]];return c},ba=function(a,b){if(l(a.node))return N(a)?a.node:O(a)?a.node.nextSibling:a.node.splitText(a.offset);var c=a.node.childNodes[a.offset],d=L(a.node.cloneNode(!1),a.node);return M(d,I(c)),b||(C(a.node),C(d)),d},ca=function(a,b,c){var d=E(b.node,f.eq(a));return d.length?1===d.length?ba(b,c):d.reduce(function(a,d){var e=L(d.cloneNode(!1),d);return a===b.node&&(a=ba(b,c)),M(e,I(a)),c||(C(d),C(e)),e}):null},da=function(a){return document.createElement(a)},ea=function(a){return document.createTextNode(a)},fa=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){var d,e,f=[];for(d=0,e=a.childNodes.length;e>d;d++)f.push(a.childNodes[d]);for(d=0,e=f.length;e>d;d++)c.insertBefore(f[d],a)}c.removeChild(a)}},ga=function(a,c){for(;a&&!b(a)&&c(a);){var d=a.parentNode;fa(a),a=d}},ha=function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var c=da(b);return a.style.cssText&&(c.style.cssText=a.style.cssText),M(c,g.from(a.childNodes)),L(c,a),fa(a),c},ia=k("TEXTAREA"),ja=function(b,c){var d=ia(b[0])?b.val():b.html();if(c){var e=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;d=d.replace(e,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),d=a.trim(d)}return d},ka=function(a){var b=a.val();return b.replace(/[\n\r]/g,"")};return{NBSP_CHAR:h,ZERO_WIDTH_NBSP_CHAR:i,blank:z,emptyPara:"<p>"+z+"</p>",isEditable:b,isControlSizing:c,buildLayoutInfo:d,isText:l,isPara:n,isPurePara:p,isInline:q,isBodyInline:x,isBody:y,isParaInline:w,isList:r,isTable:k("TABLE"),isCell:s,isBlockquote:t,isBodyContainer:u,isAnchor:v,isDiv:k("DIV"),isLi:o,isSpan:k("SPAN"),isB:k("B"),isU:k("U"),isS:k("S"),isI:k("I"),isImg:k("IMG"),isTextarea:ia,isEmpty:B,isEmptyAnchor:f.and(v,B),nodeLength:A,isLeftEdgePoint:N,isRightEdgePoint:O,isEdgePoint:P,isLeftEdgeOf:Q,isRightEdgeOf:R,prevPoint:U,nextPoint:V,isSamePoint:W,isVisiblePoint:X,prevPointUntil:Y,nextPointUntil:Z,walkPoint:$,ancestor:D,listAncestor:E,lastAncestor:F,listNext:I,listPrev:H,listDescendant:J,commonAncestor:G,wrap:K,insertAfter:L,appendChildNodes:M,position:S,hasChildren:T,makeOffsetPath:_,fromOffsetPath:aa,splitTree:ca,create:da,createText:ea,remove:fa,removeWhile:ga,replace:ha,html:ja,value:ka}}(),k={version:"0.5.10",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],fontSizes:["8","9","10","11","12","14","18","24","36"],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,onCreateLink:function(a){return-1!==a.indexOf("@")&&-1===a.indexOf(":")?a="mailto:"+a:-1===a.indexOf("://")&&(a="http://"+a),a},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}},l=function(){var b=function(b){return a.Deferred(function(c){a.extend(new FileReader,{onload:function(a){var b=a.target.result;c.resolve(b)},onerror:function(){c.reject(this)}}).readAsDataURL(b)}).promise()},c=function(b,c){return a.Deferred(function(d){a("<img>").one("load",function(){d.resolve(a(this))}).one("error abort",function(){d.reject(a(this))}).css({display:"none"}).appendTo(document.body).attr("src",b).attr("data-filename",c)}).promise()};return{readFileAsDataURL:b,createImage:c}}(),m={isEdit:function(a){return g.contains([8,9,13,32],a)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},n=function(){var b=function(b,c){if(e.jqueryVersion<1.9){var d={};return a.each(c,function(a,c){d[c]=b.css(c)}),d}return b.css.call(b,c)};this.stylePara=function(b,c){a.each(b.nodes(j.isPara,{includeAncestor:!0}),function(b,d){a(d).css(c)})},this.current=function(c,d){var e=a(j.isText(c.sc)?c.sc.parentNode:c.sc),f=["font-family","font-size","text-align","list-style-type","line-height"],g=b(e,f)||{};if(g["font-size"]=parseInt(g["font-size"],10),g["font-bold"]=document.queryCommandState("bold")?"bold":"normal",g["font-italic"]=document.queryCommandState("italic")?"italic":"normal",g["font-underline"]=document.queryCommandState("underline")?"underline":"normal",g["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",g["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",g["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",c.isOnList()){var h=["circle","disc","disc-leading-zero","square"],i=a.inArray(g["list-style-type"],h)>-1;g["list-style"]=i?"unordered":"ordered"}else g["list-style"]="none";var k=j.ancestor(c.sc,j.isPara);if(k&&k.style["line-height"])g["line-height"]=k.style.lineHeight;else{var l=parseInt(g["line-height"],10)/parseInt(g["font-size"],10);g["line-height"]=l.toFixed(1)}return g.image=j.isImg(d)&&d,g.anchor=c.isOnAnchor()&&j.ancestor(c.sc,j.isAnchor),g.ancestors=j.listAncestor(c.sc,j.isEditable),g.range=c,g}},o=function(){var b=function(a,b){var c,d,e=a.parentElement(),f=document.body.createTextRange(),h=g.from(e.childNodes);for(c=0;c<h.length;c++)if(!j.isText(h[c])){if(f.moveToElementText(h[c]),f.compareEndPoints("StartToStart",a)>=0)break;d=h[c]}if(0!==c&&j.isText(h[c-1])){var i=document.body.createTextRange(),k=null;i.moveToElementText(d||e),i.collapse(!d),k=d?d.nextSibling:e.firstChild;var l=a.duplicate();l.setEndPoint("StartToStart",i);for(var m=l.text.replace(/[\r\n]/g,"").length;m>k.nodeValue.length&&k.nextSibling;)m-=k.nodeValue.length,k=k.nextSibling;k.nodeValue;b&&k.nextSibling&&j.isText(k.nextSibling)&&m===k.nodeValue.length&&(m-=k.nodeValue.length,k=k.nextSibling),e=k,c=m}return{cont:e,offset:c}},c=function(a){var b=function(a,c){var d,e;if(j.isText(a)){var h=j.listPrev(a,f.not(j.isText)),i=g.last(h).previousSibling;d=i||a.parentNode,c+=g.sum(g.tail(h),j.nodeLength),e=!i}else{if(d=a.childNodes[c]||a,j.isText(d))return b(d,0);c=0,e=!1}return{node:d,collapseToStart:e,offset:c}},c=document.body.createTextRange(),d=b(a.node,a.offset);return c.moveToElementText(d.node),c.collapse(d.collapseToStart),c.moveStart("character",d.offset),c},d=function(b,h,i,k){this.sc=b,this.so=h,this.ec=i,this.eo=k;var l=function(){if(e.isW3CRangeSupport){var a=document.createRange();return a.setStart(b,h),a.setEnd(i,k),a}var d=c({node:b,offset:h});return d.setEndPoint("EndToEnd",c({node:i,offset:k})),d};this.getPoints=function(){return{sc:b,so:h,ec:i,eo:k}},this.getStartPoint=function(){return{node:b,offset:h}},this.getEndPoint=function(){return{node:i,offset:k}},this.select=function(){var a=l();if(e.isW3CRangeSupport){var b=document.getSelection();b.rangeCount>0&&b.removeAllRanges(),b.addRange(a)}else a.select()},this.normalize=function(){var a=function(a){return j.isVisiblePoint(a)||(j.isLeftEdgePoint(a)?a=j.nextPointUntil(a,j.isVisiblePoint):j.isRightEdgePoint(a)&&(a=j.prevPointUntil(a,j.isVisiblePoint))),a},b=a(this.getStartPoint()),c=a(this.getStartPoint());return new d(b.node,b.offset,c.node,c.offset)},this.nodes=function(a,b){a=a||f.ok;var c=b&&b.includeAncestor,d=b&&b.fullyContains,e=this.getStartPoint(),h=this.getEndPoint(),i=[],k=[];return j.walkPoint(e,h,function(b){if(!j.isEditable(b.node)){var e;d?(j.isLeftEdgePoint(b)&&k.push(b.node),j.isRightEdgePoint(b)&&g.contains(k,b.node)&&(e=b.node)):e=c?j.ancestor(b.node,a):b.node,e&&a(e)&&i.push(e)}},!0),g.unique(i)},this.commonAncestor=function(){return j.commonAncestor(b,i)},this.expand=function(a){var c=j.ancestor(b,a),e=j.ancestor(i,a);if(!c&&!e)return new d(b,h,i,k);var f=this.getPoints();return c&&(f.sc=c,f.so=0),e&&(f.ec=e,f.eo=j.nodeLength(e)),new d(f.sc,f.so,f.ec,f.eo)},this.collapse=function(a){return a?new d(b,h,b,h):new d(i,k,i,k)},this.splitText=function(){var a=b===i,c=this.getPoints();return j.isText(i)&&!j.isEdgePoint(this.getEndPoint())&&i.splitText(k),j.isText(b)&&!j.isEdgePoint(this.getStartPoint())&&(c.sc=b.splitText(h),c.so=0,a&&(c.ec=c.sc,c.eo=k-h)),new d(c.sc,c.so,c.ec,c.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var b=this.splitText(),c=b.nodes(null,{fullyContains:!0}),e=j.prevPointUntil(b.getStartPoint(),function(a){return!g.contains(c,a.node)}),f=[];return a.each(c,function(a,b){var c=b.parentNode;e.node!==c&&1===j.nodeLength(c)&&f.push(c),j.remove(b,!1)}),a.each(f,function(a,b){j.remove(b,!1)}),new d(e.node,e.offset,e.node,e.offset)};var m=function(a){return function(){var c=j.ancestor(b,a);return!!c&&c===j.ancestor(i,a)}};this.isOnEditable=m(j.isEditable),this.isOnList=m(j.isList),this.isOnAnchor=m(j.isAnchor),this.isOnCell=m(j.isCell),this.isLeftEdgeOf=function(a){if(!j.isLeftEdgePoint(this.getStartPoint()))return!1;var b=j.ancestor(this.sc,a);return b&&j.isLeftEdgeOf(this.sc,b)},this.isCollapsed=function(){return b===i&&h===k},this.wrapBodyInlineWithPara=function(){if(j.isBodyContainer(b)&&j.isEmpty(b))return b.innerHTML=j.emptyPara,new d(b.firstChild,0,b.firstChild,0);if(!j.isInline(b)||j.isParaInline(b))return this;var a=j.listAncestor(b,f.not(j.isInline)),c=g.last(a);j.isInline(c)||(c=a[a.length-2]||b.childNodes[h]);var e=j.listPrev(c,j.isParaInline).reverse();if(e=e.concat(j.listNext(c.nextSibling,j.isParaInline)),e.length){var i=j.wrap(g.head(e),"p");j.appendChildNodes(i,g.tail(e))}return this},this.insertNode=function(a,b){var c,d,e,f=this.wrapBodyInlineWithPara(),h=f.getStartPoint();if(b)d=j.isPara(h.node)?h.node:h.node.parentNode,e=j.isPara(h.node)?h.node.childNodes[h.offset]:j.splitTree(h.node,h);else{var i=j.listAncestor(h.node,j.isBodyContainer),k=g.last(i)||h.node;j.isBodyContainer(k)?(c=i[i.length-2],d=k):(c=k,d=c.parentNode),e=c&&j.splitTree(c,h)}return e?e.parentNode.insertBefore(a,e):d.appendChild(a),a},this.toString=function(){var a=l();return e.isW3CRangeSupport?a.toString():a.text},this.bookmark=function(a){return{s:{path:j.makeOffsetPath(a,b),offset:h},e:{path:j.makeOffsetPath(a,i),offset:k}}},this.getClientRects=function(){var a=l();return a.getClientRects()}};return{create:function(a,c,f,g){if(arguments.length)2===arguments.length&&(f=a,g=c);else if(e.isW3CRangeSupport){var h=document.getSelection();if(0===h.rangeCount)return null;if(j.isBody(h.anchorNode))return null;var i=h.getRangeAt(0);a=i.startContainer,c=i.startOffset,f=i.endContainer,g=i.endOffset}else{var k=document.selection.createRange(),l=k.duplicate();l.collapse(!1);var m=k;m.collapse(!0);var n=b(m,!0),o=b(l,!1);j.isText(n.node)&&j.isLeftEdgePoint(n)&&j.isTextNode(o.node)&&j.isRightEdgePoint(o)&&o.node.nextSibling===n.node&&(n=o),a=n.cont,c=n.offset,f=o.cont,g=o.offset}return new d(a,c,f,g)},createFromNode:function(a){return this.create(a,0,a,1)},createFromBookmark:function(a,b){var c=j.fromOffsetPath(a,b.s.path),e=b.s.offset,f=j.fromOffsetPath(a,b.e.path),g=b.e.offset;return new d(c,e,f,g)}}}(),p=function(){this.insertTab=function(a,b,c){var d=j.createText(new Array(c+1).join(j.NBSP_CHAR));b=b.deleteContents(),b.insertNode(d,!0),b=o.create(d,c),b.select()},this.insertParagraph=function(){var b=o.create();b=b.deleteContents(),b=b.wrapBodyInlineWithPara();var c,d=j.ancestor(b.sc,j.isPara);if(d){c=j.splitTree(d,b.getStartPoint());var e=j.listDescendant(d,j.isEmptyAnchor);e=e.concat(j.listDescendant(c,j.isEmptyAnchor)),a.each(e,function(a,b){j.remove(b)})}else{var f=b.sc.childNodes[b.so];c=a(j.emptyPara)[0],f?b.sc.insertBefore(c,f):b.sc.appendChild(c)}o.create(c,0).normalize().select()}},q=function(){this.tab=function(a,b){var c=j.ancestor(a.commonAncestor(),j.isCell),d=j.ancestor(c,j.isTable),e=j.listDescendant(d,j.isCell),f=g[b?"prev":"next"](e,c);f&&o.create(f,0).select()},this.createTable=function(b,c){for(var d,e=[],f=0;b>f;f++)e.push("<td>"+j.blank+"</td>");d=e.join("");for(var g,h=[],i=0;c>i;i++)h.push("<tr>"+d+"</tr>");return g=h.join(""),a('<table class="table table-bordered">'+g+"</table>")[0]}},r=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var b=this,c=o.create().wrapBodyInlineWithPara(),d=c.nodes(j.isPara,{includeAncestor:!0}),e=g.clusterBy(d,f.peq2("parentNode"));a.each(e,function(c,d){var e=g.head(d);j.isLi(e)?b.wrapList(d,e.parentNode.nodeName):a.each(d,function(b,c){a(c).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})}),c.select()},this.outdent=function(){var b=this,c=o.create().wrapBodyInlineWithPara(),d=c.nodes(j.isPara,{includeAncestor:!0}),e=g.clusterBy(d,f.peq2("parentNode"));a.each(e,function(c,d){var e=g.head(d);j.isLi(e)?b.releaseList([d]):a.each(d,function(b,c){a(c).css("marginLeft",function(a,b){return b=parseInt(b,10)||0,b>25?b-25:""})})}),c.select()},this.toggleList=function(b){var c=this,d=o.create().wrapBodyInlineWithPara(),e=d.nodes(j.isPara,{includeAncestor:!0}),h=g.clusterBy(e,f.peq2("parentNode"));if(g.find(e,j.isPurePara))a.each(h,function(a,d){c.wrapList(d,b)});else{var i=d.nodes(j.isList,{includeAncestor:!0}).filter(function(c){return!a.nodeName(c,b)});i.length?a.each(i,function(a,c){j.replace(c,b)}):this.releaseList(h,!0)}d.select()},this.wrapList=function(b,c){var d=g.head(b),e=g.last(b),f=j.isList(d.previousSibling)&&d.previousSibling,h=j.isList(e.nextSibling)&&e.nextSibling,i=f||j.insertAfter(j.create(c||"UL"),e);b=a.map(b,function(a){return j.isPurePara(a)?j.replace(a,"LI"):a}),j.appendChildNodes(i,b),h&&(j.appendChildNodes(i,g.from(h.childNodes)),j.remove(h))},this.releaseList=function(b,c){var d=[];return a.each(b,function(b,e){var f=g.head(e),h=g.last(e),i=c?j.lastAncestor(f,j.isList):f.parentNode,k=i.childNodes.length>1?j.splitTree(i,{node:h.parentNode,offset:j.position(h)+1},!0):null,l=j.splitTree(i,{node:f.parentNode,offset:j.position(f)},!0);e=c?j.listDescendant(l,j.isLi):g.from(l.childNodes).filter(j.isLi),(c||!j.isList(i.parentNode))&&(e=a.map(e,function(a){return j.replace(a,"P")})),a.each(g.from(e).reverse(),function(a,b){j.insertAfter(b,i)});var m=g.compact([i,l,k]);a.each(m,function(b,c){var d=[c].concat(j.listDescendant(c,j.isList));a.each(d.reverse(),function(a,b){j.nodeLength(b)||j.remove(b,!0)})}),d=d.concat(e)}),d}},s=function(){var b=new n,c=new q,d=new p,f=new r;this.saveRange=function(a,b){a.focus(),a.data("range",o.create()),b&&o.create().collapse().select()},this.restoreRange=function(a){var b=a.data("range");b&&(b.select(),a.focus())},this.currentStyle=function(a){var c=o.create();return c?c.isOnEditable()&&b.current(c,a):!1};var h=this.triggerOnChange=function(a){var b=a.data("callbacks").onChange;b&&b(a.html(),a)};this.undo=function(a){a.data("NoteHistory").undo(),h(a)},this.redo=function(a){a.data("NoteHistory").redo(),h(a)};for(var i=this.afterCommand=function(a){a.data("NoteHistory").recordUndo(),h(a)},k=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],m=0,s=k.length;s>m;m++)this[k[m]]=function(a){return function(b,c){document.execCommand(a,!1,c),i(b)}}(k[m]);this.tab=function(a,b){var e=o.create();e.isCollapsed()&&e.isOnCell()?c.tab(e):(d.insertTab(a,e,b.tabsize),i(a))},this.untab=function(){var a=o.create();a.isCollapsed()&&a.isOnCell()&&c.tab(a,!0)},this.insertParagraph=function(a){d.insertParagraph(a),i(a)},this.insertOrderedList=function(a){f.insertOrderedList(a),i(a)},this.insertUnorderedList=function(a){f.insertUnorderedList(a),i(a)},this.indent=function(a){f.indent(a),i(a)},this.outdent=function(a){f.outdent(a),i(a)},this.insertImage=function(a,b,c){l.createImage(b,c).then(function(b){b.css({display:""}),o.create().insertNode(b[0]),i(a)}).fail(function(){var b=a.data("callbacks");b.onImageUploadError&&b.onImageUploadError()})},this.insertVideo=function(a,b){var c,d=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,e=b.match(d),f=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,g=b.match(f);if(e&&11===e[2].length){var h=e[2];c={src:"//www.youtube.com/embed/"+h,width:"100%",height:"360"}}else g&&g[3].length&&(c={webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",src:"//player.vimeo.com/video/"+g[3],width:"100%",height:"360"});c&&this.insertIframe(a,null,null,null,c)},this.insertIframedImage=function(b,c,d,e,f,g){function h(b,c,d){d||(d=c);var e=a('<img oncontextmenu="return false;" data-pin-no-hover="true" class="hide-context"  src="'+c+'">').attr("data-hzurl",d),f=o.create();f||(f=b.data("range")),f.insertNode(e[0]),i(b);var g=e.next();g.length||(g=a("<p><br></p>").insertAfter(e)),HZ.textEditor.InsertPhoto.InsertPhotoDialog.$richTextEditor.selectNode(g,!0)}function j(b,c,d,e,f){var g=HZ.utils.Links.getSpaceLink(c),i=(d<b.width()?d:b.width())+"px";a('<img width="'+i+'" src="'+f+'">').attr("data-hzurl",g);h(b,f,g)}f?h(b,g):j.apply(this,[b,c,d,e,g])},this.insertIframe=function(b,c,d,e,f){var g=a('<p class="iframe-throbber"></p>'),h=a('<p class="iframe-wrapper"></p>').addClass("loading"),j=a("<iframe/>");j.attr({scrolling:"no",frameborder:0}),j.hide().on("load",function(c){var f,i=0;e&&d?(f=e/(d<b.width()?b.width():d),f+=i):f=.56,g.hide(),h.css("border","").css("padding-bottom",100*f+"%").height(0).removeClass("loading"),a(this).show()}),o.create().insertNode(h[0]),h.append(g).append(j),c&&j[0].contentWindow.document.body.appendChild(c),f&&j.attr(f),i(b);var k=h.next();k.length||(k=a("<p><br></p>").insertAfter($image)),HZ.textEditor.InsertVideo.InsertVideoDialog.$richTextEditor.selectNode(k,!0)},this.formatBlock=function(a,b){b=e.isMSIE?"<"+b+">":b,document.execCommand("FormatBlock",!1,b),i(a)},this.formatPara=function(a){this.formatBlock(a,"P"),i(a)};for(var m=1;6>=m;m++)this["formatH"+m]=function(a){return function(b){this.formatBlock(b,"H"+a)}}(m);this.fontSize=function(a,b){document.execCommand("fontSize",!1,3),e.isFF?a.find("font[size=3]").removeAttr("size").css("font-size",b+"px"):a.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",b+"px"),i(a)},this.lineHeight=function(a,c){b.stylePara(o.create(),{lineHeight:c}),i(a)},this.unlink=function(a){var b=o.create();if(b.isOnAnchor()){var c=j.ancestor(b.sc,j.isAnchor);b=o.createFromNode(c),b.select(),document.execCommand("unlink"),i(a)}},this.createLink=function(b,c,d){var e=c.url,f=c.text,g=(c.newWindow,c.range);d.onCreateLink&&(e=d.onCreateLink(e)),g=g.deleteContents();var h=g.insertNode(a("<A>"+f+"</A>")[0],!0);a(h).attr({href:e,target:"_blank"}),o.createFromNode(h).select(),i(b)},this.getLinkInfo=function(b){b.focus();var c=o.create().expand(j.isAnchor),d=a(g.head(c.nodes(j.isAnchor)));return{range:c,text:c.toString(),isNewWindow:d.length?"_blank"===d.attr("target"):!0,url:d.length?d.attr("href"):""}},this.getVideoInfo=function(a){a.focus();var b=o.create();if(b.isOnAnchor()){var c=j.ancestor(b.sc,j.isAnchor);b=o.createFromNode(c)}return{text:b.toString()}},this.color=function(a,b){var c=JSON.parse(b),d=c.foreColor,e=c.backColor;d&&document.execCommand("foreColor",!1,d),e&&document.execCommand("backColor",!1,e),i(a)},this.insertTable=function(a,b){var d=b.split("x"),e=o.create();e=e.deleteContents(),e.insertNode(c.createTable(d[0],d[1])),i(a)},this.floatMe=function(a,b,c){c.css("float",b),i(a)},this.imageShape=function(a,b,c){c.removeClass("img-rounded img-circle img-thumbnail"),b&&c.addClass(b),i(a)},this.resize=function(a,b,c){c.css({width:100*b+"%",height:""}),i(a)},this.resizeTo=function(a,b,c){var d;if(c){var e=a.y/a.x,f=b.data("ratio");d={width:f>e?a.x:a.y/f,height:f>e?a.x*f:a.y}}else d={width:a.x,height:a.y};b.css(d)},this.removeMedia=function(a,b,c){c.detach(),i(a)}},t=function(a){var b=[],c=-1,d=a[0],e=function(){var b=o.create(),c={s:{path:[0],offset:0},e:{path:[0],offset:0}};return{contents:a.html(),bookmark:b?b.bookmark(d):c}},f=function(b){null!==b.contents&&a.html(b.contents),null!==b.bookmark&&o.createFromBookmark(d,b.bookmark).select()};this.undo=function(){c>0&&(c--,f(b[c]))},this.redo=function(){b.length-1>c&&(c++,f(b[c]))},this.recordUndo=function(){c++,b.length>c&&(b=b.slice(0,c)),
b.push(e())},this.recordUndo()},u=function(){this.update=function(b,c){var d=function(b,c){b.find(".dropdown-menu li a").each(function(){var b=a(this).data("value")+""==c+"";this.className=b?"checked":""})},e=function(a,c){var d=b.find(a);d.toggleClass("active",c())},f=b.find(".note-fontname");if(f.length){var h=c["font-family"];h&&(h=g.head(h.split(",")),h=h.replace(/\'/g,""),f.find(".note-current-fontname").text(h),d(f,h))}var i=b.find(".note-fontsize");i.find(".note-current-fontsize").text(c["font-size"]),d(i,parseFloat(c["font-size"]));var j=b.find(".note-height");d(j,parseFloat(c["line-height"])),e('button[data-event="bold"]',function(){return"bold"===c["font-bold"]}),e('button[data-event="italic"]',function(){return"italic"===c["font-italic"]}),e('button[data-event="underline"]',function(){return"underline"===c["font-underline"]}),e('button[data-event="strikethrough"]',function(){return"strikethrough"===c["font-strikethrough"]}),e('button[data-event="superscript"]',function(){return"superscript"===c["font-superscript"]}),e('button[data-event="subscript"]',function(){return"subscript"===c["font-subscript"]}),e('button[data-event="justifyLeft"]',function(){return"left"===c["text-align"]||"start"===c["text-align"]}),e('button[data-event="justifyCenter"]',function(){return"center"===c["text-align"]}),e('button[data-event="justifyRight"]',function(){return"right"===c["text-align"]}),e('button[data-event="justifyFull"]',function(){return"justify"===c["text-align"]}),e('button[data-event="insertUnorderedList"]',function(){return"unordered"===c["list-style"]}),e('button[data-event="insertOrderedList"]',function(){return"ordered"===c["list-style"]})},this.updateRecentColor=function(b,c,d){var e=a(b).closest(".note-color"),f=e.find(".note-recent-color"),g=JSON.parse(f.attr("data-value"));g[c]=d,f.attr("data-value",JSON.stringify(g));var h="backColor"===c?"background-color":"color";f.find("i").css(h,d)}},v=function(){var a=new u;this.update=function(b,c){a.update(b,c)},this.updateRecentColor=function(b,c,d){a.updateRecentColor(b,c,d)},this.activate=function(a){a.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(a){a.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(a,b){var c=a.find('button[data-event="fullscreen"]');c.toggleClass("active",b)},this.updateCodeview=function(a,b){var c=a.find('button[data-event="codeview"]');c.toggleClass("active",b)}},w=function(){var b=new u,c=function(b,c){var d=a(b),e=c?d.offset():d.position(),f=d.outerHeight(!0),g=d.position().top-d.offsetParent().parent().scrollTop();return{left:e.left,top:g+f}},d=function(a,b){a.css({display:"block",left:b.left,top:b.top})},e=20;this.update=function(h,i,j){b.update(h,i);var k=h.find(".note-link-popover");if(i.anchor){var l=k.find("a"),m=a(i.anchor).attr("href");l.attr("href",m).html(m),d(k,c(i.anchor,j))}else k.hide();var n=h.find(".note-image-popover");i.image?d(n,c(i.image,j)):n.hide();var o=h.find(".note-air-popover");if(j&&!i.range.isCollapsed()){var p=f.rect2bnd(g.last(i.range.getClientRects()));d(o,{left:Math.max(p.left+p.width/2-e,0),top:p.top+p.height})}else o.hide()},this.updateRecentColor=function(a,b,c){a.updateRecentColor(a,b,c)},this.hide=function(a){a.children().hide()}},x=function(){this.update=function(b,c,d){var e=b.find(".note-control-selection");if(c.image){var f=a(c.image),g=d?f.offset():f.position(),h={w:f.outerWidth(!0),h:f.outerHeight(!0)};e.css({display:"block",left:g.left,top:g.top,width:h.w,height:h.h}).data("target",c.image);var i=h.w+"x"+h.h;e.find(".note-control-selection-info").text(i)}else e.hide()},this.hide=function(a){a.children().hide()}},y=function(){var b=function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)};this.showImageDialog=function(c,d){return a.Deferred(function(a){var c=d.find(".note-image-dialog"),e=d.find(".note-image-input"),f=d.find(".note-image-url"),g=d.find(".note-image-btn");c.one("shown.bs.modal",function(){e.replaceWith(e.clone().on("change",function(){a.resolve(this.files),c.modal("hide")}).val("")),g.click(function(b){b.preventDefault(),a.resolve(f.val()),c.modal("hide")}),f.on("keyup paste",function(a){var c;c="paste"===a.type?a.originalEvent.clipboardData.getData("text"):f.val(),b(g,c)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){e.off("change"),f.off("keyup paste"),g.off("click"),"pending"===a.state()&&a.reject()}).modal("show")})},this.showVideoDialog=function(c,d,e){return a.Deferred(function(a){var c=d.find(".note-video-dialog"),f=c.find(".note-video-url"),g=c.find(".note-video-btn");c.one("shown.bs.modal",function(){f.val(e.text).keyup(function(){b(g,f.val())}).trigger("keyup").trigger("focus"),g.click(function(b){b.preventDefault(),a.resolve(f.val()),c.modal("hide")})}).one("hidden.bs.modal",function(){f.off("keyup"),g.off("click"),"pending"===a.state()&&a.reject()}).modal("show")})},this.showLinkDialog=function(c,d,e){return a.Deferred(function(a){var c=d.find(".note-link-dialog"),f=c.find(".note-link-text"),g=c.find(".note-link-url"),h=c.find(".note-link-btn"),i=c.find("input[type=checkbox]");c.one("shown.bs.modal",function(){f.val(e.text),f.keyup(function(){e.text=f.val()}),e.url||(e.url=e.text,b(h,e.text)),g.keyup(function(){b(h,g.val()),e.text||f.val(g.val())}).val(e.url).trigger("focus").trigger("select"),i.prop("checked",e.newWindow),h.one("click",function(b){b.preventDefault(),a.resolve({range:e.range,url:g.val(),text:f.val(),newWindow:i.is(":checked")}),c.modal("hide")})}).one("hidden.bs.modal",function(){f.off("keyup"),g.off("keyup"),h.off("click"),"pending"===a.state()&&a.reject()}).modal("show")}).promise()},this.showHelpDialog=function(b,c){return a.Deferred(function(a){var b=c.find(".note-help-dialog");b.one("hidden.bs.modal",function(){a.resolve()}).modal("show")}).promise()}};e.hasCodeMirror&&(e.isSupportAmd?require(["CodeMirror"],function(a){b=a}):b=window.CodeMirror);var z=function(){var c=a(window),d=a(document),f=a("html, body"),h=new s,i=new v,k=new w,n=new x,o=new y,p=function(b){var c=a(b).closest(".note-editor, .note-air-editor, .note-air-layout");if(!c.length)return null;var d;return d=c.is(".note-editor, .note-air-editor")?c:a("#note-editor-"+g.last(c.attr("id").split("-"))),j.buildLayoutInfo(d)},q=function(b,c){var d=b.data("callbacks");d.onImageUpload?d.onImageUpload(c,h,b):a.each(c,function(a,c){var e=c.name;l.readFileAsDataURL(c).then(function(a){h.insertImage(b,a,e)}).fail(function(){d.onImageUploadError&&d.onImageUploadError()})})},r={showLinkDialog:function(b){var c=d=HZ.textEditor.InsertLink.InsertLinkDialog.$richTextEditor,d=c.getSelection(),e=a(d.anchorNode);if(e.hasClass("note-editable")||!e.closest(".note-editable").length){var f=c.$editor.children().first();f.length||(f=a("<p><br></p>").appendTo(c.$editor)),c.selectNode(f,!0)}var g=b.editable(),i=b.editor(),j=i.data("options"),k=h.getLinkInfo(g);h.saveRange(g),HZ.textEditor.InsertLink.InsertLinkDialog.onInsertLinkCallback=function(a){h.restoreRange(g);var b=a.find(".text-input").val(),c=a.find(".url-input").val();""!==b&&""!==c&&h.createLink(g,{range:k.range,text:b,url:c,isNewWindow:!0},j)},HZ.textEditor.InsertLink.InsertLinkDialog.onViewLoadedCallback=function(a){a.find(".text-input").val(k.text),a.find(".url-input").val(k.url)},"undefined"!=typeof lightbox&&lightbox.isShowing()?(lightbox.detachKeyboardHandler(),HZ.ui.Yamdi.show(HZ.textEditor.InsertLink.InsertLinkDialog)):HZ.textEditor.InsertLink.showDialog()},showImageDialog:function(b){var c=b.editable();h.saveRange(c),HZ.textEditor.InsertPhoto.InsertPhotoDialog.onInsertPhotoCallback=function(b){h.restoreRange(c);var d=b.find(".space-preview-thumb");h.insertIframedImage(c,d.data("spaceid"),d.data("width"),d.data("height"),d.data("isupload"),d.attr("src")),setTimeout(a.proxy(function(){this.$richTextEditor.limitImages()},this),250)},"undefined"!=typeof lightbox&&lightbox.isShowing()?(lightbox.detachKeyboardHandler(),HZ.ui.Yamdi.show(HZ.textEditor.InsertPhoto.InsertPhotoDialog)):HZ.textEditor.InsertPhoto.showDialog()},showVideoDialog:function(a){var b=a.editable();h.saveRange(b),HZ.textEditor.InsertVideo.InsertVideoDialog.onInsertVideoCallback=function(a){h.restoreRange(b),h.insertVideo(b,a.find(".video-input").val())},"undefined"!=typeof lightbox&&lightbox.isShowing()?(lightbox.detachKeyboardHandler(),HZ.ui.Yamdi.show(HZ.textEditor.InsertVideo.InsertVideoDialog)):HZ.textEditor.InsertVideo.showDialog()},showHelpDialog:function(a){var b=a.dialog(),c=a.editable();h.saveRange(c,!0),o.showHelpDialog(c,b).then(function(){h.restoreRange(c)})},fullscreen:function(a){var b=a.editor(),d=a.toolbar(),e=a.editable(),g=a.codable(),h=b.data("options"),j=function(a){b.css("width",a.w),e.css("height",a.h),g.css("height",a.h),g.data("cmeditor")&&g.data("cmeditor").setsize(null,a.h)};b.toggleClass("fullscreen");var k=b.hasClass("fullscreen");k?(e.data("orgheight",e.css("height")),c.on("resize",function(){j({w:c.width(),h:c.height()-d.outerHeight()})}).trigger("resize"),f.css("overflow","hidden")):(c.off("resize"),j({w:h.width||"",h:e.data("orgheight")}),f.css("overflow","visible")),i.updateFullscreen(d,k)},codeview:function(a){var c,d,f=a.editor(),g=a.toolbar(),h=a.editable(),l=a.codable(),m=a.popover(),n=f.data("options");f.toggleClass("codeview");var o=f.hasClass("codeview");o?(l.val(j.html(h,!0)),l.height(h.height()),i.deactivate(g),k.hide(m),l.focus(),e.hasCodeMirror&&(c=b.fromTextArea(l[0],n.codemirror),n.codemirror.tern&&(d=new b.TernServer(n.codemirror.tern),c.ternServer=d,c.on("cursorActivity",function(a){d.updateArgHints(a)})),c.setSize(null,h.outerHeight()),l.data("cmEditor",c))):(e.hasCodeMirror&&(c=l.data("cmEditor"),l.val(c.getValue()),c.toTextArea()),h.html(j.value(l)||j.emptyPara),h.height(n.height?l.height():"auto"),i.activate(g),h.focus()),i.updateCodeview(a.toolbar(),o)}},u=function(a){j.isImg(a.target)&&a.preventDefault()},z=function(a){setTimeout(function(){var b=p(a.currentTarget||a.target),c=h.currentStyle(a.target);if(c){var d=b.editor().data("options").airMode;d||i.update(b.toolbar(),c),k.update(b.popover(),c,d),n.update(b.handle(),c,d)}},0)},A=function(a){var b=p(a.currentTarget||a.target);k.hide(b.popover()),n.hide(b.handle())},B=function(a){var b=a.originalEvent.clipboardData;if(b&&b.items&&b.items.length){var c=p(a.currentTarget||a.target),d=c.editable(),e=g.head(b.items),f="file"===e.kind&&-1!==e.type.indexOf("image/");f&&q(d,[e.getAsFile()]),h.afterCommand(d)}},C=function(b){if(j.isControlSizing(b.target)){b.preventDefault(),b.stopPropagation();var c=p(b.target),e=c.handle(),f=c.popover(),g=c.editable(),i=c.editor(),l=e.find(".note-control-selection").data("target"),m=a(l),o=m.offset(),q=d.scrollTop(),r=i.data("options").airMode;d.on("mousemove",function(a){h.resizeTo({x:a.clientX-o.left,y:a.clientY-(o.top-q)},m,!a.shiftKey),n.update(e,{image:l},r),k.update(f,{image:l},r)}).one("mouseup",function(){d.off("mousemove"),h.afterCommand(g)}),m.data("ratio")||m.data("ratio",m.height()/m.width())}},D=function(b){var c=a(b.target).closest("[data-event]");c.length&&b.preventDefault()},E=function(b){var c=a(b.target).closest("[data-event]");if(c.length){var d=c.attr("data-event"),e=c.attr("data-value"),f=c.attr("data-hide"),j=p(b.target);b.preventDefault();var l;if(-1!==a.inArray(d,["resize","floatMe","removeMedia","imageShape"])){var m=j.handle().find(".note-control-selection");l=a(m.data("target"))}if(f&&c.parents(".popover").hide(),h[d]){var n=j.editable();n.trigger("focus"),h[d](n,e,l)}else r[d]&&r[d].call(this,j);if(-1!==a.inArray(d,["backColor","foreColor"])){var o=j.editor().data("options",o),q=o.airMode?k:i;q.updateRecentColor(g.head(c),d,e)}z(b)}},F=24,G=function(a){a.preventDefault(),a.stopPropagation();var b=p(a.target).editable(),c=b.offset().top-d.scrollTop(),e=p(a.currentTarget||a.target),f=e.editor().data("options");d.on("mousemove",function(a){var d=a.clientY-(c+F);d=f.minHeight>0?Math.max(d,f.minHeight):d,d=f.maxHeight>0?Math.min(d,f.maxHeight):d,b.height(d)}).one("mouseup",function(){d.off("mousemove")})},H=18,I=function(b,c){var d,e=a(b.target.parentNode),f=e.next(),g=e.find(".note-dimension-picker-mousecatcher"),h=e.find(".note-dimension-picker-highlighted"),i=e.find(".note-dimension-picker-unhighlighted");if(void 0===b.offsetX){var j=a(b.target).offset();d={x:b.pageX-j.left,y:b.pageY-j.top}}else d={x:b.offsetX,y:b.offsetY};var k={c:Math.ceil(d.x/H)||1,r:Math.ceil(d.y/H)||1};h.css({width:k.c+"em",height:k.r+"em"}),g.attr("data-value",k.c+"x"+k.r),3<k.c&&k.c<c.insertTableMaxSize.col&&i.css({width:k.c+1+"em"}),3<k.r&&k.r<c.insertTableMaxSize.row&&i.css({height:k.r+1+"em"}),f.html(k.c+" x "+k.r)},J=function(a,b){b?d.on("drop",function(a){a.preventDefault()}):K(a)},K=function(b){var c=a(),e=b.dropzone,f=b.dropzone.find(".note-dropzone-message");d.on("dragenter",function(a){var d=b.editor.hasClass("codeview");d||c.length||(b.editor.addClass("dragover"),e.width(b.editor.width()),e.height(b.editor.height()),f.text("Drag Image Here")),c=c.add(a.target)}).on("dragleave",function(a){c=c.not(a.target),c.length||b.editor.removeClass("dragover")}).on("drop",function(){c=a(),b.editor.removeClass("dragover")}),e.on("dragenter",function(){e.addClass("hover"),f.text("Drop Image")}).on("dragleave",function(){e.removeClass("hover"),f.text("Drag Image Here")}),e.on("drop",function(a){a.preventDefault();var b=a.originalEvent.dataTransfer;if(b&&b.files){var c=p(a.currentTarget||a.target);c.editable().focus(),q(c.editable(),b.files)}}).on("dragover",!1)};this.bindKeyMap=function(a,b){var c=a.editor,d=a.editable;a=p(d),d.on("keydown",function(e){var f=[];e.metaKey&&f.push("CMD"),e.ctrlKey&&!e.altKey&&f.push("CTRL"),e.shiftKey&&f.push("SHIFT");var g=m.nameFromCode[e.keyCode];g&&f.push(g);var i=b[f.join("+")];i?(e.preventDefault(),h[i]?h[i](d,c.data("options")):r[i]&&r[i].call(this,a)):m.isEdit(e.keyCode)&&h.afterCommand(d)})},this.attach=function(a,b){this.bindKeyMap(a,b.keyMap[e.isMac?"mac":"pc"]),a.editable.on("mousedown",u),a.editable.on("keyup mouseup",z),a.editable.on("scroll",A),a.editable.on("paste",B),a.handle.on("mousedown",C),a.popover.on("click",E),a.popover.on("mousedown",D),b.airMode||(J(a,b.disableDragAndDrop),a.toolbar.on("click",E),a.toolbar.on("mousedown",D),b.disableResizeEditor||a.statusbar.on("mousedown",G));var c=b.airMode?a.popover:a.toolbar,d=c.find(".note-dimension-picker-mousecatcher");d.css({width:b.insertTableMaxSize.col+"em",height:b.insertTableMaxSize.row+"em"}).on("mousemove",function(a){I(a,b)}),a.editor.data("options",b),b.styleWithSpan&&!e.isMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)},0);var f=new t(a.editable);if(a.editable.data("NoteHistory",f),b.onenter&&a.editable.keypress(function(a){13===a.keyCode&&b.onenter(a)}),b.onfocus&&a.editable.focus(b.onfocus),b.onblur&&a.editable.blur(b.onblur),b.onkeyup&&a.editable.keyup(b.onkeyup),b.onkeydown&&a.editable.keydown(b.onkeydown),b.onpaste&&a.editable.on("paste",b.onpaste),b.onToolbarClick&&a.toolbar.click(b.onToolbarClick),b.onChange){var g=function(){h.triggerOnChange(a.editable)};if(e.isMSIE){var i="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";a.editable.on(i,g)}else a.editable.on("input",g)}a.editable.data("callbacks",{onChange:b.onChange,onAutoSave:b.onAutoSave,onImageUpload:b.onImageUpload,onImageUploadError:b.onImageUploadError,onFileUpload:b.onFileUpload,onFileUploadError:b.onFileUpload})},this.dettach=function(a,b){a.editable.off(),a.popover.off(),a.handle.off(),a.dialog.off(),b.airMode||(a.dropzone.off(),a.toolbar.off(),a.statusbar.off())}},A=function(){var b=function(a,b){var c=b.event,d=b.value,e=b.title,f=b.className,g=b.dropdown,h=b.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(f?" "+f:"")+(g?" dropdown-toggle":"")+'"'+(g?' data-toggle="dropdown"':"")+(e?' title="'+e+'"':"")+(c?' data-event="'+c+'"':"")+(d?" data-value='"+d+"'":"")+(h?" data-hide='"+h+"'":"")+' tabindex="-1">'+a+(g?' <span class="caret"></span>':"")+"</button>"+(g||"")},c=function(a,c){var d='<i class="'+a+'"></i>';return b(d,c)},d=function(a,b){return'<div class="'+a+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content">'+b+"</div></div>"},g=function(a,b,c,d){return'<div class="'+a+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(b?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+b+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body"><div class="row-fluid">'+c+"</div></div>"+(d?'<div class="modal-footer">'+d+"</div>":"")+"</form></div></div></div>"},h={picture:function(a){return c("fa fa-picture-o icon-picture",{event:"showImageDialog",title:a.image.image,hide:!0})},link:function(a){return c("fa fa-link icon-link",{event:"showLinkDialog",title:a.link.link,hide:!0})},video:function(a){return c("fa fa-youtube-play icon-play",{event:"showVideoDialog",title:a.video.video,hide:!0})},table:function(a){var b='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return c("fa fa-table icon-table",{title:a.table.table,dropdown:b})},style:function(a,b){var d=b.styleTags.reduce(function(b,c){var d=a.style["p"===c?"normal":c];return b+'<li><a data-event="formatBlock" href="#" data-value="'+c+'">'+("p"===c||"pre"===c?d:"<"+c+">"+d+"</"+c+">")+"</a></li>"},"");return c("fa fa-magic icon-magic",{title:a.style.style,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},fontname:function(a,c){var d=c.fontNames.reduce(function(a,b){return e.isFontInstalled(b)?a+'<li><a data-event="fontName" href="#" data-value="'+b+'"><i class="fa fa-check icon-ok"></i> '+b+"</a></li>":a},""),f='<span class="note-current-fontname">'+c.defaultFontName+"</span>";return b(f,{title:a.font.name,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},fontsize:function(a,c){var d=c.fontSizes.reduce(function(a,b){return a+'<li><a data-event="fontSize" href="#" data-value="'+b+'"><i class="fa fa-check icon-ok"></i> '+b+"</a></li>"},""),e='<span class="note-current-fontsize">11</span>';return b(e,{title:a.font.size,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},color:function(a){var c='<i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i>',d=b(c,{className:"note-recent-color",title:a.color.recent,event:"color",value:'{"backColor":"yellow"}'}),e='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+a.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+a.color.transparent+'">'+a.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+a.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+a.color.reset+'">'+a.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',f=b("",{title:a.color.more,dropdown:e});return d+f},bold:function(a){return c("fa fa-bold icon-bold",{event:"bold",title:a.font.bold})},italic:function(a){return c("fa fa-italic icon-italic",{event:"italic",title:a.font.italic})},underline:function(a){return c("fa fa-underline icon-underline",{event:"underline",title:a.font.underline})},strikethrough:function(a){return c("fa fa-strikethrough icon-strikethrough",{event:"strikethrough",title:a.font.strikethrough})},superscript:function(a){return c("fa fa-superscript icon-superscript",{event:"superscript",title:a.font.superscript})},subscript:function(a){return c("fa fa-subscript icon-subscript",{event:"subscript",title:a.font.subscript})},clear:function(a){return c("fa fa-eraser icon-eraser",{event:"removeFormat",title:a.font.clear})},ul:function(a){return c("fa fa-list-ul icon-list-ul",{event:"insertUnorderedList",title:a.lists.unordered})},ol:function(a){return c("fa fa-list-ol icon-list-ol",{event:"insertOrderedList",title:a.lists.ordered})},paragraph:function(a){var b=c("fa fa-align-left icon-align-left",{title:a.paragraph.left,event:"justifyLeft"}),d=c("fa fa-align-center icon-align-center",{title:a.paragraph.center,event:"justifyCenter"}),e=c("fa fa-align-right icon-align-right",{title:a.paragraph.right,event:"justifyRight"}),f=c("fa fa-align-justify icon-align-justify",{title:a.paragraph.justify,event:"justifyFull"}),g=c("fa fa-outdent icon-indent-left",{title:a.paragraph.outdent,event:"outdent"}),h=c("fa fa-indent icon-indent-right",{title:a.paragraph.indent,event:"indent"}),i='<div class="dropdown-menu"><div class="note-align btn-group">'+b+d+e+f+'</div><div class="note-list btn-group">'+h+g+"</div></div>";return c("fa fa-align-left icon-align-left",{title:a.paragraph.paragraph,dropdown:i})},height:function(a,b){var d=b.lineHeights.reduce(function(a,b){return a+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(b)+'"><i class="fa fa-check icon-ok"></i> '+b+"</a></li>"},"");return c("fa fa-text-height icon-text-height",{title:a.font.height,dropdown:'<ul class="dropdown-menu">'+d+"</ul>"})},help:function(a){return c("fa fa-question icon-question",{event:"showHelpDialog",title:a.options.help,hide:!0})},fullscreen:function(a){return c("fa fa-arrows-alt icon-fullscreen",{event:"fullscreen",title:a.options.fullscreen})},codeview:function(a){return c("fa fa-code icon-code",{event:"codeview",title:a.options.codeview})},undo:function(a){return c("fa fa-undo icon-undo",{event:"undo",title:a.history.undo})},redo:function(a){return c("fa fa-repeat icon-repeat",{event:"redo",title:a.history.redo})},hr:function(a){return c("fa fa-minus icon-hr",{event:"insertHorizontalRule",title:a.hr.insert})}},i=function(a,e){var f=function(){var b=c("fa fa-edit icon-edit",{title:a.link.edit,event:"showLinkDialog",hide:!0}),e=c("fa fa-unlink icon-unlink",{title:a.link.unlink,event:"unlink"}),f='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+b+e+"</div>";return d("note-link-popover",f)},g=function(){var e=b('<span class="note-fontsize-10">100%</span>',{title:a.image.resizeFull,event:"resize",value:"1"}),f=b('<span class="note-fontsize-10">50%</span>',{title:a.image.resizeHalf,event:"resize",value:"0.5"}),g=b('<span class="note-fontsize-10">25%</span>',{title:a.image.resizeQuarter,event:"resize",value:"0.25"}),h=c("fa fa-align-left icon-align-left",{title:a.image.floatLeft,event:"floatMe",value:"left"}),i=c("fa fa-align-right icon-align-right",{title:a.image.floatRight,event:"floatMe",value:"right"}),j=c("fa fa-align-justify icon-align-justify",{title:a.image.floatNone,event:"floatMe",value:"none"}),k=c("fa fa-square icon-unchecked",{title:a.image.shapeRounded,event:"imageShape",value:"img-rounded"}),l=c("fa fa-circle-o icon-circle-blank",{title:a.image.shapeCircle,event:"imageShape",value:"img-circle"}),m=c("fa fa-picture-o icon-picture",{title:a.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),n=c("fa fa-times icon-times",{title:a.image.shapeNone,event:"imageShape",value:""}),o=c("fa fa-trash-o icon-trash",{title:a.image.remove,event:"removeMedia",value:"none"}),p='<div class="btn-group">'+e+f+g+'</div><div class="btn-group">'+h+i+j+'</div><div class="btn-group">'+k+l+m+n+'</div><div class="btn-group">'+o+"</div>";return d("note-image-popover",p)},i=function(){for(var b="",c=0,f=e.airPopover.length;f>c;c++){var g=e.airPopover[c];b+='<div class="note-'+g[0]+' btn-group">';for(var i=0,j=g[1].length;j>i;i++)b+=h[g[1][i]](a,e);b+="</div>"}return d("note-air-popover",b)};return'<div class="note-popover">'+f()+g()+(e.airMode?i():"")+"</div>"},k=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},l=function(a,b){return'<table class="note-shortcut"><thead><tr><th></th><th>'+a+"</th></tr></thead><tbody>"+b+"</tbody></table>"},m=function(a){var b="<tr><td>⌘ + B</td><td>"+a.font.bold+"</td></tr><tr><td>⌘ + I</td><td>"+a.font.italic+"</td></tr><tr><td>⌘ + U</td><td>"+a.font.underline+"</td></tr><tr><td>⌘ + ⇧ + S</td><td>"+a.font.strikethrough+"</td></tr><tr><td>⌘ + \\</td><td>"+a.font.clear+"</td></tr>";return l(a.shortcut.textFormatting,b)},n=function(a){var b="<tr><td>⌘ + Z</td><td>"+a.history.undo+"</td></tr><tr><td>⌘ + ⇧ + Z</td><td>"+a.history.redo+"</td></tr><tr><td>⌘ + ]</td><td>"+a.paragraph.indent+"</td></tr><tr><td>⌘ + [</td><td>"+a.paragraph.outdent+"</td></tr><tr><td>⌘ + ENTER</td><td>"+a.hr.insert+"</td></tr>";return l(a.shortcut.action,b)},o=function(a){var b="<tr><td>⌘ + ⇧ + L</td><td>"+a.paragraph.left+"</td></tr><tr><td>⌘ + ⇧ + E</td><td>"+a.paragraph.center+"</td></tr><tr><td>⌘ + ⇧ + R</td><td>"+a.paragraph.right+"</td></tr><tr><td>⌘ + ⇧ + J</td><td>"+a.paragraph.justify+"</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>"+a.lists.ordered+"</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>"+a.lists.unordered+"</td></tr>";return l(a.shortcut.paragraphFormatting,b)},p=function(a){var b="<tr><td>⌘ + NUM0</td><td>"+a.style.normal+"</td></tr><tr><td>⌘ + NUM1</td><td>"+a.style.h1+"</td></tr><tr><td>⌘ + NUM2</td><td>"+a.style.h2+"</td></tr><tr><td>⌘ + NUM3</td><td>"+a.style.h3+"</td></tr><tr><td>⌘ + NUM4</td><td>"+a.style.h4+"</td></tr><tr><td>⌘ + NUM5</td><td>"+a.style.h5+"</td></tr><tr><td>⌘ + NUM6</td><td>"+a.style.h6+"</td></tr>";return l(a.shortcut.documentStyle,b)},q=function(a,b){var c=b.extraKeys,d="";for(var e in c)c.hasOwnProperty(e)&&(d+="<tr><td>"+e+"</td><td>"+c[e]+"</td></tr>");return l(a.shortcut.extraKeys,d)},r=function(a,b){var c='<table class="note-shortcut-layout"><tbody><tr><td>'+n(a,b)+"</td><td>"+m(a,b)+"</td></tr><tr><td>"+p(a,b)+"</td><td>"+o(a,b)+"</td></tr>";return b.extraKeys&&(c+='<tr><td colspan="2">'+q(a,b)+"</td></tr>"),c+="</tbody></table>"},s=function(a){return a.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")},t=function(a,b){var c=function(){var b='<div class="note-group-select-from-files"><h5>'+a.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /></div><h5>'+a.image.url+'</h5><input class="note-image-url form-control span12" type="text" />',c='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+a.image.insert+"</button>";return g("note-image-dialog",a.image.insert,b,c)},d=function(){var b='<div class="form-group"><label>'+a.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group"><label>'+a.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>',c='<button href="#" class="btn btn-primary note-link-btn disabled " disabled>'+a.link.insert+"</button>";return g("note-link-dialog",a.link.insert,b,c)},f=function(){var b='<div class="form-group"><label>'+a.video.url+'</label>&nbsp;<small class="text-muted">'+a.video.providers+'</small><input class="note-video-url form-control span12" type="text" /></div>',c='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+a.video.insert+"</button>";return g("note-video-dialog",a.video.insert,b,c)},h=function(){var c='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+a.shortcut.close+'</a><div class="title">'+a.shortcut.shortcuts+"</div>"+(e.isMac?r(a,b):s(r(a,b)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.10</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>';return g("note-help-dialog","",c,"")};return'<div class="note-dialog">'+c()+d()+f()+h()+"</div>"},u=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},v=function(a,b,c){return},w=function(b,c){var d=c.colors;b.find(".note-color-palette").each(function(){for(var b=a(this),c=b.attr("data-target-event"),e=[],f=0,g=d.length;g>f;f++){for(var h=d[f],i=[],j=0,k=h.length;k>j;j++){var l=h[j];i.push(['<button type="button" class="note-color-btn" style="background-color:',l,';" data-event="',c,'" data-value="',l,'" title="',l,'" data-toggle="button" tabindex="-1"></button>'].join(""))}e.push('<div class="note-color-row">'+i.join("")+"</div>")}b.html(e.join(""))})};this.createLayoutByAirMode=function(b,c){var d=c.keyMap[e.isMac?"mac":"pc"],g=a.extend(a.summernote.lang["en-US"],a.summernote.lang[c.lang]),h=f.uniqueId();b.addClass("note-air-editor note-editable"),b.attr({id:"note-editor-"+h,contentEditable:!0});var j=document.body,l=a(i(g,c));l.addClass("note-air-layout"),l.attr("id","note-popover-"+h),l.appendTo(j),v(l,d),w(l,c);var m=a(k());m.addClass("note-air-layout"),m.attr("id","note-handle-"+h),m.appendTo(j);var n=a(t(g,c));n.addClass("note-air-layout"),n.attr("id","note-dialog-"+h),n.find("button.close, a.modal-close").click(function(){a(this).closest(".modal").modal("hide")}),n.appendTo(j)},this.createLayoutByFrame=function(b,c){var d=a('<div class="note-editor"></div>');c.width&&d.width(c.width),c.height>0&&a('<div class="note-statusbar">'+(c.disableResizeEditor?"":u())+"</div>").prependTo(d);var f=!b.is(":disabled"),g=a('<div class="note-editable" contentEditable="'+f+'"></div>').prependTo(d);c.height&&g.height(c.height),c.direction&&g.attr("dir",c.direction),g.html(j.html(b)||j.emptyPara),a('<textarea class="note-codable"></textarea>').prependTo(d);for(var l=a.extend(a.summernote.lang["en-US"],a.summernote.lang[c.lang]),m="",n=0,o=c.toolbar.length;o>n;n++){var p=c.toolbar[n][0],q=c.toolbar[n][1];m+='<div class="note-'+p+' btn-group">';for(var r=0,s=q.length;s>r;r++)a.isFunction(h[q[r]])&&(m+=h[q[r]](l,c));m+="</div>"}m='<div class="note-toolbar btn-toolbar">'+m+"</div>";var x=a(m).prependTo(d),y=c.keyMap[e.isMac?"mac":"pc"];w(x,c),v(x,y,"bottom");var z=a(i(l,c)).prependTo(d);w(z,c),v(z,y),a(k()).prependTo(d);var A=a(t(l,c)).prependTo(d);A.find("button.close, a.modal-close").click(function(){a(this).closest(".modal").modal("hide")}),a('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(d),d.insertAfter(b),b.hide()},this.noteEditorFromHolder=function(b){return b.hasClass("note-air-editor")?b:b.next().hasClass("note-editor")?b.next():a()},this.createLayout=function(a,b){this.noteEditorFromHolder(a).length||(b.airMode?this.createLayoutByAirMode(a,b):this.createLayoutByFrame(a,b))},this.layoutInfoFromHolder=function(a){var b=this.noteEditorFromHolder(a);if(b.length){var c=j.buildLayoutInfo(b);for(var d in c)c.hasOwnProperty(d)&&(c[d]=c[d].call());return c}},this.removeLayout=function(a,b,c){c.airMode?(a.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),b.popover.remove(),b.handle.remove(),b.dialog.remove()):(a.html(b.editable.html()),b.editor.remove(),a.show())}};a.summernote=a.summernote||{},a.extend(a.summernote,k);var B=new A,C=new z;a.fn.extend({summernote:function(b){if(b=a.extend({},a.summernote.options,b),this.each(function(c,d){var e=a(d);B.createLayout(e,b);var f=B.layoutInfoFromHolder(e);C.attach(f,b),j.isTextarea(e[0])&&e.closest("form").submit(function(){e.val(e.code())})}),this.first().length&&b.focus){var c=B.layoutInfoFromHolder(this.first());c.editable.focus()}return this.length&&b.oninit&&b.oninit(),this},code:function(b){if(void 0===b){var c=this.first();if(!c.length)return;var d=B.layoutInfoFromHolder(c);if(d&&d.editable){var f=d.editor.hasClass("codeview");
return f&&e.hasCodeMirror&&d.codable.data("cmEditor").save(),f?d.codable.val():d.editable.html()}return j.isTextarea(c[0])?c.val():c.html()}return this.each(function(c,d){var e=B.layoutInfoFromHolder(a(d));e&&e.editable&&e.editable.html(b)}),this},destroy:function(){return this.each(function(b,c){var d=a(c),e=B.layoutInfoFromHolder(d);if(e&&e.editable){var f=e.editor.data("options");C.dettach(e,f),B.removeLayout(d,e,f)}}),this}})});

window.hzmr.push("summernote:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End summernote.js  **************/
/************* Start jquery.htmlClean.js for locale en-US **************/
try {!function(a){function b(a,b,c,d){if(a.tag.format&&c.length>0){c.push("\n");for(var e=0;d>e;e++)c.push("	")}}function c(d,e){var f=[],g=0==d.attributes.length,h=0;if(d.tag.isComment)e.allowComments&&(f.push("<!--"),f.push(d.tag.rawAttributes),f.push(">"),e.format&&b(d,e,f,h-1));else{var i=d.tag.render&&(0==e.allowedTags.length||a.inArray(d.tag.name,e.allowedTags)>-1)&&(0==e.removeTags.length||-1==a.inArray(d.tag.name,e.removeTags));if(!d.isRoot&&i&&(f.push("<"),f.push(d.tag.name),a.each(d.attributes,function(){if(-1==a.inArray(this.name,e.removeAttrs)){var b=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),c=b[2],g=b[1]||"'";"class"==this.name&&e.allowedClasses.length>0&&(c=a.grep(c.split(" "),function(b){return a.grep(e.allowedClasses,function(c){return c==b||c[0]==b&&(1==c.length||a.inArray(d.tag.name,c[1])>-1)}).length>0}).join(" ")),null!=c&&(c.length>0||a.inArray(this.name,d.tag.requiredAttributes)>-1)&&(f.push(" "),f.push(this.name),f.push("="),f.push(g),f.push(c),f.push(g))}})),d.tag.isSelfClosing)i&&f.push(" />"),g=!1;else if(d.tag.isNonClosing)g=!1;else{if(!d.isRoot&&i&&f.push(">"),h=e.formatIndent++,d.tag.toProtect)n=a.htmlClean.trim(d.children.join("")).replace(/<br>/gi,"\n"),f.push(n),g=0==n.length;else{for(var n=[],p=0;p<d.children.length;p++){var q=d.children[p],r=a.htmlClean.trim(o(l(q)?q:q.childrenToString()));m(q)&&p>0&&r.length>0&&(j(q)||k(d.children[p-1]))&&n.push(" "),l(q)?r.length>0&&n.push(r):(p!=d.children.length-1||"br"!=q.tag.name)&&(e.format&&b(q,e,n,h),n=n.concat(c(q,e)))}e.formatIndent--,n.length>0&&(e.format&&"\n"!=n[0]&&b(d,e,f,h),f=f.concat(n),g=!1)}!d.isRoot&&i&&(e.format&&b(d,e,f,h-1),f.push("</"),f.push(d.tag.name),f.push(">"))}if(!d.tag.allowEmpty&&g)return[]}return f}function d(b,c){return f(b,function(b){return a.inArray(b.tag.nameOriginal,c)>-1})}function e(a){return f(a,function(a){return a.isRoot||!a.tag.isInline})}function f(a,b,c){c=c||1;var d=a[a.length-c];return b(d)?!0:a.length-c>0&&f(a,b,c+1)?(a.pop(),!0):!1}function g(a){return a?(this.tag=a,this.isRoot=!1):(this.tag=new i("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(a){for(var b=0;b<this.attributes.length;b++)if(this.attributes[b].name==a)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function h(a,b){return this.name=a,this.value=b,this}function i(b,c,d,e){return this.name=b.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0,this.format=!0):(this.isComment=!1,this.isSelfClosing=a.inArray(this.name,v)>-1,this.isNonClosing=a.inArray(this.name,w)>-1,this.isClosing=void 0!=c&&c.length>0,this.isInline=a.inArray(this.name,p)>-1,this.disallowNest=a.inArray(this.name,r)>-1,this.requiredParent=t[a.inArray(this.name,t)+1],this.allowEmpty=e&&a.inArray(this.name,e.allowEmpty)>-1,this.toProtect=a.inArray(this.name,u)>-1,this.format=a.inArray(this.name,q)>-1||!this.isInline),this.rawAttributes=d,this.requiredAttributes=y[a.inArray(this.name,y)+1],e){if(e.tagAttributesCache||(e.tagAttributesCache=[]),-1==a.inArray(this.name,e.tagAttributesCache)){for(var b=x[a.inArray(this.name,x)+1].slice(0),f=0;f<e.allowedAttributes.length;f++){var g=e.allowedAttributes[f][0];(1==e.allowedAttributes[f].length||a.inArray(this.name,e.allowedAttributes[f][1])>-1)&&-1==a.inArray(g,b)&&b.push(g)}e.tagAttributesCache.push(this.name),e.tagAttributesCache.push(b)}this.allowedAttributes=e.tagAttributesCache[a.inArray(this.name,e.tagAttributesCache)+1]}},this.init(),this.rename=function(a){this.name=a,this.init()},this}function j(b){for(;n(b)&&b.children.length>0;)b=b.children[0];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(0))}function k(b){for(;n(b)&&b.children.length>0;)b=b.children[b.children.length-1];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(c.length-1))}function l(a){return a.constructor==String}function m(a){return l(a)||a.tag.isInline}function n(a){return a.constructor==g}function o(a){return a.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}a.fn.htmlClean=function(b){return this.each(function(){this.value?this.value=a.htmlClean(this.value,b):this.innerHTML=a.htmlClean(this.innerHTML,b)})},a.htmlClean=function(b,f){f=a.extend({},a.htmlClean.defaults,f),f.allowEmpty=s.concat(f.allowEmpty);var j,k=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,m=/([\w\-]+)\s*=\s*(".*?"|'.*?'|[^\s>\/]*)/gi,n=new g,o=[n],p=n;f.bodyOnly&&(j=/<body[^>]*>((\n|.)*)<\/body>/i.exec(b))&&(b=j[1]),b=b.concat("<xxx>");for(var q;j=k.exec(b);){var r=j[6]?new i("--",null,j[6],f):new i(j[4],j[2],j[5],f),t=b.substring(q,j.index);if(t.length>0){var u=p.children[p.children.length-1];p.children.length>0&&l(u=p.children[p.children.length-1])?p.children[p.children.length-1]=u.concat(t):p.children.push(t)}if(q=k.lastIndex,r.isClosing)d(o,[r.name])&&(o.pop(),p=o[o.length-1]);else{for(var v,w=new g(r);v=m.exec(r.rawAttributes);){if("style"==v[1].toLowerCase()&&f.replaceStyles)for(var x=!r.isInline,y=0;y<f.replaceStyles.length;y++)f.replaceStyles[y][0].test(v[2])&&(x||(r.render=!1,x=!0),p.children.push(w),o.push(w),p=w,r=new i(f.replaceStyles[y][1],"","",f),w=new g(r));null!=r.allowedAttributes&&(0==r.allowedAttributes.length||a.inArray(v[1],r.allowedAttributes)>-1)&&w.attributes.push(new h(v[1],v[2]))}a.each(r.requiredAttributes,function(){var a=this.toString();w.hasAttribute(a)||w.attributes.push(new h(a,""))});for(var z=0;z<f.replace.length;z++)for(var A=0;A<f.replace[z][0].length;A++){var B="string"==typeof f.replace[z][0][A];if(B&&f.replace[z][0][A]==r.name||!B&&f.replace[z][0][A].test(j)){r.rename(f.replace[z][1]),z=f.replace.length;break}}var C=!0;if(p.isRoot||(p.tag.isInline&&!r.isInline?(C=e(o))&&(p=o[o.length-1]):p.tag.disallowNest&&r.disallowNest&&!r.requiredParent?C=!1:r.requiredParent&&(C=d(o,r.requiredParent))&&(p=o[o.length-1])),C)if(p.children.push(w),r.toProtect)for(var D;D=k.exec(b);){var E=new i(D[4],D[1],D[5],f);if(E.isClosing&&E.name==r.name){w.children.push(RegExp.leftContext.substring(q)),q=k.lastIndex;break}}else r.isSelfClosing||r.isNonClosing||(o.push(w),p=w)}}return a.htmlClean.trim(c(n,f).join(""))},a.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1,allowEmpty:[]},a.htmlClean.trim=function(b){return a.htmlClean.trimStart(a.htmlClean.trimEnd(b))},a.htmlClean.trimStart=function(b){return b.substring(a.htmlClean.trimStartIndex(b))},a.htmlClean.trimStartIndex=function(b){for(var c=0;c<b.length-1&&a.htmlClean.isWhitespace(b.charAt(c));c++);return c},a.htmlClean.trimEnd=function(b){return b.substring(0,a.htmlClean.trimEndIndex(b))},a.htmlClean.trimEndIndex=function(b){for(var c=b.length-1;c>=0&&a.htmlClean.isWhitespace(b.charAt(c));c--);return c+1},a.htmlClean.isWhitespace=function(b){return-1!=a.inArray(b,z)};var p=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],q=["address","button","caption","code","input","label","legend","select","option","param"],r=["h1","h2","h3","h4","h5","h6","p","th","td","object"],s=["th","td"],t=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],u=["script","style","pre","code"],v=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],w=["!doctype","?xml"],x=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"iframe",["class","height","name","sandbox","seamless","src","srcdoc","width"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],y=[[],"img",["alt"]],z=[" "," ","	","\n","\r","\f"]}(jQuery);

window.hzmr.push("jquery.htmlClean:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.htmlClean.js  **************/
/************* Start richTextEditor.js for locale en-US **************/
try {HZ.ns("HZ.textEditor"),HZ.textEditor.RichTextEditor=HZ.textEditor.RichTextEditor||{},$.fn.RichTextEditor=function(a){this.imageLimit=10,this.inactiveHeight=102,this.textArea=null;var b=null;this.activeHeight=102,this.shortFormMaxHeight=102,this.longFormMaxHeight=320,this.styleWithSpan=!1,this.toolbar=[["style",["bold","italic"]],["list",["ul","ol"]],["picture",["picture"]],["video",["video"]],["link",["link"]]],this.allowedTags=["p","br","a","img","iframe","b","i","ul","ol","li"],this.allowedAttributes=[["target",["a"]],["frameborder",["iframe"]],["class",["p"]],["style",["p"]],["data-hzurl",["img"]],["onContextMenu",["img"]],["onmousedown",["img"]],["ondragstart",["img"]],["onselectstart",["img"]],["width",["img"]],["height",["img"]]],this.removeTags=[],this.removeAttributes=[],this.allowEmpty=[],this.replaceTags=[[["div"],"p"]],this.allowedHotKeyFunctions=["italic","bold"],this.supportsDirectUpload=!(UIHelper.isIE6||UIHelper.isIE7||UIHelper.isIE8||UIHelper.isIE9),this.onEnter=function(a){},this.onKeyUp=function(a){},this.onKeyDown=function(a){this.disableControlCommands(a)},this.onFocus=function(a){},this.onBlur=function(a){this.$editor.find("div").length},this.onPaste=function(a){setTimeout($.proxy(function(){this.limitImages()},this),0)},this.setDirty=function(){return this.$editorWrapper&&this.$editorWrapper.parents("form")?this.$editorWrapper.closest("form").addClass("dirty"):void 0},this.setClean=function(){return this.$editorWrapper.closest("form").removeClass("dirty")},this.isDirty=function(){return this.$editorWrapper.closest("form").hasClass("dirty")},this.contentHasChanged=function(){if(!this.isDirty())return!1;var a=this.$editor.code();return b&&b.length?b!=a:!this.isEmpty()},this.onChange=function(a,b){this.setDirty(),this.limitImages()},this.onInit=function(){this.initObjectReferences(),this.initOnEditorClick(),this.initOnIframeWrapperClick(),this.initOnWindowResize(),this.prepareDialogs(),this.repositionToolbar(),this.styleToolbarButtons(),this.supportsDirectUpload&&this.initUploadPhotoButton(),this.resizeToolbarButtons(),this.stylePopovers(),this.showEditor(),this.translateText(),this.setClean(),$(window).on("beforeunload",$.proxy(function(){return this.contentHasChanged()?_hgt("You haven't finished your post yet. Do you want to leave without posting?"):void 0},this))},this.initObjectReferences=function(){this.$editor=this.$wrapper.find(".note-editable"),this.$toolbar=this.$wrapper.find(".note-toolbar"),this.$linkPopover=this.$wrapper.find(".note-link-popover"),this.$editor.wrap('<div class="note-editable-wrapper"></div>'),this.$editorWrapper=this.$editor.parent(".note-editable-wrapper").css("min-height",this.inactiveHeight),b=this.textArea&&this.textArea.length>0?this.textArea.val():null,b&&this.textArea.attr("placeholder")&&b==this.textArea.attr("placeholder")&&(b=null)},this.focusEditor=function(a){return this.$editor.focus(),a&&this.selectNode(this.$editor,!0),this},this.blurEditor=function(){return this.$editor.blur(),this.clearSelection(),this},this.wrapWithParagraph=function(){var a=3,b=this.getSelection(),c=$(b.anchorNode);return b.anchorNode&&b.anchorNode.nodeType===a&&c.parent().hasClass("note-editable")&&(c.wrap("<p></p>"),this.selectNode(c.parent(),!1)),this},this.limitImages=function(){var a=this.$editor.find("img");a.length>=this.imageLimit?(a.slice(this.imageLimit).remove(),this.$toolbar.find(".note-picture button").prop("disabled",!0).attr("data-event",""),this.$toolbar.find(".note-upload button").prop("disabled",!0)):(this.$toolbar.find(".note-picture button").prop("disabled",!1).attr("data-event","showImageDialog"),this.$toolbar.find(".note-upload button").prop("disabled",!1))},this.clearSelection=function(){return window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this},this.isEmpty=function(){var a=""==$.trim(this.$editor.text())&&!this.$editor.find("img, iframe").length;return a},this.resizeToolbarButtons=function(){return this.$toolbar.find("button span").toggle(this.$editor.width()>460),this},this.initUploadPhotoButton=function(){return this.$uploadPhotoFileInput=$('<input name="file" type="file">').appendTo("body").hide(),this.$uploadPhotoButton=$('<button type="button" class="btn btn-default btn-sm btn-small" title="'+_hgt("Upload Photo")+'" data-hide="true" tabindex="-1"><i class="fa-link hzi-font hzi-Add_Photo"></i><span>'+_hgt("Photo")+"</span></button>").on("click",$.proxy(function(){this.$uploadPhotoFileInput.click()},this)),this.$uploadPhotoFileInput.ajaxfileupload({action:"/createTempPhoto",params:{type:-1,minHeight:0,minWidth:0},submit_button:null,onStart:$.proxy(function(){this.insertThrobber()},this),onComplete:$.proxy(function(a){a.status===!1&&"undefined"!=typeof a.message||a.error||a.tempImageUrl&&this.insertUploadedPhoto(a.tempImageUrl)},this)}),this.$uploadPhotoButton.insertBefore(this.$toolbar.find(".note-picture")),this.$uploadPhotoButton.wrap('<div class="note-upload btn-group"></div>'),this},this.insertThrobber=function(){this.focusEditor();var a=document.selection;if(a){var b=a.createRange();document.execCommand("insertImage",!1,HZ.utils.Links.getPicUrl("greenThrobber.gif")),b.collapse(!1),b.select()}else document.execCommand("insertImage",!1,HZ.utils.Links.getPicUrl("greenThrobber.gif"));this.$imageThrobber=this.$editor.find('img[src="'+HZ.utils.Links.getPicUrl("greenThrobber.gif")+'"]'),this.selectNode(this.$imageThrobber,!1)},this.insertUploadedPhoto=function(a){if(this.$imageThrobber.length){var b=$('<img oncontextmenu="return false;" data-pin-no-hover="true" class="hide-context"  data-hzurl="'+a+'" src="'+a+'">').on("load",$.proxy(function(a){},this));this.$imageThrobber.replaceWith(b);var c=b.next();c.length||(c=$("<p><br></p>").insertAfter(b),this.selectNode(c,!0))}},this.showEditor=function(){return this.$toolbar.show(),this},this.disableControlCommands=function(a){var b=66,c=98,d=73,e=105,f=85,g=117;if(a.ctrlKey||a.metaKey)switch(a.keyCode){case b:case c:this.preventDefault(a);break;case d:case e:break;case f:case g:this.preventDefault(a)}},this.interceptPastedFiles=function(a){for(var b=a.originalEvent.clipboardData,c=new RegExp("^data:"),d=0;d<b.types.length;d++)"Files"===b.types[d]&&(setTimeout($.proxy(function(){this.$editor.find("img").each(function(a,b){var d=$(b);d.attr("src").match(c)&&d.remove()})},this),250),this.preventDefault(a));return this},this.preventDefault=function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},this.interceptPastedHtml=function(a){var b="https?://st.(houzz2?|stghouzz).com/([sf]imgs|simgstmp)/",c=HZ.utils.Links.getPageUrl("previewHouzzObject"),d="^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*",e=new RegExp("\\/\\/(player.)?vimeo.com\\/([a-z]*\\/)*([0-9]{6,11})[?]?.*"),f=a.originalEvent.clipboardData.getData("text/html"),g=new RegExp(b),h=new RegExp(c),i=new RegExp(d),j=new RegExp(e);return f.length&&setTimeout($.proxy(function(){this.$editor.find("img").each(function(a,b){var c=$(b);c.attr("src")&&!c.attr("src").match(g)&&c.remove()}),this.$editor.find("iframe").each(function(a,b){var c=$(b);!c.attr("src")||c.attr("src").match(h)||c.attr("src").match(i)||c.attr("src").match(j)||c.remove()}),this.$editor.find("p:not(.iframe-wrapper):not(.iframe-throbber), a").each(function(a,b){$(b).attr("class","").attr("style","")})},this),250),this},this.interceptPastedText=function(a){for(var b=0;b<a.originalEvent.clipboardData.types.length;b++)if("text/html"===a.originalEvent.clipboardData.types[b])return this;var c=a.originalEvent.clipboardData.getData("text/plain");return c.length&&this.convertUrlsToLinks(a,c),this};var c=8,d=37,e=38,f=39,g=40,h=13,i=32;return this.interceptKeyDown=function(a){var b=a.which,j=this.getSelection(),k=$(j.anchorNode),l=b>47&&58>b,m=b>64&&91>b,n=b>95&&112>b,o=b>185&&193>b||b>218&&223>b,p=b===i||l||m||n||o;if(p){if(k.closest(".iframe-wrapper").length){var q=this.onEnterKey(k);this.selectNode(q,!0)}}else if(b===d||b===e){if(k.closest(".iframe-wrapper").length){var r=k.prev();r.length||(r=$("<p><br></p>"),k.before(r)),this.selectNode(r,!1),this.preventDefault(a)}}else if(b===f||b===g){if(k.closest(".iframe-wrapper").length){var q=k.next();q.length||(q=$("<p><br></p>"),k.after(q)),this.selectNode(q,!0),this.preventDefault(a)}}else if(b===c){var s=k.closest(".iframe-wrapper");if(s.length){var r=this.onBackspaceKey(s);this.selectNode(r,!1),this.preventDefault(a)}}else if(b===h){var s=k.closest(".iframe-wrapper");if(s.length){var q=this.onEnterKey(k);this.selectNode(q,!0),this.preventDefault(a)}}return this},this.onEnterKey=function(a){var b=$("<p><br></p>");return a.after(b).remove(),b},this.onBackspaceKey=function(a){var b=a.prev();return b.length||(b=$("<p><br></p>"),a.before(b)),a.remove(),b},this.selectNode=function(a,b){if(window.getSelection&&document.createRange){var c=document.createRange(),d=window.getSelection();void 0!=b||null!=b?(c.selectNodeContents(a[0]),c.collapse(b)):c.selectNode(a[0]),d.removeAllRanges(),d.addRange(c)}else if(document.selection&&document.body.createTextRange){var e=document.body.createTextRange();e.moveToElementText(a[0]),e.collapse(b),e.select()}return this},this.selectIframeWrapper=function(){var a=this.getSelection(),b=$(a.anchorNode),c=b.closest(".iframe-wrapper");if(c.length)if(c.hasClass("loading")){var d=c.prev();d.length||(d=$("<p><br></p>"),c.before(d)),this.selectNode(d,!1)}else this.selectNode(c),c.addClass("selected");else this.$wrapper.find(".iframe-wrapper.selected").removeClass("selected");return this},this.getSelection=function(){return window.getSelection?window.getSelection():document.selection.createRange?document.selection.createRange():void 0},this.scrollToCursor=function(a){if(a&&"keyup"==a.type){var b=a.keyCode;if($.inArray(b,[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,46,91,93,144,145])>=0)return this}var c=this.getSelection();if("None"!==c.type&&c.anchorNode){this.$cursorSpan=this.$cursorSpan||$('<span class="cursor-span"></span>');var d=c.getRangeAt(0);d.insertNode(this.$cursorSpan[0]);var e=10,f=this.$cursorSpan.offset().top,g=this.$editorWrapper.offset().top,h=this.$editorWrapper.offset().top+this.$editorWrapper.height();(g-e>f||f>h+e)&&this.$editorWrapper.scrollTop(this.$cursorSpan.position().top)}return this},this.editSummernoteHotkeys=function(a){return this.editKeyMap($.summernote.options.keyMap.pc,a),this.editKeyMap($.summernote.options.keyMap.mac,a),this},this.editKeyMap=function(a,b){for(var c in a){var d=a[c];-1==$.inArray(d,b)&&delete a[c]}return this},this.repositionToolbar=function(){return this.$wrapper.find(".note-editor").append(this.$toolbar.hide().detach()),this},this.stylePopovers=function(){var a=this.$linkPopover.find("button[data-event=showLinkDialog]"),b=this.$linkPopover.find("button[data-event=unlink]");return a.before("|&nbsp;").after("&nbsp;|&nbsp;"),a.replaceWith('<span data-event="showLinkDialog">'+_hgt("Change")+"</span>"),b.replaceWith('<span data-event="unlink">'+_hgt("Remove")+"</span>"),this},this.prepareDialogs=function(){return HZ.textEditor.InsertPhoto.prepare(),HZ.textEditor.InsertLink.prepare(),HZ.textEditor.InsertVideo.prepare(),HZ.textEditor.InsertPhoto.InsertPhotoDialog.$richTextEditor=this,HZ.textEditor.InsertLink.InsertLinkDialog.$richTextEditor=this,HZ.textEditor.InsertVideo.InsertVideoDialog.$richTextEditor=this,this},this.resizeEditor=function(){return this},this.styleToolbarButtons=function(){var a=this.$toolbar;return a.find(".note-style").addClass("hidden-xs"),a.find(".note-list").addClass("hidden-xs"),a.find(".note-video").addClass("hidden-xs"),a.find(".note-link").addClass("hidden-xs"),a.find(".fa.icon-bold").removeClass("fa fa-bold icon-bold").addClass("hzi-font hzi-Bold"),a.find(".fa.icon-italic").removeClass("fa fa-italic icon-italic").addClass("hzi-font hzi-Italics"),a.find(".fa.icon-list-ol").removeClass("fa fa-list-ol icon-list-ol").addClass("hzi-font hzi-Ordered-List"),a.find(".fa.icon-list-ul").removeClass("fa fa-list-ul icon-list-ul").addClass("hzi-font hzi-Unordered-List"),a.find(".fa.icon-picture").removeClass("fa fa-picture-o icon-picture").addClass("hzi-font hzi-Houzz-Photo").after("<span>"+(this.supportsDirectUpload?_hgt("Houzz Photo"):_hgt("Photo"))+"</span>"),a.find(".note-picture button").attr("title",_hgt("Choose or Upload a Photo")),a.find(".fa.icon-play").removeClass("fa fa-youtube-play icon-play").addClass("hzi-font hzi-Video").after("<span>"+_hgt("Video")+"</span>"),a.find(".fa.icon-link").removeClass("fa fa-link-o icon-link").addClass("hzi-font hzi-Link").after("<span>"+_hgt("Link")+"</span>"),this},this.translateText=function(){this.$toolbar.find("button[title=Bold]").attr("title",_hgt("Bold")),this.$toolbar.find("button[title=Italic]").attr("title",_hgt("Italic")),this.$toolbar.find('button[title="Unordered list"]').attr("title",_hgt("Unordered List")),this.$toolbar.find('button[title="Ordered list"]').attr("title",_hgt("Ordered List")),this.$toolbar.find('button[title="Upload Photo"]').attr("title",_hgt("Upload Photo")),this.$toolbar.find('button[title="Choose or Upload a Photo"]').attr("title",_hgt("Choose or Upload a Photo")),this.$toolbar.find("button[title=Video]").attr("title",_hgt("Video")),this.$toolbar.find("button[title=Link]").attr("title",_hgt("Link")),this.$toolbar.find("button[title=Fullscreen]").attr("title",_hgt("Fullscreen"))},this.initOnIframeWrapperClick=function(){return this.$editor.on("click",".iframe-wrapper",$.proxy(function(a){this.$editor.find(".iframe-wrapper.selected").removeClass("selected"),this.selectNode(a.currentTarget);var b=this.getSelection(),c=document.createRange();c.selectNode(a.currentTarget),b.removeAllRanges(),b.addRange(c),$(a.currentTarget).addClass("selected")},this)),this},this.initOnEditorClick=function(){return this.$editorWrapper.on("click",$.proxy(function(a){$(a.target).hasClass("note-editable-wrapper")&&this.focusEditor(),$(a.target).closest(".iframe-wrapper").length||this.$editor.find(".iframe-wrapper.selected").removeClass("selected")},this)),this},this.initOnToolbarButtonClick=function(){var a=this.$toolbar.find("button");return a.on("click",$.proxy(function(a){this.$editor.off("blur")},this)),this},this.initOnWindowResize=function(){var a=this.$editor.width();return $(window).resize($.throttle(250,$.proxy(function(){this.$editor.width()!=a&&(a=this.$editor.width(),this.resizeIframeWrappers(),this.resizeToolbarButtons())},this))),this},this.resizeIframeWrappers=function(){var a=this.$editor.find(".iframe-wrapper");return a.length&&a.each(function(a,b){var c,d=$(b),e=new RegExp("height=(:?[0-9]+)"),f=new RegExp("width=(:?[0-9]+)"),g=d.find("iframe").attr("src"),h=e.exec(g),i=f.exec(g),j=h&&h.length>1?parseInt(h[1]):null,k=i&&i.length>1?parseInt(i[1]):null,l=5;c=j&&k?j/(k>this.$editor.width()?k:this.$editor.width()):.56,d.css("padding-bottom",100*c+l+"%")}),this},this.cleanHtml=function(){var a=3,b=$.htmlClean(this.$editor.code(),{allowedTags:this.allowedTags,allowedAttributes:this.allowedAttributes,removeAttrs:this.removeAttributes,removeTags:this.removeTags,replace:this.replaceTags,allowEmpty:this.allowEmpty});return this.$editor.html(b),this.$editor.contents().each(function(b,c){c.nodeType===a&&$(c).wrap("<p></p>")}),this},this.positionCaretAtEnd=function(){return this.selectNode(this.$editor,!1),this},this.prepare=function(){return this.$wrapper=this.closest(".rich-text-editor-wrapper"),this.editSummernoteHotkeys(this.allowedHotKeyFunctions),this},this.init=function(){return this.summernote({styleWithSpan:this.styleWithSpan,toolbar:this.toolbar,onkeyup:$.proxy(function(a){this.onKeyUp(a)},this),onkeydown:$.proxy(function(a){return this.onKeyDown(a)},this),onenter:$.proxy(function(a){this.onEnter(a)},this),onfocus:$.proxy(function(a){this.onFocus(a)},this),onblur:$.proxy(function(a){this.onBlur(a)},this),onpaste:$.proxy(function(a){this.onPaste(a)},this),onChange:$.proxy(function(a,b){this.onChange(a,b)},this),oninit:$.proxy(function(){this.onInit()},this)}),this},this.convertUrlsToLinks=function(a,b){var c=new RegExp("https?://*"),d=b.match(c),e=new RegExp("https?://(?:www\\.)?(?:mytest|houzztest|houzz2?|stghouzz)\\.[A-Za-z\\./]*/("+HZ.utils.Config.spaceCommand+"|"+HZ.utils.Config.galleryCommand+"|projects)/(\\d+)(?=(?:\\D|$))[/\\?=&\\+%\\w-#]*");b.match(e);d&&d[0].length&&(-1===b.indexOf("://")&&(b="http://"+b),document.execCommand("insertHTML",!0,'<a href="'+b+'" target="_blank">'+b+"</a>"),a.preventDefault())},$.extend(this,a||{}),this},HZ.textEditor.InsertPhotoDialog=function(){HZ.textEditor.InsertPhotoDialog.superclass.constructor.call(this),this.initVariables=function(){return this.allSpaces={},this.isUploadedImage=!1,this.areIdeabooksLoaded=!1,this.ideabooks={},this.ideabookSpaces={},this.areProjectsLoaded=!1,this.projects={},this.projectSpaces={},this},this.createDialogBody=function(){var a='<ul class="nav nav-tabs"><li class="active"><div>'+_hgt("Ideabooks")+"</div></li><li><div>"+_hgt("Projects")+"</div></li><li><div>"+_hgt("Houzz URL")+"</div></li></ul>",b='<div class="tab-view ideabooks-view"><select class="ideabook-list form-control"></select><div class="no-ideabooks-message">'+_hgt("Give your ideas a home: create an ideabook for each thing you’re working on")+'</div><div class="ideabook-spaces-wrapper"><div class="ideabook-spaces-list">&nbsp;</div><div class="load-more-ideabook-spaces-throbber"></div><a class="load-more-ideabook-spaces-button">'+_hgt("Show More Photos")+"</a></div></div>",c='<div class="tab-view projects-view"><select class="project-list form-control"></select><div class="no-projects-message">'+_hgt("Show off your work: upload your project photos")+'</div><div class="project-spaces-wrapper"><div class="project-spaces-list">&nbsp;</div><div class="load-more-project-spaces-throbber"></div><a class="load-more-project-spaces-button">'+_hgt("Show More Photos")+"</a></div></div>",d='<div class="tab-view houzz-view"><div class="url-label">'+_hgt("Insert a photo you found on Houzz")+'</div><input class="url-input" type="text" placeholder="'+_hgt("Paste a URL here")+'"><div class="url-caption mtm">'+_hgt("e.g. http://www.houzz.com/photos/5/Amazing-Kitchen")+"</div></div>",e='<div class="preview-view"><div class="preview-wrapper"></div><form action="javascript:;" class="dropzone hz-dropzone"></form><div class="dropzone-messages"></div></div>',f='<div class="insert-photo-wrapper row"><div class="left-container col-md-6"><div class="ajax-throbber"></div>'+a+b+c+d+'</div><div class="right-container col-md-6">'+e+"</div></div>";return this.$body=$(f),this},this.defineViewObjects=function(){return this.$leftContainer=this.$body.find(".left-container"),this.$tabControls=this.$body.find(".nav-tabs"),this.$tabViews=this.$body.find(".tab-view"),this.$ideabooksView=this.$body.find(".ideabooks-view"),this.$projectsView=this.$body.find(".projects-view"),this.$houzzView=this.$body.find(".houzz-view"),this.$previewView=this.$body.find(".preview-view"),this},this.addEventListeners=function(){return this.$tabControls.find("li").on("click",$.proxy(function(a){this.viewTabAtIndex($(a.target).closest("li").index())},this)),this.$previewView.on("click",".delete-preview-icon",$.proxy(function(){this.deselectSpace(),this.getBody().find(".url-input").val("")},this)),this.$houzzView.find(".url-input").on("paste",$.proxy(function(a){setTimeout($.proxy(function(){this.previewSpaceByUrl($(a.target).val())},this),0)},this)).on("focus",$.proxy(function(a){this.previewSpaceByUrl($(a.target).val())},this)).on("focus",function(a){$(this).select()}),this.$ideabooksView.find(".ideabook-list").change($.proxy(function(a){this.loadSpacesFromIdeabook($(a.target).val())},this)),this.$projectsView.find(".project-list").change($.proxy(function(a){this.loadSpacesFromProject($(a.target).val())},this)),this},this.initDropzoneSettings=function(){var a=this;return this.dropzoneSettings={autoProcessQueue:!0,url:"/createTempPhoto",forceFallback:!1,paramName:"file",parallelUploads:1,createImageThumbnails:!0,addRemoveLinks:!1,thumbnailWidth:340,thumbnailHeight:360,maxFilesize:30,maxFiles:1,uploadMultiple:!1,previewsContainer:".dropzone-messages",previewTemplate:"<div class='dz-preview dz-file-preview'><div class='dz-details'><div class='dz-filename hide'><span data-dz-name></span></div><div class='dz-size hide' data-dz-size></div> <img class='hide' data-dz-thumbnail /></div><div class='dz-progress hide'><span class='dz-upload' data-dz-uploadprogress></span></div><div class='dz-success-mark hide'><span>✔</span></div><div class='dz-error-mark hide'><span>✘</span></div><div class='dz-error-message'><span data-dz-errormessage></span></div></div>",acceptedFiles:".jpg,.jpeg,.gif,.png,.tif,.tiff",dictDefaultMessage:"<i></i>"+_hgt("Click or drag & drop a photo here to upload"),dictFallbackMessage:_hgt(""),dictFallbackText:_hgt("Click 'Browse' to select an image file from your hard drive, then click 'Upload'"),dictFileTooBig:_hgt("File is too big ({size}MB). Max filesize: {max}MB.",{"size:":"{{filesize}}",max:"{{maxFilesize}}"}),dictInvalidFileType:_hgt("You can't upload files of this type"),dictResponseError:_hgt("Server responded with {statusCode} code.",{statusCode:"{{statusCode}}"}),dictCancelUpload:_hgt("Cancel upload"),dictCancelUploadConfirmation:_hgt("Are you sure you want to cancel this upload?"),dictRemoveFile:_hgt("Remove file"),dictRemoveFileConfirmation:null,init:function(){var b=$(this.element).find(".dz-default.dz-message");b.find("i").remove(),b.find("span").append('<button class="hzBtn secondary"><i class="hzi-font hzi-Search"></i><span>'+_hgt("Browse")+"</span></button>"),this.on("sending",function(a,b,c){c.append("type",-1),c.append("minWidth",0),c.append("minHeight",0)}).on("complete",function(a){}).on("success",function(b,c){this.removeFile(b),"string"==typeof c&&(c=JSON.parse(c)),c&&"false"===c.success?(a.displayMessages(_hgt("Error uploading photo")),a.isUploadedImage=!1):c&&c.tempImageUrl&&(a.selectedSpaceImageUrl=c.tempImageUrl,a.isUploadedImage=!0,a.previewSpace())}).on("maxfilesexceeded",function(a){a&&this.removeFile(a)}).on("error",function(a,b,c){a&&this.removeFile(a)})}},this},this.prepareDialogSettings=function(){return this.dialogSettings={title:_hgt("Insert Photo"),body:this.$body,formName:"insert-photo-form",dialogClassName:"insert-photo-dialog",dialogSize:"modal-lg",controls:[HZ.ui.AjaxThrobber.getThrobber(),HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(this.onCancel,this)),HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Insert"),"",$.proxy(this.onInsertPhoto,this),!1)],onViewLoaded:$.proxy(function(){this.$richTextEditor.blurEditor(),this.resetDialog(),this.loadIdeabooks(),this.loadProjects(),this.initDropzone()},this),onViewUnloaded:$.proxy(function(){var a=this.$richTextEditor.getSelection(),b=$(a.anchorNode);b.closest(".note-editable").length||this.$richTextEditor.focusEditor()},this)},this},this.resetDialog=function(){return this.$ideabooksView.find(".load-more-ideabook-spaces-throbber").hide(),this.$ideabooksView.find(".load-more-ideabook-spaces-button").hide(),this.$projectsView.find(".load-more-project-spaces-throbber").hide(),this.$projectsView.find(".load-more-project-spaces-button").hide(),this.$houzzView.find(".url-input").val(""),this.areIdeabooksLoaded&&this.areProjectsLoaded||this.$leftContainer.addClass("loading-spaces"),this.deselectSpace(),this},this.initDropzone=function(){return this.dropzone||(this.dropzone=new Dropzone(".hz-dropzone",this.dropzoneSettings),this.initAjaxFileUpload()),this},this.previewSpaceByUrl=function(a){var b=new RegExp("https?://(?:www\\.)?(?:mytest|houzztest|houzz2?|stghouzz)\\.[A-Za-z\\./]*/("+HZ.utils.Config.spaceCommand+"|"+HZ.utils.Config.galleryCommand+"|projects)/(\\d+)(?=(?:\\D|$))[/\\?=&\\+%\\w-#]*","g"),c=a.match(b);return c&&c.length&&HZ.ajaz.Services.getMinimalSpaceData(c[0],$.proxy(function(a){if(a&&"true"===a.success&&a.spaces&&a.images){var b,c,d,e=HZ.data.Spaces.getCollection(),f=HZ.data.Images.getCollection(),g="0000";if(Object.keys)b=a.urlToId[Object.keys(a.urlToId)[0]];else for(var h in a.urlToId){b=a.urlToId[h];break}$.extend(!0,e,a.spaces),$.extend(!0,f,a.images),HZ.data.Spaces.addAll(e),HZ.data.Images.addAll(f),c=HZ.data.Spaces.get(b),d=c.iids[0],this.selectedSpaceImageUrl=HZ.utils.Links.C.baseStaticImageUrl+d+"_4-"+g+"/home-design.jpg",this.selectedSpaceId=b,this.selectedSpaceWidth=c.w,this.selectedSpaceHeight=c.h,this.limitWidthWithinBounds(550),this.previewSpace()}},this)),this},this.initAjaxFileUpload=function(){var a=this.$previewView.find(".hz-dropzone .dz-fallback");return a.find('input[type="file"]').ajaxfileupload({action:"/createTempPhoto",params:{type:-1},submit_button:a.find("button[type=submit]"),onStart:function(){},onComplete:$.proxy(function(a){a.status===!1&&"undefined"!=typeof a.message?(this.isUploadedImage=!1,this.displayMessages(a.message)):a.error?(this.isUploadedImage=!1,this.displayMessages(a.errorMessage||"")):a.tempImageUrl&&(this.selectedSpaceImageUrl=a.tempImageUrl,this.isUploadedImage=!0,this.previewSpace())},this)}),this},this.displayMessages=function(a){return this.$previewView.find(".dropzone-messages").html(a).show().delay(3e3).fadeOut(300),this},this.onInsertPhoto=function(){return this.onInsertPhotoCallback&&this.onInsertPhotoCallback.apply(this,[$(this.getBody())]),HZ.ui.Yamdi.hide(this),this},this.onCancel=function(){return HZ.ui.Yamdi.hide(this),this},this.viewTabAtIndex=function(a){var b=2;return this.$tabControls.find("li").removeClass("active").eq(a).addClass("active"),this.$tabViews.hide().eq(a).show(),a===b&&this.$tabViews.eq(a).find(".url-input").focus(),this},this.infiniteScroll=function(a,b,c){var d=-1*(a.height()-(b.height()-a.position().top)),e=-90;return d>e&&c(),this},this.loadIdeabooks=function(){return this.areIdeabooksLoaded||(HZ.ajaz.Services.getMyGalleries($.proxy(this.populateIdeabooks,this)),this.$ideabooksView.find(".ideabooks-list").empty().append('<option value="-1">'+_hgt("Loading Ideabooks...")+"</option>").attr("disabled","disabled")),this},this.loadProjects=function(){return this.areProjectsLoaded||(HZ.ajaz.Services.getProfessionalProjects(null,$.proxy(this.populateProjects,this)),this.$projectsView.find(".project-list").empty().append('<option value="-1">'+_hgt("Loading Projects...")+"</option>").attr("disabled","disabled")),this},this.populateIdeabooks=function(a){var b=this.$ideabooksView.find(".ideabook-list").removeAttr("disabled").empty();if(this.areIdeabooksLoaded=!0,!a.success||"true"!=a.success)return this.$ideabooksView.find(".ideabook-spaces-wrapper").hide(),this.$ideabooksView.find(".no-ideabooks-message").show(),void b.prop("disabled",!0);for(var c,d=0;d<a.galleries.own.length;d++){var e=a.galleries.own[d];c=e.id,this.ideabooks[c]=e,this.ideabooks[c].ajaxFromItem=0,this.ideabooks[c].ajaxItemsPerPage=1e3,this.ideabooks[c].fromItem=0,this.ideabooks[c].itemsPerPage=50,b.append('<option value="'+c+'">'+e.title+"</option>")}b.customDropdown();var f;if(Object.keys)f=Object.keys(this.ideabooks).length;else{f=0;for(var g in this.ideabooks)f++}return f?this.loadSpacesFromIdeabook(a.galleries.own[0].id):(this.$ideabooksView.find(".no-ideabooks-message").show(),b.parent(".dropdown-wrapper-2").hide()),this.areProjectsLoaded&&this.areIdeabooksLoaded&&this.initTabViews(),this},this.populateProjects=function(a){var b=this.$projectsView.find(".project-list").removeAttr("disabled").empty();if(this.areProjectsLoaded=!0,!a.success||"true"!=a.success)return this.$projectsView.find(".project-spaces-wrapper").hide(),this.$projectsView.find(".no-projects-wrapper").show(),void b.prop("disabled",!0);for(var c,d=0;d<a.projects.length;d++){var e=a.projects[d];c=e.id,this.projects[c]=e,this.projects[c].ajaxFromItem=0,this.projects[c].ajaxItemsPerPage=1e3,this.projects[c].fromItem=0,this.projects[c].itemsPerPage=50,b.append('<option value="'+c+'">'+e.title+"</option>")}b.customDropdown();var f;if(Object.keys)f=Object.keys(this.projects).length;else{f=0;for(var g in this.projects)f++}return f?this.loadSpacesFromProject(a.projects[0].id):(this.$projectsView.find(".no-projects-message").show(),b.parent(".dropdown-wrapper-2").hide()),this.areProjectsLoaded&&this.areIdeabooksLoaded&&this.initTabViews(),this},this.loadSpacesFromIdeabook=function(a){if(a!=this.currentIdeabookId)if(this.currentIdeabookId=a,this.$ideabooksView.find(".ideabook-spaces-list").empty(),a in this.ideabookSpaces){var b=this.ideabooks[a].fromItem;this.ideabooks[a].fromItem=0,this.populateIdeabookPhotos(a,b)}else this.getSpacesForIdeabook(a);return this},this.loadSpacesFromProject=function(a){if(a!=this.currentProjectId)if(this.currentProjectId=a,this.$projectsView.find(".project-spaces-list").empty(),a in this.projectSpaces){var b=this.projects[a].fromItem;this.projects[a].fromItem=0,this.populateProjectPhotos(a,b)}else this.getSpacesForProject(a);return this},this.getSpacesForIdeabook=function(a){var b=this.$ideabooksView.find(".load-more-ideabook-spaces-throbber").show();return HZ.ajaz.Services.getHousesByGallery(a,this.ideabooks[a].ajaxFromItem,this.ideabooks[a].ajaxItemsPerPage,$.proxy(function(c){this.ideabookSpaces[a]=this.ideabookSpaces[a]||[],c.houses=c.houses||[],$.merge(this.ideabookSpaces[a],c.houses);for(var d in c.houses)this.allSpaces[c.houses[d].i]=c.houses[d];c.hasMore?(this.ideabooks[a].ajaxFromItem+=this.ideabooks[a].ajaxItemsPerPage,this.getSpacesForIdeabook(a)):(b.hide(),this.populateIdeabookPhotos(a))},this)),this},this.getSpacesForProject=function(a){var b=this.$projectsView.find(".load-more-project-spaces-throbber").show();return HZ.ajaz.Services.getProfessionalProjectPhotosPaginated(a,null,this.projects[a].ajaxFromItem,this.projects[a].ajaxItemsPerPage,$.proxy(function(c){this.projectSpaces[a]=this.projectSpaces[a]||[];var d=[];for(var e in c.spaces)d.push(c.spaces[e]);$.merge(this.projectSpaces[a],d);for(var f,e=0;e<d.length;e++)f=d[e],this.allSpaces[f.id]=f;c.hasMore?(this.projects[a].ajaxFromItem+=this.projects[a].ajaxItemsPerPage,this.getSpacesForProject(a)):(b.hide(),this.populateProjectPhotos(a))},this)),this},this.populateIdeabookPhotos=function(a,b){for(var c,d,e=this.ideabookSpaces[a],f=b||this.ideabooks[a].fromItem+this.ideabooks[a].itemsPerPage,g=this.$ideabooksView.find(".ideabook-spaces-list"),h=this.ideabooks[a].fromItem;f>h&&h<e.length;h++){var i=e[h];d=$('<img src="'+i.thumb+'">').hide(),c=$('<div id="thumb-'+i.i+'" class="picker-thumb"></div>').attr("data-spaceid",i.i).css("background-image","url("+i.thumb+")").append('<div class="selectedcheck"></div>').append(d).on("click",$.proxy(function(a){this.selectSpace($(a.target).data("spaceid"))},this)),g.append(c)}return d&&d.one("load",$.proxy(function(c){var d=this.$ideabooksView.find(".ideabook-spaces-wrapper");if(e.length-(b||this.ideabooks[a].fromItem)>0){var f=$.proxy(function(){this.populateIdeabookPhotos(a)},this);d.on("scroll",$.throttle(250,$.proxy(function(){this.infiniteScroll(g,d,f)},this)))}else d.off("scroll")},this)).each(function(){this.complete&&$(this).load()}),this.ideabooks[a].fromItem=h,this},this.populateProjectPhotos=function(a,b){for(var c,d,e=this.projectSpaces[a],f=b||this.projects[a].fromItem+this.projects[a].itemsPerPage,g=this.$projectsView.find(".project-spaces-list"),h=this.projects[a].fromItem;f>h&&h<e.length;h++){var i=e[h];d=$('<img src="'+i.thumb+'">').hide(),c=$('<div id="thumb-'+i.id+'" class="picker-thumb"></div>').attr("data-spaceid",i.id).css("background-image","url("+i.thumb+")").append('<div class="selectedcheck"></div>').append(d).on("click",$.proxy(function(a){this.selectSpace($(a.target).data("spaceid"))},this)),g.append(c)}return d&&d.one("load",$.proxy(function(c){var d=this.$projectsView.find(".project-spaces-wrapper");if(e.length-(b||this.projects[a].fromItem)>0){var f=function(){this.populateProjectPhotos(a)};d.on("scroll",$.throttle(250,function(){this.infiniteScroll(g,d,f)}))}else d.off("scroll")},this)).each(function(){this.complete&&$(this).load();
}),this.projects[a].fromItem=h,this},this.initTabViews=function(){var a=0,b=1,c=2,d=this.$projectsView.find(".project-list option").length,e=this.$ideabooksView.find(".ideabook-list option").length;return this.$leftContainer.removeClass("loading-spaces"),d?this.viewTabAtIndex(b):e?this.viewTabAtIndex(a):this.viewTabAtIndex(c),this},this.selectSpace=function(a){return this.selectedSpaceId=a,this.selectedSpaceImageUrl=this.allSpaces[a].img,this.selectedSpaceWidth=this.allSpaces[a].originalWidth,this.selectedSpaceHeight=this.allSpaces[a].originalHeight,this.limitWidthWithinBounds(550),this.previewSpace(),this.$leftContainer.find("#thumb-"+a).addClass("selected"),this},this.limitWidthWithinBounds=function(a){var b=this.selectedSpaceWidth/this.selectedSpaceHeight;return this.selectedSpaceWidth>a&&(this.selectedSpaceWidth=a,this.selectedSpaceHeight=this.selectedSpaceWidth/b),this},this.previewSpace=function(){this.deselectSpace(),this.$previewView.find(".hz-dropzone").hide();var a=$('<div class="ajax-throbber"></div>'),b=$('<i class="delete-preview-icon"></i>'),c=$('<img class="space-preview-thumb">').hide().attr("src",this.selectedSpaceImageUrl).attr("data-spaceid",this.selectedSpaceId).attr("data-width",this.selectedSpaceWidth).attr("data-height",this.selectedSpaceHeight).attr("data-isupload",this.isUploadedImage).on("load",function(){a.hide(),$(this).show(),b.show()}),d=$('<span class="space-preview"></span>').append(c).append(b);return this.$previewView.find(".preview-wrapper").empty().append(a).append(d).show(),this.isUploadedImage=!1,this.getControls().find("input[type=submit]").attr("disabled",!1),this},this.deselectSpace=function(){return this.$leftContainer.find(".picker-thumb.selected").removeClass("selected"),this.$previewView.find(".preview-wrapper").empty().hide(),this.$previewView.find(".hz-dropzone").show(),this.getControls().find("input[type=submit]").attr("disabled",!0),this},this.prepare=function(){return this.initVariables(),this.createDialogBody(),this.defineViewObjects(),this.addEventListeners(),this.prepareDialogSettings(),this.initDropzoneSettings(),this.init(this.dialogSettings),this},this.showDialog=function(){return HZ.ui.Yamdi.show(this),this}},HZ.extend(HZ.textEditor.InsertPhotoDialog,HZ.ui.yamdi.Dialog),HZ.textEditor.InsertPhoto=new function(){this.prepare=function(){return this.InsertPhotoDialog||(this.InsertPhotoDialog=new HZ.textEditor.InsertPhotoDialog,this.InsertPhotoDialog.prepare()),this},this.showDialog=function(){return this.InsertPhotoDialog.showDialog(),this}},HZ.textEditor.InsertVideoDialog=function(){HZ.textEditor.InsertVideoDialog.superclass.constructor.call(this),this.onInsertVideoCallback=null,this.prepare=function(){return this.init({title:_hgt("Insert Video"),body:'<div class="video-label">'+_hgt("Video URL")+'</div><div class="video-caption">'+_hgt("(Youtube and Vimeo supported)")+'</div><input class="video-input" type="text">',formName:"insert-video-form",dialogClassName:"insert-video-dialog",controls:[HZ.ui.AjaxThrobber.getThrobber(),HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(this.onCancel,this)),HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Insert"),"",$.proxy(this.onInsertVideo,this),!1)],onViewLoaded:function(){this.getBody().find(".video-input").val("").focus()},onViewUnloaded:function(){var a=this.$richTextEditor.getSelection(),b=$(a.anchorNode);b.closest(".note-editable").length||this.$richTextEditor.focusEditor()}}),this},this.showDialog=function(){return HZ.ui.Yamdi.show(this),this},this.onCancel=function(){return HZ.ui.Yamdi.hide(this),this},this.onInsertVideo=function(){return this.onInsertVideoCallback&&this.onInsertVideoCallback($(this.getBody())),HZ.ui.Yamdi.hide(this),this}},HZ.extend(HZ.textEditor.InsertVideoDialog,HZ.ui.yamdi.Dialog),HZ.textEditor.InsertVideo=new function(){this.prepare=function(){return this.InsertVideoDialog||(this.InsertVideoDialog=new HZ.textEditor.InsertVideoDialog,this.InsertVideoDialog.prepare()),this},this.showDialog=function(){return this.InsertVideoDialog.showDialog(),this}},HZ.textEditor.InsertLinkDialog=function(){HZ.textEditor.InsertLinkDialog.superclass.constructor.call(this),this.onInsertLinkCallback=null,this.prepare=function(){this.init({title:_hgt("Insert Link"),body:'<div class="form-group"><label class="text-label control-label">'+_hgt("Text to Display")+'</label><input class="text-input form-control" type="text"></div><div class="form-group"><label class="url-label control-label">'+_hgt("Web Address (URL)")+'</label><input class="url-input form-control" type="text"></div>',formName:"insert-link-form",dialogClassName:"insert-link-dialog",controls:[HZ.ui.AjaxThrobber.getThrobber(),HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(this.onCancel,this)),HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Insert"),"",$.proxy(this.onInsertLink,this),!1)],onViewLoaded:function(){this.onViewLoadedCallback&&this.onViewLoadedCallback($(this.getBody())),this.getBody().find(".url-input").focus()},onViewUnloaded:function(){var a=this.$richTextEditor.getSelection(),b=$(a.anchorNode);b.closest(".note-editable").length||this.$richTextEditor.focusEditor()}});var a=this.getBody().find(".text-input");return this.getBody().find(".url-input").on("keyup paste",function(){var b=a.val(),c=$(this);setTimeout(function(){(""==b||b.length<c.val().length&&b==c.val().substring(0,b.length)||c.val().length>0&&c.val()==b.substring(0,c.val().length))&&a.val(c.val())},100)}),this},this.showDialog=function(){return HZ.ui.Yamdi.show(this),this},this.onCancel=function(){return HZ.ui.Yamdi.hide(this),this},this.onInsertLink=function(){return this.onInsertLinkCallback&&this.onInsertLinkCallback($(this.getBody())),HZ.ui.Yamdi.hide(this),this}},HZ.extend(HZ.textEditor.InsertLinkDialog,HZ.ui.yamdi.Dialog),HZ.textEditor.InsertLink=new function(){this.prepare=function(){return this.InsertLinkDialog||(this.InsertLinkDialog=new HZ.textEditor.InsertLinkDialog,this.InsertLinkDialog.prepare()),this},this.showDialog=function(){return this.InsertLinkDialog.showDialog(),this}};

window.hzmr.push("richTextEditor:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End richTextEditor.js  **************/
/************* Start questionRichTextEditor.js for locale en-US **************/
try {$.fn.PostQuestionEditor=function(){return this.onSubmit=function(){var a=this.$richTextEditor.isEmpty()?"":this.$richTextEditor.code();return this.$textarea.val(a),this},this.overrideResizeEditorFn=function(){return this.previousResizeEditorFn=this.$richTextEditor.resizeEditor,this.$richTextEditor.resizeEditor=function(){return this},this},this.restoreResizeEditorFn=function(){return this.$richTextEditor.resizeEditor=this.previousResizeEditorFn,this.previousResizeEditorFn=null,this},this.setDefaultValue=function(){var a=this.$textarea.attr("placeholder"),b=this.$textarea.val();return""!=b&&b!=a&&(this.$richTextEditor.code(this.$textarea.val()),this.$richTextEditor.$editor.find("iframe.js-iframe-hz").each(function(a){var b=$(this),c=b.data("content"),d=b[0].contentWindow.document;d.write(c),d.close(),b.removeAttr("data-content")}),this.$richTextEditor.$editor.find("img, iframe").css("display","block"),this.$richTextEditor.$editor.find("iframe").css("width","100%"),this.$richTextEditor.resizeIframeWrappers(),this.$richTextEditor.resizeEditor()),this},this.prepareFullscreen=function(){return this.$enterFullscreenButton=$('<div class="note-link btn-group hidden-xs"><button type="button" class="btn btn-default btn-sm btn-small" title="Fullscreen"><i class="hzi-font hzi-Full-screen"></i></button></div>').css("float","right").on("click",$.proxy(this.enterFullscreen,this)).appendTo(this.$richTextEditor.$toolbar),this.$cancelFullscreenButton=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(this.exitFullscreen,this)).hide().css({"float":"right","margin-right":"13px"}).insertAfter(this.$submitButton),this.$titleInputWrapper=this.find(".bubble--post"),this.$formTitle=$('<div class="form-title">'+_hgt("What are you working on?")+"</div>").hide().insertBefore(this.$titleInputWrapper),this.$exitFullscreenButton=$('<div class="exit-fullscreen-wrapper"><i class="hzi-font hzi-Exit-full-screen"></i><span>'+_hgt("Back")+"</span></div>").hide().on("click",$.proxy(this.exitFullscreen,this)).insertBefore(this.$titleInputWrapper),this.$clearFix=$('<div class="clearfix"></div>').hide().insertBefore(this.$titleInputWrapper),this},this.togglePollDialogButton=function(){var a=18,b=parseInt(this.$questionTopicSelect.val())===a;return this.$showPollDialogButton.toggle(b),this},this.enterFullscreen=function(){return this.$cancelFullscreenButton.show(),this.$addChoicesWrapper.hide(),this.togglePollDialogButton(),this.$questionTopicSelect.on("change",$.proxy(this.togglePollDialogButton,this)),this.$formTitle.show(),this.$clearFix.show(),this.$enterFullscreenButton.hide(),this.$exitFullscreenButton.show(),this.wrap('<p class="full-screen-wrapper">').addClass("full-screen"),this.$richTextEditor.$toolbar.find("button span").show(),HZ.textEditor.AddPollOptions.AddPollOptionsDialog.setButtonLabel(),this.height("auto"),this.overrideResizeEditorFn(),this.$richTextEditor.resizeIframeWrappers(),this.resizeEditor(),this.$richTextEditor.resizeToolbarButtons(),$(window).on("resize",this.throttledResize),this},this.exitFullscreen=function(){return this.$cancelFullscreenButton.hide(),this.$showPollDialogButton.hide(),this.$addChoicesWrapper.show(),this.$questionTopicSelect.off("change",this.togglePollDialogButton),this.$formTitle.hide(),this.$clearFix.hide(),this.$exitFullscreenButton.hide(),this.$enterFullscreenButton.show(),this.unwrap().removeClass("full-screen"),this.$richTextEditor.$toolbar.find("button span").css("display",""),this.height(""),this.restoreResizeEditorFn(),$(window).off("resize",this.throttledResize),this.find(".note-editable-wrapper").css("height","").css("max-height",""),this.$richTextEditor.resizeIframeWrappers(),this.$richTextEditor.resizeToolbarButtons(),this.$richTextEditor.resizeEditor(),this},this.resizeEditor=function(){var a=320,b=$(window).height()-a;return this.$richTextEditor.$editorWrapper.css("height",b).css("max-height",b),this},this.preparePollOptionsDialog=function(){return this.$showPollDialogButton=$(HZ.ui.ButtonFactory.createBaseIconButton(_hgt("Add Poll Options"),"add-poll-options-button","","","hzi-Add-Photo-Button")).insertAfter(".editQuestionTopic").hide().on("click",$.proxy(HZ.textEditor.AddPollOptions.showDialog,HZ.textEditor.AddPollOptions)),HZ.textEditor.AddPollOptions.prepare({$formWrapper:this.$addChoicesWrapper,$button:this.$showPollDialogButton}),this},this.initCustomFileInputs=function(){return this.$fileInputs.each(function(a,b){new CustomFileInput($(b)).prepare().init()}),this},this.onFocus=function(a){var b=$(a.target).closest(".choiceLine"),c=b.next();if(c.length&&!c.find(".custom-file-input-wrapper").length){var d=c.find(".optionFileInput");new CustomFileInput(d).prepare().init()}},this.initAddChoiceOnFocus=function(){return this.find("#editQuestionAddChoicesContainer").on("focus",".optionInput",$.proxy(this.onFocus,this)),this},this.initRichTextEditor=function(){return this.$textarea.hide(),this.$richTextEditor.init(),this.$addPhotoButton.hide(),this},this.prepare=function(){return this.$rteWrapper=$('<div class="rich-text-editor-wrapper"><div class="rich-text-editor"></div></div>'),this.$textarea=this.find("#editQuestionBody").after('<input type="hidden" name="isHtml" value="1"/>').after(this.$rteWrapper),this.$addPhotoButton=this.find("#expandFileInputs"),this.$submitButton=this.find("#editQuestionSubmitBtn"),this.$fileInputs=this.find(".optionFileInput"),this.$questionTopicSelect=this.find("#editQuestionTopicBox"),this.$addChoicesWrapper=this.find(".edit-question-add-choices-wrapper"),this.$richTextEditor=this.$rteWrapper.find(".rich-text-editor").RichTextEditor({inactiveHeight:127,activeHeight:127,shortFormMaxHeight:127,longFormMaxHeight:320,textArea:this.$textarea}).prepare(),this.throttledResize=$.throttle(250,$.proxy(function(){this.resizeEditor()},this)),this},this.init=function(){return this.initRichTextEditor(),this.prepareFullscreen(),this.preparePollOptionsDialog(),this.initCustomFileInputs(),this.initAddChoiceOnFocus(),this.setDefaultValue(),this.$submitButton.on("click",$.proxy(this.onSubmit,this)),this},this},HZ.textEditor.AddPollOptionsDialog=function(){HZ.textEditor.AddPollOptionsDialog.superclass.constructor.call(this),this.positionDialog=function(){return this.getForm().closest("#yamdiContainer").css({top:200,"margin-top":0}),this},this.onCancel=function(){return HZ.ui.Yamdi.hide(this),this},this.onAddPollOptions=function(){return HZ.ui.Yamdi.hide(this),this},this.onViewLoaded=function(){return this.$formWrapper.show(),this.$form.appendTo(this.getBody()),this.getBody().on("focus",".optionInput",$.proxy(this.onFocus,this)),this},this.onViewUnloaded=function(){return this.$form.appendTo(this.$formWrapper),this.$formWrapper.hide(),this.getBody().off("focus"),this.setButtonLabel(),this},this.setButtonLabel=function(){this.calcNumPollOptions(),this.$buttonLabel.text(_hgt("Add Poll Options")+" ( "+this.numPollOptions+" )")},this.calcNumPollOptions=function(){return this.numPollOptions=0,this.$form.find(".optionInput").each($.proxy(function(a,b){var c=$(b).val(),d=$(b).attr("placeholder");$(b).val().length&&c!=d&&this.numPollOptions++},this)),this},this.onFocus=function(a){var b=$(a.target).closest(".choiceLine");return b.index()===b.siblings(".choiceLine").length-1&&this.getBody().scrollTop(this.$form.height()),this},this.prepare=function(a){return this.$formWrapper=a.$formWrapper,this.$button=a.$button,this.$form=this.$formWrapper.find("#editQuestionAddChoicesContainer"),this.$buttonLabel=this.$button.find(".button-label"),this.init({title:_hgt("Add Poll Options"),body:"",formName:"add-poll-options-form",dialogClassName:"add-poll-options-dialog",controls:[HZ.ui.AjaxThrobber.getThrobber(),HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"",$.proxy(this.onCancel,this)),HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Add"),"",$.proxy(this.onAddPollOptions,this),!0)],onViewLoaded:$.proxy(this.onViewLoaded,this),onViewUnloaded:$.proxy(this.onViewUnloaded,this)}),this},this.showDialog=function(){return HZ.ui.Yamdi.show(this),this.positionDialog(),this}},HZ.extend(HZ.textEditor.AddPollOptionsDialog,HZ.ui.yamdi.Dialog),HZ.textEditor.AddPollOptions=new function(){this.prepare=function(a){this.AddPollOptionsDialog||(this.AddPollOptionsDialog=new HZ.textEditor.AddPollOptionsDialog,this.AddPollOptionsDialog.prepare(a))},this.showDialog=function(){this.AddPollOptionsDialog.showDialog()}};var CustomFileInput=function(a){this.initCustomInput=function(){return this.$input.wrap(this.$wrapper),this.$wrapper=this.$input.parent(),this.$wrapper.append(this.$button).append(this.$label),this},this.addEventListeners=function(){return this.$button.on("click",$.proxy(function(a){this.$input.click()},this)),this.$input.on("change",$.proxy(function(a){var b=$(a.currentTarget).val().split(/(\\|\/)/g).pop();this.$label.text(b.length?b:"No file chosen")},this)),this},this.show=function(){return this.$input.hide(),this.$button.show(),this.$label.show(),this},this.hide=function(){return this.$input.show(),this.$button.hide(),this.$label.hide(),this},this.prepare=function(){return this.$input=a,this.$wrapper=$('<div class="custom-file-input-wrapper"></div>'),this.$button=$('<a class="hzBtn secondary">'+_hgt("Choose File")+"</a>"),this.$label=$("<span>"+_hgt("No file chosen")+"</span>"),this},this.init=function(){return this.initCustomInput(),this.addEventListeners(),this.show(),this}};

window.hzmr.push("questionRichTextEditor:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End questionRichTextEditor.js  **************/
/************* Start commentRichTextEditor.js for locale en-US **************/
try {$.fn.AddCommentEditor=function(){return this.prepare=function(){return this.$textarea=this.find(".commentBody").after('<input type="hidden" name="isHtml" value="1"/>').after('<div class="rich-text-editor-wrapper"><div class="rich-text-editor"></div></div>'),this.$errorMsgDiv=this.find(".commentError"),this.$richTextEditor=this.find(".rich-text-editor").RichTextEditor({inactiveHeight:50,activeHeight:50,shortFormMaxHeight:50,longFormMaxHeight:250,textArea:this.$textarea}).prepare(),this.$submitButton=this.find(".submitAddComment"),this},this.init=function(){return this.$textarea.hide(),this.find(".addCommentExtra").show(),this.$richTextEditor.init(),this.$richTextEditor.$editor.focus(),this.$submitButton.on("click",$.proxy(this.onClick,this)),this.addClass("active"),this},this.onClick=function(a){var b=this.$richTextEditor.isEmpty()?"":this.$richTextEditor.code();return this.$textarea.val(b),this},this},$.fn.EditCommentEditor=function(a){a=a||{};var b=!1;return this.onShow=function(){return this},this.onHide=function(){return this},this.submit=function(a){if(!b){b=!0,this.$cancelButton.prop("disabled",!0),this.$submitButton.prop("disabled",!0);var c,d=this.$form.find('[name="objectType"]').val(),e=this.$form.find('[name="objectId"]').val(),f=this.$form.find('[name="commentId"]').val(),g=this.$form.find("textarea"),h=this.$form.find(".commentError"),i=this.$richTextEditor.isEmpty()?"":this.$richTextEditor.code(),j=this.$form.find('[name="isHtml"]').val(),k=this.$form.find('[name="privacy"]').val();if(i.length){var l=parseInt(g.attr("maxlength"),10)||1e4,m=i.length;if(m>l&&(c=_hgt("Your post is {numOfCharsToDelete} too long, posts can be up to {lengthLimit} characters. Please make it a little shorter and try again.",{lengthLimit:l,numOfCharsToDelete:_hgtp("","1 character","{n} characters",m-l,{n:m-l})})),c)return b=!1,this.$cancelButton.prop("disabled",!1),this.$submitButton.prop("disabled",!1),h.text(c).slideDown(),void a.stopPropagation();HZ.ajaz.Services.updateComment(d,e,f,i,k,"",j,$.proxy(this.onSuccess,this))}else if(c=_hgt("Please enter your comment."),b=!1,this.$cancelButton.prop("disabled",!1),this.$submitButton.prop("disabled",!1),c)return h.text(c).slideDown(),void a.stopPropagation()}},this.onSuccess=function(a){"true"===a.success&&a.comments&&(this.$form.find(".editCommentError").hide(),this.replaceWith($(a.comments)),b=!1,this.$cancelButton.prop("disabled",!1),this.$submitButton.prop("disabled",!1),this.$form.removeClass("dirty"))},this.hideEditor=function(){return this.onHide(),this.find(".error").hide(),this.removeClass("active"),this.$form.removeClass("dirty"),this.$form.hide().appendTo(this.$tempWrapper.find(".editCommentDiv")),this.append(this.$tempWrapper.children()),this.$submitButton.off("click",$.proxy(this.submit,this)),this.$cancelButton.remove(),this.$richTextEditor.closest(".rich-text-editor-wrapper").remove(),this},this.showEditor=function(){return this.onShow(),this.addClass("active"),this.$tempWrapper=$("<div></div>").addClass("temp").hide(),this.children().appendTo(this.$tempWrapper),this.append(this.$tempWrapper),this.append(this.$form.show().detach()),this.$form.find(".addCommentExtra").show(),this.$richTextEditor.code(this.$textarea.val()),this.$richTextEditor.resizeEditor(),this.$richTextEditor.resizeToolbarButtons(),this.$richTextEditor.focusEditor(),this},this.prepare=function(){return $.extend(this,a),this.$form=this.find(".commentForm"),this.$textarea=this.find(".user-text-input").after('<input type="hidden" name="isHtml" value="1"/>'),this.$rteWrapper=$('<div class="rich-text-editor-wrapper"><div class="rich-text-editor"></div></div>').insertAfter(this.$textarea),this.$richTextEditor=this.$rteWrapper.find(".rich-text-editor").RichTextEditor({inactiveHeight:50,activeHeight:50,shortFormMaxHeight:50,longFormMaxHeight:250,textArea:this.$textarea}).prepare(),this.$submitButton=this.find(".submitAddComment"),this},this.init=function(){return this.$textarea.hide(),this.$richTextEditor.init(),this.$submitButton.on("click",$.proxy(this.submit,this)),this.$cancelButton=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"cancel-edit-comment",$.proxy(this.hideEditor,this)).insertAfter(this.$submitButton),this.find(".error").hide(),this},this};

window.hzmr.push("commentRichTextEditor:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End commentRichTextEditor.js  **************/
/************* Start newPostSignup.js for locale en-US **************/
try {HZ.ns("HZ.signup"),HZ.signup.newPostSignup=new function(){this.init=function(a,b){var c=$("<div/>",{id:"signup-success","class":"dialog",scopeId:"signup-success"}),d="<div id='header'><h1 class='header-2'>"+_hgt("Which describes you best?")+"</h1></div><div id='body'><div class='row'><div id='homeowner' class='col-sm-6' compId='homeowner'><div class='wrapper'><div class='icon'></div><div class='title header-5'>"+_hgt("Homeowner")+"</div><div class='description'>"+_hgt("I am a homeowner or interested in home design.")+"</div></div></div><div id='pro' class='col-sm-6' compId='pro'><div class='wrapper'><div class='icon'></div><div class='title header-5'>"+_hgt("Professional")+"</div><div class='description'>"+_hgt("I offer home improvement services or sell home products.")+"</div></div></div></div></div>";return c.html(d),c.find("#homeowner").on("click",function(){a()}),c.find("#pro").on("click",function(){b()}),c}};

window.hzmr.push("newPostSignup:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End newPostSignup.js  **************/
/************* Start hoverCard.js for locale en-US **************/
try {HZ.ns("HZ.utils"),HZ.utils.HoverCard=new function(){function a(a){var b=HZ.utils.Html.escapeHtmlEntities(a);return b.replace(/'/g,"&apos;")}var b,c,d={},e={useWiderFollowCell:0,cardContentWidth:414,statCardWidth:86,reviewCardWidth:86,ajazTimeout:300,dropDownTimeout:500},f="<div class='hzHoverCard hbs'>\n		<div class='hzHoverCardContent'>\n			<div class='upper'>\n				<a target='_blank' href='%PROFILELINK%' %REL% id='%ID%' class='user-thumb-link' onmousedown='%MOUSEDOWN%'><img class='hzHoverCardUserThumb hz-user-image' src='%USERTHUMB%'/></a>\n				<div class='basic-info'>\n					<div class='hzHoverCardUserName'>\n						<a target='_blank' class='nameLink hz-username' href='%PROFILELINK%' %REL% id='%ID%' onmousedown='%MOUSEDOWN%'>%USERNAME%</a>\n					</div>\n					%REVIEW_STARS%\n					%PRODESC%\n				</div>\n			</div>\n			%FOLLOW%\n			%FOLLOWERS%\n			%PROCARD%\n			%IDEABOOK%\n			%PROJECT%\n			%COMMENT%\n			<div class='hzHCClearFix'></div>\n		</div>\n		</div>",g="<div class='hzHoverCard hbs'>\n		<div class='hzHoverCardContent'>\n			<div class='upper'>\n				<a target='_blank' href='%PROFILELINK%' %REL% id='%ID%' class='user-thumb-link' onmousedown='%MOUSEDOWN%'><img class='hzHoverCardUserThumb hz-user-image' src='%USERTHUMB%'/></a>\n				<div class='basic-info'>\n					<div class='hzHoverCardUserName'>\n						<a target='_blank' class='nameLink hz-username' href='%PROFILELINK%' %REL% id='%ID%' onmousedown='%MOUSEDOWN%'>%USERNAME%</a>\n					</div>\n				</div>			</div>\n			%FOLLOW%\n			%FOLLOWERS%\n			%IDEABOOK%\n			%PROJECT%\n			%COMMENT%\n			%NO_PUBLIC_GALLERY%\n			<div class='hzHCClearFix'></div>\n		</div>\n		</div>",h=function(a,b,c){var e,f={},g=$(this);c&&"true"==c.success&&(e=c.userDetail,f[a]={},f[a][b]=e,d=$.extend(!0,d,f),k(e,g,a,b))},i=function(d,e,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C="",D="profLink",E="",F="u",G="",H="",I="",J="",K="",L="",M="",N="",O="",P="",Q="",R=!0,S=!0,T="",U="",V="",W="";if(j=d.isPro,k=d.uname,l=d.name,m=d.pic,n=d.link,o=d.loc,p=d.allowFollow,q=d.isFollower,r=d.galCount,s=d.projCount,t=d.cmtCount,v=d.reviewRating,w=d.numReview,x=d.reviewLink,B=d.proType,y=d.galLink,z=d.prjLink,R=d.publicGallery,S=d.publicProject,c=b.cardContentWidth,i.pTrk&&i.pTrkParam&&(n="#",C="rel='nofollow'",E=i.pTrk,D=i.pTrkParam),i.gTrk&&i.gTrkParam&&(y="#",T="onmousedown='"+i.gTrk+"' id='"+i.gTrkParam+"'"),i.prjTrk&&i.prjTrkParam&&(z="#",U="onmousedown='"+i.prjTrk+"' id='"+i.prjTrkParam+"'"),1==p){if(b.useWiderFollowCell&&(c+=30,W="wider-card"),1==q)var X="hzBtn followBtn following",Y=_hgt("Following");else if(0==q)var X="hzBtn followBtn",Y=_hgt("Follow");if(HZ.data.CurrentSessionUser)var Z="HZ.actions.Follow.updateFollow(this,{"+F+': "'+k+'"}); HZ.utils.HoverCard.toggleFollowStatus("'+e+'", "'+h+'"); return false;';else if(HZ.auth)var Z="HZ.auth.Manager.signup(10, null, window.location.href); return false;";else var Z='window.location.href="'+b.followRedirectLink+'"; return false;';H="<input id='followButton_"+k+"' type='button' class='"+X+"' value='"+a(Y)+"' onclick='"+Z+"'/>",I="<div class='hzFollowBtnWrapper'>"+H+"</div>",u=d.followersCount,A=d.followersLink,u>0&&(J="<div class='statCard'><a target='_blank' href='"+A+"'><div class='counter'>"+u+"</div><div class='itemName'>"+_hgtp("Followers","Follower","Followers",u)+"</div></a></div>")}""==J&&(c-=b.statCardWidth),I="<div class='statCard followStatCard "+W+"'>"+I+"</div>",N="<div class='statCard'></div>",R&&(K="<div class='statCard'><a target='_blank' href='"+y+"' "+T+"><div class='counter'>"+r+"</div><div class='itemName'>"+_hgtp("Ideabooks","Ideabook","Ideabooks",r)+"</div></a></div>"),s>0&&S?L="<div class='statCard'><a target='_blank' href='"+z+"' "+U+"><div class='counter'>"+s+"</div><div class='itemName'>"+_hgtp("Projects","Project","Projects",s)+"</div></a></div>":c-=b.statCardWidth,M="<div class='statCard'><div class='counter'>"+t+"</div><div class='itemName'>"+_hgtp("Comments","Comment","Comments",t)+"</div></div>",1==j?(B&&"Not specified"!=B&&(G=B),o&&(G.length>0&&(G+=" | "),G+=o),G&&(G="<div class='hzHoverCardLoc'>"+a(G)+"</div>"),P="<div class='counter'>"+w+"</div><div class='itemName'>"+_hgtp("Reviews","Review","Reviews",w)+"</div>",i.rTrk&&i.rTrkParam&&(x="#",V="onmousedown='"+i.rTrk+"' id='"+i.rTrkParam+"'"),P="<div class='statCard reviewCard'><a target='_blank' href='"+x+"' "+V+">"+P+"</a></div>",w>0&&(O="<div class='classification counter'><div class='cover'></div><div class='progress' style='width: "+2*v+"%'></div></div>"),Q=HZ.utils.Html.template(f,{USERNAME:l,PROFILELINK:n,REL:C,MOUSEDOWN:E,ID:D,USERTHUMB:m,PRODESC:G,REVIEW_STARS:O,FOLLOW:I,FOLLOWERS:J,PROJECT:L,COMMENT:M,PROCARD:P})):(o&&(G+=o),G&&(G="<div class='hzHoverCardLoc'>"+G+"</div>"),Q=HZ.utils.Html.template(g,{USERNAME:l,PROFILELINK:n,USERTHUMB:m,USERDESC:G,FOLLOW:I,FOLLOWERS:J,IDEABOOK:K,PROJECT:L,COMMENT:M,NO_PUBLIC_GALLERY:"%NO_PUBLIC_GALLERY%"}),Q=HZ.utils.Html.template(Q,{NO_PUBLIC_GALLERY:R?"":N}));var _=$(Q);return _.find(".statCard").last().addClass("lastCard"),_},j=function(a){return{pTrk:a.attr("ptrk"),pTrkParam:a.attr("ptrk-param"),gTrk:a.attr("gtrk"),gTrkParam:a.attr("gtrk-param"),prjTrk:a.attr("prjtrk"),prjTrkParam:a.attr("prjtrk-param"),rTrk:a.attr("rtrk"),rTrkParam:a.attr("rtrk-param")}},k=function(a,b,d,e){var f,g,h,k,l,m,n=i(a,d,e,j(b)),o=110,p=$(".houzz-header"),q=$(".houzz-header-secondary"),r=80;(p.length||q.length)&&(r=p.height()+q.height()),k=b.offset().top-$(document).scrollTop(),h=$(window).height()-k-b.height(),l=b.offset().left-$(document).scrollLeft(),m=$(window).width()-l-b.outerWidth(),f=k>o+r||k>=h?"south":"north",f+=l>m?" right":"",g=$(n),g.css("width",c),g.data("srcElement",b),b.closest("body").length>0&&b.tipBubble({content:g,borderColor:"#CCC",point:f,attachTo:"body",id:"hzHoverCardContainer",showCloseBtn:!1,width:c,fadeDuration:1})},l=function(){$("#hzHoverCardContainer:visible").hide()},m=function(a){var c,e=this,f=$(e);if("mouseenter"==a.type){var g=$("#hzHoverCardContainer").data("dropDownTimer");clearTimeout(g),$("#hzHoverCardContainer").removeData("dropDownTimer"),c=setTimeout(function(){var a=f.attr("data-type"),b=f.attr("data-id");a&&b&&(d&&d[a]&&d[a][b]?k(d[a][b],f,a,b):HZ.ajaz.Services.getHoverCardData(a,b,$.proxy(h,f,a,b))),$("#hzHoverCardContainer").removeData("ajazTimer")},b.ajazTimeout),$("#hzHoverCardContainer").data("ajazTimer",c)}else"mouseleave"==a.type&&(clearTimeout($("#hzHoverCardContainer").data("ajazTimer")),$("#hzHoverCardContainer").data("dropDownTimer",setTimeout(function(){$("#hzHoverCardContainer").removeData("dropDownTimer"),l()},b.dropDownTimeout)))},n=function(a){if(a.stopPropagation(),HZ.data.CurrentSessionUser||!$(a.target).is("a")&&0==$(a.target).parents("a").length){a.preventDefault();var b=this,c=$(b);$("#hzHoverCardContainer").is(":visible")&&l();var e=c.attr("data-type"),f=c.attr("data-id");e&&f&&(d&&d[e]&&d[e][f]?k(d[e][f],c,e,f):HZ.ajaz.Services.getHoverCardData(e,f,$.proxy(h,c,e,f)))}};this.toggleFollowStatus=function(a,b){d&&d[a]&&d[a][b]&&(d[a][b].isFollower=1-d[a][b].isFollower)},this.init=function(a){b=$.extend({},e,a||{}),HZ.data.CurrentSessionUser?($("body").on("mouseenter mouseleave",".hzHouzzer",m),$("body").on("mouseenter","#hzHoverCardContainer",function(){clearTimeout($("#hzHoverCardContainer").data("dropDownTimer"))}).on("mouseleave","#hzHoverCardContainer",function(){$(this).data("dropDownTimer",setTimeout(function(){l()},b.dropDownTimeout))})):($("body").on("click",".hzHouzzer",n),$("body").on("click",".hzHoverCard",function(a){a.stopPropagation()}),$("body").on("click",l)),$("#lbImage, #lbInfoScroller").on("mousewheel DOMMouseScroll",function(){clearTimeout($("#hzHoverCardContainer").data("ajazTimer")),clearTimeout($("#hzHoverCardContainer").data("dropDownTimer")),l()})}};

window.hzmr.push("hoverCard:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End hoverCard.js  **************/
/************* Start followButton.js for locale en-US **************/
try {HZ.ns("HZ.actions.Follow"),HZ.actions.Follow=new function(){var a="f",b="u",c=this,d=2,e=10,f=1,g=4,h=function(a,b){var c=a.find("i");if(b=$.trim(b),b==_hgt("Follow"))a.removeClass("following unfollow"),c.removeClass("hzi-Following hzi-Unfollow").addClass("hzi-Follow");else if(b==_hgt("Unfollow"))a.removeClass("following").addClass("unfollow"),c.removeClass("hzi-Follow hzi-Following").addClass("hzi-Unfollow");else{if(b!=_hgt("Following"))return;a.removeClass("unfollow").addClass("following"),c.removeClass("hzi-Follow hzi-Unfollow").addClass("hzi-Following")}a.is("input")?a.attr("value",b):(a.contents().last().replaceWith(b),a.attr("title",b))},i=function(b,c,i){if("true"==b.success)c==a?h(i,_hgt("Following")):h(i,_hgt("Follow"));else if(b.error==d)HZ.auth.Manager.signup(e);else{var j=_hgt("Follow operation failed.");b.error==f&&(j=_hgt("The user you are trying to follow has disabled this feature.")),b.error==g&&(j=_hgt("To follow other people, you need to allow others to follow you. You can update your privacy settings on Edit Profile page.")),alert(j)}};this.updateFollow=function(c,d){var c=$(c);if(d){var e=c.hasClass("following")||c.hasClass("unfollow")?b:a;if(d.u)var f=d.u}e&&f&&HZ.ajaz.Services.updateFollow(e,f,function(a){i(a,e,c)})},this.updateFollowBtn=function(a,b){(a.hasClass("following")||a.hasClass("unfollow"))&&(b?h(a,_hgt("Unfollow")):h(a,_hgt("Following")))},$("body").on("mouseenter",".followBtn",function(){c.updateFollowBtn($(this),!0)}).on("mouseleave",".followBtn",function(){c.updateFollowBtn($(this),!1)})};

window.hzmr.push("followButton:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End followButton.js  **************/
/************* Start fontSmoothing.js for locale en-US **************/
try {var TypeHelpers=new function(){var a=this;a.hasSmoothing=function(){if("undefined"!=typeof screen.fontSmoothingEnabled)return screen.fontSmoothingEnabled;try{var a=document.createElement("canvas");a.width="35",a.height="35",a.style.display="none",document.body.appendChild(a);var b=a.getContext("2d");b.textBaseline="top",b.font="32px Arial",b.fillStyle="black",b.strokeStyle="black",b.fillText("O",0,0);for(var c=8;32>=c;c++)for(var d=1;32>=d;d++){var e=b.getImageData(d,c,1,1).data,f=e[3];if(255!=f&&0!=f)return!0}return!1}catch(g){return null}},a.insertClasses=function(){var b=a.hasSmoothing(),c=document.getElementsByTagName("html")[0];1==b?c.className+=" hasFontSmoothing-true":0==b?c.className+=" hasFontSmoothing-false":c.className+=" hasFontSmoothing-unknown"}};

window.hzmr.push("fontSmoothing:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End fontSmoothing.js  **************/
/************* Start contactDialog.js for locale en-US **************/
try {HZ.ns("HZ.email"),HZ.email.ContactDialog=function(){var a,b,c,d,e,f,g;this.attachUploadInitialized=!1,this.applySettings=function(a){g=a},this.getSettings=function(){return g},this.getToFld=function(){return a},this.getSubjectFld=function(){return b},this.getMessageFld=function(){return c},this.getEmailFld=function(){return d},this.getSendBtn=function(){return f},this.getCancelBtn=function(){return e};var h=function(){HZ.ui.AjaxThrobber.setInCall(!1),HZ.ui.Yamdi.hide(this)},i=function(){if(g.allowShare){if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var c=a.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",l=this.getSettings().generateColorPaletteImageLink,m=this.getSettings().colorPaletteShareLink;return HZ.ajaz.Services.sendShareEmail(c,e,h,g.type,g.referenceId,i,l,m,$.proxy(j,this)),!1}}else if(d.length){if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var n=a.val(),o=d.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",p="undefined"!=typeof grecaptcha?grecaptcha.getResponse():"",q=g.isDealerLocationEmail;return q?HZ.ajaz.Services.sendGuestEmail(o,n,e,h,g.type,g.referenceId,g.replyToId,i,p,!0,$.proxy(j,this)):HZ.ajaz.Services.sendGuestEmail(o,n,e,h,g.type,g.referenceId,g.replyToId,i,p,null,$.proxy(j,this)),!1}}else if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var n=a.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",r=g.maxAttachmentFiles?this.getForm():null,q=g.isDealerLocationEmail;return q?HZ.ajaz.Services.sendEmail(n,e,h,g.type,g.referenceId,g.replyToId,i,r,!0,$.proxy(j,this)):HZ.ajaz.Services.sendEmail(n,e,h,g.type,g.referenceId,g.replyToId,i,r,null,$.proxy(j,this)),!1}},j=function(a){var b="";if(HZ.ui.AjaxThrobber.setInCall(!1),"true"==a.success)this.onSubmitSuccess&&"function"==typeof this.onSubmitSuccess&&this.onSubmitSuccess.call(this),b=g.type==HZ.sendEmail.types.PRO||g.type==HZ.sendEmail.types.PRO_REPLY||g.type==HZ.sendEmail.types.MP||g.type==HZ.sendEmail.types.MP_SELLER||g.type==HZ.sendEmail.types.MP_BUYER||g.type==HZ.sendEmail.types.USER||g.type==HZ.sendEmail.types.USER_REPLY?HZ.sendEmail.texts.CONFIRM_MESSAGE_SENT:HZ.sendEmail.texts.CONFIRM_EMAIL_SENT,HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert("",b);else{if(a.error==HZ.ajaz.Services.sendEmail.ERROR_RECOVERABLE)return"function"==typeof onRecaptchaLoadCallback&&onRecaptchaLoadCallback(),void this.showError(a.errorMessage);HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(_hgt("Send message error!"),a.errorMessage)}},k=function(){var c=a.val(),d=b.val(),e=this.getMessageBody();return""==$.trim(c)?(this.showError(HZ.sendEmail.texts.ERROR_EMAIL_ADDRESSES_EMPTY),!1):""==$.trim(d)?(this.showError(HZ.sendEmail.texts.ERROR_SUBJECT_EMPTY),!1):""==$.trim(e)?(this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1):this.validateMore&&"function"==typeof this.validateMore&&!this.validateMore.call(this)?!1:!0};this.showError=function(a){this.showStatus(a),HZ.ui.AjaxThrobber.setInCall(!1),HZ.ui.InputButtonUtils.enableButton(f)},function(){var g="contactDialog";this.DIALOG_CLASSNAME&&(g=this.DIALOG_CLASSNAME);var j=_hgt("Send a Message");this.DIALOG_TITLE&&(j=this.DIALOG_TITLE);var k=$(this.FORM_TEMPLATE);e=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"hzContactDlgCancelBtn",$.proxy(h,this),null,null,"trackMe","compId='contactDlgCancel'"),f=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Send"),"hzContactDlgSendBtn",null,!0,null,"trackMe","compId='contactDlgSend'");var l={title:j,body:k,controls:[HZ.ui.AjaxThrobber.getThrobber(),e,f],dialogClassName:g,onViewLoaded:$.proxy(this.onViewLoaded,this),onViewUnloaded:$.proxy(this.onViewUnloaded,this)};HZ.email.ContactDialog.superclass.constructor.call(this),this.init(l);var m=this.getForm();a=m.find(".hz-toFld"),b=m.find(".hz-subjectFld"),c=m.find(".hz-messageFld"),d=m.find(".hz-emailFld"),m.find("[placeholder]").initPlaceHolders({saveEvent:"beforeSubmit.email"}),m.bind("submit",$.proxy(i,this))}.call(this)},HZ.extend(HZ.email.ContactDialog,HZ.ui.yamdi.Dialog),$.extend(!0,HZ.email.ContactDialog.prototype,{DEFAULT_OPTIONS:{type:null,referenceId:null,toUserName:"",subject:"",message:"",replyToId:null,event:null,maxAttachmentFiles:0},ATTACH_BUTTON_TEMPLATE:'<a class="hzBtn noFrameButton addImageButton" href="javascript:;" title="%buttonTitle%"><span class="button-icon buttonIconAttach"></span><span class="text-m text-dt-s label colorLink">%buttonTitle%</span></a>',ATTACH_TEMPLATE:'<div class="hz-attach"><input type="file" name="attach1" accept="image/*" class="span-sm-6"/><input type="file" name="attach2" accept="image/*" class="span-sm-6"/><input type="file" name="attach3" accept="image/*" class="span-sm-6"/><input type="file" name="attach4" accept="image/*" class="span-sm-6"/></div>',FORM_TEMPLATE:'<fieldset class="row-fluid"><label>'+_hgt("To (enter recipient emails, separated by commas)")+'</label><textarea type="text" class="hz-toFld span-xs-12 form-control" rows="2"/><label>'+_hgt("Subject")+'</label><input type="text" class="hz-subjectFld span-xs-12 form-control" value="" placeholder="'+_hgt("Enter subject")+'"/><label>'+_hgt("Message")+'</label><textarea rows="5" class="hz-messageFld span-xs-12 form-control" placeholder="'+_hgt("Enter your message here")+'"/></fieldset>',validateMore:function(){return!0},getMessageBody:function(){return this.getMessageFld().val()},onSubmitSuccess:null,prepare:function(a){var b,c=this;if(this.applySettings($.extend(!0,{},this.DEFAULT_OPTIONS,a)),b=this.getSettings(),this.getToFld().val(b.toUserName),this.getSubjectFld().val(b.subject),this.getMessageFld().val(b.message),b.maxAttachmentFiles)if(this.attachUploadInitialized){if(!this.getForm().find(".addImageButton").length){var d=$(HZ.utils.Html.template(this.ATTACH_BUTTON_TEMPLATE,{buttonTitle:_hgt("Attach Images")}));d.insertAfter(this.getMessageFld()),c.enableAttachment()}}else{var d=$(HZ.utils.Html.template(this.ATTACH_BUTTON_TEMPLATE,{buttonTitle:_hgt("Attach Images")}));d.insertAfter(this.getMessageFld()),HZ.utils.ResourceLoader.requireResources([{type:HZ.utils.ResourceLoader.JS,file:"jquery.form.min"}],function(){c.enableAttachment()})}else c.disableAttachment()},enableAttachment:function(){var a=this.getForm().find(".hz-attach"),b=this;if(0===a.length){var c=this.getForm().find(".addImageButton");a=$(this.ATTACH_TEMPLATE).insertAfter(c),c.on("click",function(){a.is(":visible")||(a.show(),UIHelper.isMSIE||a.find("input:first").click(),b.recenter())})}this.attachUploadInitialized=!0},disableAttachment:function(){var a=this.getForm().find(".addImageButton, .hz-attach");a.length&&a.remove()},onViewLoaded:function(){HZ.ui.InputButtonUtils.enableButton(this.getSendBtn()),this.getForm().find("[placeholder]").initPlaceHolders("refresh")},onViewUnloaded:function(){this.resetForm(),this.getForm().find(".hz-attach").hide(),this.hideStatus()}}),HZ.email.ContactProDialog=function(){var a={type:HZ.sendEmail.types.PRO};this.DEFAULT_OPTIONS={toUserName:"",toUserDisplayName:"",subject:"",message:"",useZipCode:!1,isShortForm:!1};var b,c;HZ.utils.Config.requirePhoneToContactPro?(b=_hgt("Enter your zip code (required)"),c=_hgt("Enter your contact phone number (required)")):(b=_hgt("Enter your zip code"),c=_hgt("Enter your contact phone number")),this.FORM_TEMPLATE='<fieldset class="row-fluid"><div class="control-group fromDisplayEmailGrp"><label class="control-label">'+_hgt("From")+'</label><div class="controls"></div></div><div class="control-group" id="toUserNameField"><label class="control-label">'+_hgt("To")+'</label><div class="controls toDisplayName"></div><input type="hidden" class="hz-toFld" value=""/></div><div class="control-group" id="subjectField"><label class="control-label">'+_hgt("Subject")+'</label><div class="controls"><input type="text" class="hz-subjectFld span-xs-12 form-control" value="" placeholder="'+_hgt("Enter subject")+'"/></div></div><div class="control-group phoneFldGrp"><label class="control-label phone-label">'+_hgt("Phone Number")+'</label><div class="controls"><input type="text" class="span-xs-12 form-control" value="" placeholder="'+c+'"/></div></div><div class="control-group locationFldGrp"><label class="control-label location-label">'+_hgt("Location")+'</label><div class="controls"><input type="text" class="span-xs-12 form-control" value="" placeholder="'+_hgt("Enter your city, state")+'"/></div></div><div class="control-group zipFldGrp"><label class="control-label zip-label">'+_hgt("Zip Code")+'</label><div class="controls"><input type="text" class="span-xs-12 form-control" value="" placeholder="'+b+'"/></div></div><div class="control-group dealerFldGrp mbs"><label class="control-label dealer-label">'+_hgt("To:")+'</label><div class="controls"><select class="form-control dealer-select"></select></div></div><div class="control-group"><label class="control-label">'+_hgt("Message")+'</label><div class="controls"><textarea class="hz-messageFld span-xs-12 form-control" rows="4" value="" placeholder="'+_hgt("Enter your message here")+'"/></div></div><div class="proMessageDisclaimer"><label class="checkbox"><input type="checkbox" class="confirmProMessage"/>'+_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation.")+"</label></div></fieldset>",this.prepare=function(b){var c=$.extend(!0,{},a,this.DEFAULT_OPTIONS,b),d=this.getForm();c.useZipCode=HZ.utils.Config.zipCodeTestEnabled,HZ.email.ContactProDialog.superclass.prepare.call(this,c),$(d).attr("scopeId","ContactProDialog"),d.find(".toDisplayName").html(c.toUserDisplayName);var e="";HZ.data.CurrentSessionUser&&c.type!=HZ.sendEmail.types.MP&&c.type!=HZ.sendEmail.types.USER&&c.type!=HZ.sendEmail.types.USER_REPLY?(d.find(".fromDisplayEmailGrp").show(),e=HZ.data.CurrentSessionUser.getEmailAddress(),e?d.find(".fromDisplayEmailGrp").find(".controls").html(e):HZ.ajaz.Services.User.getCurrentSessionUserEmail(function(a){"true"==a.success&&a.userEmail&&(HZ.data.CurrentSessionUser.setEmailAddress(a.userEmail),d.find(".fromDisplayEmailGrp").find(".controls").html(a.userEmail))})):d.find(".fromDisplayEmailGrp").hide(),c.type==HZ.sendEmail.types.PRO_REPLY||c.type==HZ.sendEmail.types.MP||c.type==HZ.sendEmail.types.USER||c.type==HZ.sendEmail.types.USER_REPLY?(d.find(".proMessageDisclaimer").hide(),d.find(".phoneFldGrp").hide(),d.find(".locationFldGrp").hide(),d.find(".zipFldGrp").hide()):(d.find(".proMessageDisclaimer").show(),d.find(".phoneFldGrp").show(),c.useZipCode?d.find(".locationFldGrp").hide():d.find(".zipFldGrp").hide(),c.isShortForm&&(d.find("#toUserNameField").hide(),d.find("#subjectField").hide(),d.find(".phone-label").hide(),d.find(".location-label").hide(),d.find(".zip-label").hide(),d.find(".modal-header").html(_hgt("Contact {pro}",{pro:c.toUserDisplayName}))));var f=this;if(c.locationData&&c.locationData.length&&c.type==HZ.sendEmail.types.PRO){var g=$.map(c.locationData,function(a){return a.email?a:void 0}).length;if(g){var h=d.find(".dealer-select");h.empty(),h.append($("<option value='"+c.toUserName+"'>"+c.toUserDisplayName+" ("+_hgt("Main Location")+")</option>"));for(var i=0;i<c.locationData.length;i++){var j=c.locationData[i],k=$("<option>");j.email&&(k.attr("value",j.email),j.dealerName?k.text(j.dealerName):k.text(j.email),h.append(k),0==i&&h.val(k.val()),j.email==c.defaultEmailToPopulate&&h.val(k.val()))}var l=function(){f.getToFld().val(h.val()),h.val()==c.toUserName?delete f.getSettings().isDealerLocationEmail:f.getSettings().isDealerLocationEmail=!0};h.on("change",l),l()}else d.find(".dealerFldGrp").hide()}else d.find(".dealerFldGrp").hide()},this.validateMore=function(){var a=this.getForm(),b=a.find(".confirmProMessage");if(""==$.trim(this.getMessageFld().val()))return this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1;if(b.is(":visible")&&b.is(":not(:checked)"))return this.showError(HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE),!1;if(HZ.utils.Config.requirePhoneToContactPro&&a.find(".phoneFldGrp").is(":visible")&&a.find(".zipFldGrp").is(":visible")){var c=a.find(".phoneFldGrp .controls input").val(),d=a.find(".zipFldGrp .controls input").val();if(!c)return this.showError(HZ.sendEmail.texts.ERROR_NO_PHONE),!1;if(!d)return this.showError(HZ.sendEmail.texts.ERROR_NO_ZIP),!1}return!0},this.getMessageBody=function(){var a=this.getSettings(),b=this.getForm(),c="";if(b.find(".phoneFldGrp").is(":visible")){var d=b.find(".phoneFldGrp .controls input").val(),e=b.find(".locationFldGrp .controls input").val(),f="[zip]"+b.find(".zipFldGrp .controls input").val()+"[/zip]";""!=$.trim(d)&&(c=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:d})+"\n"),a.useZipCode?""!=$.trim(f)&&(c=c+_hgt("Project Location: {zipCode}",{zipCode:f})+"\n"):""!=$.trim(e)&&(c=c+_hgt("Project Location: {location}",{location:e})+"\n"),""!=$.trim(c)&&(c+="\n")}return c+=this.getMessageFld().val()},this.onSubmitSuccess=function(){_gaq.push(["_trackEvent","ContactProDialog","contactSuccess"]);var a=this.getSettings(),b={hasaccount:HZ.data.CurrentSessionUser?"y":"n",pro_username:a.toUserName};HZ.utils.Gtm.pushData("pro_contact","pro_contact",b)},function(){HZ.email.ContactProDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.ContactProDialog,HZ.email.ContactDialog),HZ.email.GuestContactProDialog=function(){var a={type:HZ.sendEmail.types.PRO};this.DEFAULT_OPTIONS={toUserName:"",toUserDisplayName:"",subject:"",message:"",useZipCode:!1,isShortForm:!1},this.FORM_TEMPLATE='<fieldset class="row-fluid condensed-layout"><input type="hidden" class="hz-toFld" value=""/><input type="hidden" class="hz-subjectFld" value="" placeholder="'+_hgt("Enter subject")+'"/><div class="control-group"><label class="control-label">'+_hgt("Email{contextEmailNoun}",{contextEmailNoun:""})+'</label><div class="controls"><input type="text" class="hz-emailFld span-xs-12" value="" placeholder="'+_hgt("Enter your email")+'"/></div><div style="clear:both;"></div></div><div class="control-group phoneFldGrp"><label class="control-label phone-label">'+_hgt("Phone #")+'</label><div class="controls"><input type="text" class="span-xs-12" value="" placeholder="'+_hgt("Enter your contact phone number")+'"/></div><div style="clear:both;"></div></div><div class="control-group locationFldGrp"><label class="control-label location-label">'+_hgt("Location")+'</label><div class="controls"><input class="span-xs-12" type="text" value="" placeholder="'+_hgt("Enter your city, state")+'"/></div><div style="clear:both;"></div></div><div class="control-group zipFldGrp"><label class="control-label zip-label">'+_hgt("Zip Code")+'</label><div class="controls"><input class="span-xs-12" type="text" value="" placeholder="'+_hgt("Enter your zip code")+'"/></div><div style="clear:both;"></div></div><div class="control-group dealerFldGrp mbs"><label class="control-label dealer-label">'+_hgt("To:")+'</label><div class="controls"><select class="form-control dealer-select"></select></div></div><div class="control-group"><label class="control-label">'+_hgt("Message")+'</label><div class="controls"><textarea rows="4" value="" class="form-control hz-messageFld span-xs-12" placeholder="'+_hgt("Enter your message here")+'"/></div><div style="clear:both;"></div></div><div id="recaptchaDiv"></div><div class="proMessageDisclaimer control-group"><div class="controls"><label class="checkbox"><input type="checkbox" class="confirmProMessage"/>'+_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation.")+"</label></div></div></fieldset>",this.prepare=function(b){var c=$.extend(!0,{},a,this.DEFAULT_OPTIONS,b),d=this.getForm();c.useZipCode=HZ.utils.Config.zipCodeTestEnabled,c.isShortForm&&(this.DIALOG_TITLE=_hgt("Contact {pro}",{pro:c.toUserDisplayName})),HZ.email.GuestContactProDialog.superclass.prepare.call(this,c),$(d).attr("scopeId","GuestContactProDialog"),d.find(".toDisplayName").html(c.toUserDisplayName),c.type==HZ.sendEmail.types.PRO_REPLY||c.type==HZ.sendEmail.types.MP?d.find(".proMessageDisclaimer").hide():d.find(".proMessageDisclaimer").show(),c.useZipCode?d.find(".locationFldGrp").hide():d.find(".zipFldGrp").hide(),c.isShortForm&&(d.find(".row-fluid.condensed-layout").removeClass("condensed-layout"),d.find(".phone-label").hide(),d.find(".location-label").hide(),d.find(".zip-label").hide(),d.find(".modal-header").html(_hgt("Contact {pro}",{pro:c.toUserDisplayName})));var e=this;if(c.type==HZ.sendEmail.types.PRO)if(c.locationData&&c.locationData.length){var f=$.map(c.locationData,function(a){return a.email?a:void 0}).length;if(f){var g=d.find(".dealer-select");g.empty(),g.append($("<option value='"+c.toUserName+"'>"+c.toUserDisplayName+" ("+_hgt("Main Location")+")</option>"));for(var h=0;h<c.locationData.length;h++){var i=c.locationData[h],j=$("<option>");i.email&&(j.attr("value",i.email),i.dealerName?j.text(i.dealerName):j.text(i.email),g.append(j),0==h&&g.val(j.val()),i.email==c.defaultEmailToPopulate&&g.val(j.val()))}var k=function(){e.getToFld().val(g.val()),g.val()==c.toUserName?delete e.getSettings().isDealerLocationEmail:e.getSettings().isDealerLocationEmail=!0};g.on("change",k),k()}else d.find(".dealerFldGrp").hide()}else d.find(".dealerFldGrp").hide()},onRecaptchaLoadCallback=function(){if("undefined"!=typeof grecaptcha){try{"undefined"!=typeof recaptchaWidgetId&&grecaptcha.reset(recaptchaWidgetId)}catch(a){}$("#recaptchaDiv").is(":empty")&&(recaptchaWidgetId=grecaptcha.render("recaptchaDiv",{sitekey:HZ.utils.Config.recaptchaPublicKey}))}},this.onViewLoaded=function(){"undefined"==typeof grecaptcha?$.getScript("https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoadCallback&render=explicit&hl="+HZ.utils.Config.language):onRecaptchaLoadCallback()},this.onViewUnloaded=function(){"undefined"!=typeof grecaptcha&&grecaptcha.reset(recaptchaWidgetId)},this.validateMore=function(){var a=this.getForm(),b=a.find(".confirmProMessage"),c=a.find(".hz-emailFld").val();if(""==$.trim(this.getMessageFld().val()))return this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1;if(b.is(":visible")&&b.is(":not(:checked)"))return this.showError(HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE),!1;if(!UIHelper.validateEmail(c,!0))return this.showError(HZ.sendEmail.texts.ERROR_INVALID_FROM_EMAIL_ADDRESS),!1;var d=this.getSettings();return this.getSubjectFld().val(d.subject+" from "+c),this.getSubjectFld().val(_hgt("{emailSubject} from {senderEmailAddress}",{emailSubject:d.subject,senderEmailAddress:c})),!0},this.getMessageBody=function(){var a=this.getSettings(),b=this.getForm(),c=b.find(".phoneFldGrp .controls input").val(),d=b.find(".locationFldGrp .controls input").val(),e="[zip]"+b.find(".zipFldGrp .controls input").val()+"[/zip]",f="";return""!=$.trim(c)&&(f=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:c})+"\n"),a.useZipCode?""!=$.trim(e)&&(f=f+_hgt("Project Location: {zipCode}",{zipCode:e})+"\n"):""!=$.trim(d)&&(f=f+_hgt("Project Location: {location}",{location:d})+"\n"),""!=$.trim(f)&&(f+="\n"),f+=this.getMessageFld().val()},this.onSubmitSuccess=function(){_gaq.push(["_trackEvent","GuestContactProDialog","contactSuccess"]);var a=this.getSettings(),b={hasaccount:HZ.data.CurrentSessionUser?"y":"n",pro_username:a.toUserName};HZ.utils.Gtm.pushData("pro_contact","pro_contact",b)},function(){HZ.email.GuestContactProDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.GuestContactProDialog,HZ.email.ContactDialog),HZ.email.PostIdeabookConfirmContactProDialog=function(){var a={type:HZ.sendEmail.types.PRO};this.DEFAULT_OPTIONS={toUserName:"",toUserDisplayName:"",subject:"",message:"",useZipCode:!1},this.DIALOG_TITLE=_hgt("Saved!"),this.FORM_TEMPLATE="<div class='related-pros-info clearfix'><div id='proUpsellMsg' class='pro-screen-text'></div><div id='proInfo' class=''></div><div id='proContactForm' class=''><fieldset class=\"row-fluid\"><div class=\"control-group fromDisplayEmailGrp\"><label class=\"control-label\">"+_hgt("From")+'</label><div id="fromEmailField" class="controls"></div></div><div class="control-group" id="toUserNameField"><label class="control-label">'+_hgt("To")+'</label><div class="controls toDisplayName"></div><input type="hidden" class="hz-toFld" value=""/></div><div class="control-group" id="subjectField"><label class="control-label">'+_hgt("Subject")+'</label><div class="controls"><input type="text" class="hz-subjectFld span-xs-12 form-control" value="" placeholder="'+_hgt("Enter subject")+'"/></div></div><div class="control-group phoneFldGrp"><div class="controls" comp_id="phone"><input type="text" class="span-xs-12 form-control" value="" placeholder="'+_hgt("Enter your contact phone number")+'"/></div></div><div class="control-group zipFldGrp"><div class="controls" comp_id="zip"><input type="text" class="span-xs-12 form-control" value="" placeholder="'+_hgt("Enter your zip code")+'"/></div></div><div class="control-group"><label class="control-label">'+_hgt("Message")+'</label><div class="controls" comp_id="message"><textarea class="hz-messageFld span-xs-12 form-control" rows="4" value="" placeholder="'+_hgt("Enter your message here")+'"/></div></div><div class="proMessageDisclaimer"><label class="checkbox"><input type="checkbox" class="confirmProMessage"/>'+_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation.")+"</label></div></fieldset></div></div>",this.prepare=function(b){var c=$.extend(!0,{},a,this.DEFAULT_OPTIONS,b),d=this.getForm(),e="",f=_hgt("Go to <t1>{galleryName}</t1>.",{galleryName:c.galleryName,t1:{tag:"a",attr:{href:c.galleryUrl,"class":"colorLink trackMe",compId:"ideabook"}}});d.find(".modal-footer").prepend("<span id='goToIdeabook'>"+f+"</span>"),e+="<div class='pro-content-container' compId='pro_container'><div class='top-pro-cover'><a href='' class='trackMe'><img data-no-pin-hover='true' src='"+c.coverImageUrl+"' width='250' height='230'></a></div><div class='bottom-pro-details'><div id='proThumb' itemprop='image'><img data-no-pin-hover='true' class='photo hz-user-image' src='"+c.userThumbUrl+"' width='40' height='40'/></div><div id='textDetails'><div class='pro-name'><a class='trackMe' href='"+c.userLink+"'><b>"+c.toUserDisplayName+"</b></a></div>"+c.ratingHtml+"<b>"+c.shortDescription+"</b></div></div></div>",d.find("#proInfo").append(e),d.find("#proUpsellMsg").html(c.proUpsellMsg),c.useZipCode=HZ.utils.Config.zipCodeTestEnabled,HZ.email.ContactProDialog.superclass.prepare.call(this,c),$(d).attr("scopeId","IdeabookContactProDialog"),d.find(".toDisplayName").html(c.toUserDisplayName);var g="";HZ.data.CurrentSessionUser&&c.type!=HZ.sendEmail.types.MP&&c.type!=HZ.sendEmail.types.USER&&c.type!=HZ.sendEmail.types.USER_REPLY?(d.find(".fromDisplayEmailGrp").show(),g=HZ.data.CurrentSessionUser.getEmailAddress(),g?d.find(".fromDisplayEmailGrp").find(".controls").html(g):HZ.ajaz.Services.User.getCurrentSessionUserEmail(function(a){"true"==a.success&&a.userEmail&&(HZ.data.CurrentSessionUser.setEmailAddress(a.userEmail),d.find(".fromDisplayEmailGrp").find(".controls").html(a.userEmail))})):d.find(".fromDisplayEmailGrp").hide(),d.find("#toUserNameField").hide(),d.find("#subjectField").hide(),$(".modal-dialog").addClass("post-ideabook-save-pro-contact")},this.validateMore=function(){var a=this.getForm(),b=a.find(".confirmProMessage");return""==$.trim(this.getMessageFld().val())?(this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1):b.is(":visible")&&b.is(":not(:checked)")?(this.showError(HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE),!1):!0},this.getMessageBody=function(){var a=this.getSettings(),b=this.getForm(),c="";if(b.find(".phoneFldGrp").is(":visible")){var d=b.find(".phoneFldGrp .controls input").val(),e=b.find(".locationFldGrp .controls input").val(),f="[zip]"+b.find(".zipFldGrp .controls input").val()+"[/zip]";""!=$.trim(d)&&(c=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:d})+"\n"),a.useZipCode?""!=$.trim(f)&&(c=c+_hgt("Project Location: {zipCode}",{zipCode:f})+"\n"):""!=$.trim(e)&&(c=c+_hgt("Project Location: {location}",{location:e})+"\n"),""!=$.trim(c)&&(c+="\n")}return c+=this.getMessageFld().val()},this.onSubmitSuccess=function(){_gaq.push(["_trackEvent","ContactProDialog","contactSuccess"])},function(){HZ.email.PostIdeabookConfirmContactProDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.PostIdeabookConfirmContactProDialog,HZ.email.ContactDialog),HZ.email.EmailDialog=function(){function a(){if(!e){e=new HZ.ui.yamdi.Dialog;var a={dialogClassName:"contactsLoadingDlg",controls:[]};e.init(a);var b="",c='<div class="hzLoadingDlgThrobber"></div><div class="hzLoadingDlgMessage">'+_hgt("Loading...")+"</div>";e.setTitle(b),e.setBody(c)}}function b(b){a(),HZ.ui.Yamdi.switchDialog(e),HZ.utils.ResourceLoader.requireAddressBookResources(function(){HZ.addressBook.Contacts.load(b,function(){f=!0;var a=HZ.dialogs.EmailDialog;HZ.addressBook.Contacts.isUpsellRequired()&&(a=HZ.addressBook.Dialogs.getUpsellDialog(function(a){a?d():HZ.ui.Yamdi.switchDialog(HZ.dialogs.EmailDialog)})),HZ.ui.Yamdi.switchDialog(a)})})}function c(a){g||(a?($("#upsellTip").hover(function(){var a=h?_hgt("Update your Gmail contact list to lookup your recently emailed friends by name.  Houzz will not use your contact list to send any messages other than those directed by you."):_hgt("By importing your Gmail contact list, you can look up your friends by name and auto-complete their email addresses when you send them messages.  Houzz will not use your contact list to send any messages other than those directed by you.");$("#upsellTip").tipBubble({content:a,point:"north",width:200,position:"absolute",showCloseBtn:!1})},function(){$("#upsellTip").tipBubble("hide")}),$("#upsellLine a:first").click(function(){d()})):$("#upsellLine").css("display","none"),g=!0)}function d(){HZ.externalContacts.api.requestAuth(HZ.utils.Config.appTypeGoogle,HZ.ajaz.Contacts.GOOGLE_CONTACTS_SCOPE,function(a){b(!0)})}var e=null,f=!1,g=!1,h=!1,i=!1;this.DEFAULT_OPTIONS={type:null,referenceId:null,subject:"",message:"",event:HZ.sendEmail.events.BTN,useAddressBook:!0};var j={tag:"a",attr:{href:"javascript:;","class":"colorLink"}},k={tag:"a",attr:{id:"upsellTip",href:"javascript:;","class":"colorLink"}};this.FORM_TEMPLATE='<fieldset class="row-fluid"><label>'+_hgt("To (enter recipient emails, separated by commas):")+'</label><div id="emailDialogAddressBook"></div><textarea class="hz-toFld span-xs-12 form-control" rows="2" id="emailDialogEmailInput" /><div id="upsellLine">'+_hgt("<t1>Import my Gmail contact list</t1>&nbsp;(<t2>why?</t2>)",{t1:j,t2:k})+"</div><label>"+_hgt("Subject")+'</label><input type="text" class="hz-subjectFld span-xs-12" value="" placeholder="'+_hgt("Enter subject")+'"/><label>'+_hgt("Message")+'</label><textarea rows="5" class="form-control hz-messageFld span-xs-12" placeholder="'+_hgt("Enter your message here")+'"/></fieldset>',this.validateMore=function(){var a=this.getForm().find(".hz-toFld").val();return UIHelper.validateEmail(a,!0)?!0:(this.showError(HZ.sendEmail.texts.ERROR_INVALID_TO_EMAIL_ADDRESSES),!1)},this.prepare=function(a){HZ.email.EmailDialog.superclass.prepare.call(this,a);var b=this.getSettings();b.useAddressBook=b.useAddressBook&&HZ.utils.Config.emailShareAbImportEnabled,this.applySettings(b)},this.onViewUnloaded=function(){var a=this.getSettings();a.useAddressBook&&f&&i&&$("#emailDialogAddressBook").clearAddressBookInput(),$("#emailDialogEmailInput").val("")},this.onViewLoaded=function(){var a=this.getSettings();if(c(a.useAddressBook),a.useAddressBook&&!f)return void b(!1);if(HZ.email.EmailDialog.superclass.onViewLoaded.call(this),a.useAddressBook){var d=HZ.addressBook.Contacts.getContacts();h=d&&d.length>0,this.getSubjectFld().val(a.subject),this.getMessageFld().val(a.message),!i&&h?($("#emailDialogEmailInput").height("64px"),$("#emailDialogAddressBook").addressBook({input:$("#emailDialogEmailInput"),showAddressBook:!1}),i=!0,$("#emailDialogEmailInput_tag").focus()):this.getToFld().focus(),$("#upsellLine a:first").text(h?_hgt("Update my Gmail contact list"):_hgt("Import my Gmail contact list"))}else this.getToFld().focus()},function(){HZ.email.EmailDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.EmailDialog,HZ.email.ContactDialog),HZ.ns("HZ.dialogs"),HZ.dialogs.EmailDialog=new HZ.email.EmailDialog,HZ.email.ShareColorPaletteDialog=function(){this.DEFAULT_OPTIONS={type:null,referenceId:null,subject:"",message:"",event:HZ.sendEmail.events.SHARECP,scopeId:"",allowShare:!0,mfr:"",colorPaletteShareLink:"",generateColorPaletteImageLink:""},this.DIALOG_CLASSNAME="shareColorPaletteDialog",this.DIALOG_TITLE=_hgt("Share color palette"),this.FORM_TEMPLATE="<div id='shareColorPaletteDialog' class='trackMe'><div class='mftDisclaimer'><i>"+_hgt("The colors displayed on-screen may not match %mft% color standards")+"</i></div><div class='socialShareBtnsContainer'><a href='javascript:;' compid='fbShare' class='fb-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateFbShareEvent();'><div class='socialShareBtn facebook'></div></a><a href='javascript:;' compid='twShare' class='tw-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateTwShareEvent();'><div class='socialShareBtn twitter'></div></a><a href='javascript:;' compid='gShare' class='g-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateGShareEvent();'><div class='socialShareBtn plusone'></div></a></div><div class='sectionDivider text-bold'><span><i>"+_hgt("or email this to a friend")+"</i></span></div><form id='emailColorPaletteForm' name='emailColorPaletteForm' action='javascript:;'><textarea type='text' rows='1' class='form-control hz-toFld' id='emailDialogEmailInput' placeholder='"+_hgt("To (enter recipient emails, separated by commas)")+"'></textarea><label>"+_hgt("Subject")+"</label><input type='text' class='hz-subjectFld' id='emailDialogSubjectInput'><label>"+_hgt("Message")+"</label><textarea class='form-control hz-messageFld' id='emailDialogMessageInput' rows='5'></textarea></form></div>",this.validateMore=function(){var a=this.getForm().find("#emailDialogEmailInput").val();return UIHelper.validateEmail(a,!0)?!0:(this.showError(HZ.sendEmail.texts.ERROR_INVALID_TO_EMAIL_ADDRESSES),!1)},this.prepare=function(a){HZ.email.ShareColorPaletteDialog.superclass.prepare.call(this,a);var b=this.getSettings();this.applySettings(b)},this.onViewUnloaded=function(){this.getSettings()},this.onViewLoaded=function(){var a=this.getSettings();$("#shareColorPaletteDialog").attr("objid",a.referenceId).attr("scopeid",a.scopeId);var b=$(".mftDisclaimer i").html().replace("%mft%",this.getPaletteManufacturer());$(".mftDisclaimer i").html(b),HZ.email.ShareColorPaletteDialog.superclass.onViewLoaded.call(this),this.getToFld().focus()},this.getPaletteManufacturer=function(){return HZ.utils.ColorPicker.getPaintManufacturerDisplayName(this.getSettings().mfr)},this.generateFbShareEvent=function(){var a=this.getSettings(),b=611,c=368,d=encodeURIComponent(a.colorPaletteShareLink),e="https://www.facebook.com/sharer/sharer.php?u="+d,f=HZ.ui.Utils.getCenteredPopupPosition(b,c);window.open(e,"fbwindow","width="+b+", height="+c+", left="+f.left+", top="+f.top+", toolbar=0, location=0, menubar=0, scrollbars=0")},this.generateTwShareEvent=function(){var a=this.getSettings(),b=550,c=380,d=_hgt("I love this @{mft} Paint color palette! Create your own @Houzz",{mft:this.getPaletteManufacturer()}),e=encodeURIComponent(d),f=encodeURIComponent(a.colorPaletteShareLink),g="https://twitter.com/share?url="+f+"&text="+e,h=HZ.ui.Utils.getCenteredPopupPosition(b,c);window.open(g,"fbwindow","width="+b+", height="+c+", left="+h.left+", top="+h.top+", toolbar=0, location=0, menubar=0, scrollbars=0")},this.generateGShareEvent=function(){var a=this.getSettings(),b=600,c=600,d=encodeURIComponent(a.colorPaletteShareLink),e="https://plus.google.com/share?url="+d,f=HZ.ui.Utils.getCenteredPopupPosition(b,c);
window.open(e,"fbwindow","width="+b+", height="+c+", left="+f.left+", top="+f.top+", toolbar=0, location=0, menubar=0, scrollbars=1, resizeable=1")},function(){HZ.email.ShareColorPaletteDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.ShareColorPaletteDialog,HZ.email.ContactDialog),HZ.email.PostIdeabookSaveShareEmail=function(){this.DEFAULT_OPTIONS={type:null,referenceId:null,imageTag:null,galleryTitle:null,galleryUrl:null,subject:"",message:"",event:"",scopeId:"",allowShare:!1},this.DIALOG_CLASSNAME="postIdeabookSaveShareEmailDialog",this.DIALOG_TITLE=_hgt("Great Choice!"),this.FORM_TEMPLATE="<div id='shareEmailDialog' class='trackMe'><div class='addToIdeabookInfo'><div id='shareEmailConfirmImage' class='addToIdeabookImage'></div></div><div id='emailFormContainer'><form id='shareEmailForm' name='shareEmailForm' action='javascript:;'><div id='shareEmailCTA' class='sectionDivider text-bold'></div><div class='sectionDivider'><input type='hidden' class='hz-toFld' id='emailDialogEmailInput0'><input type='text' class='' id='emailDialogEmailInput1' placeholder='"+_hgt("Email")+"'></div><div class='sectionDivider'><input type='text' class='' id='emailDialogEmailInput2' placeholder='"+_hgt("Email")+"'></div><div class='sectionDivider'><input type='text' class='' id='emailDialogEmailInput3' placeholder='"+_hgt("Email")+"'></div><input type='hidden' class='hz-subjectFld' id='emailDialogSubjectInput'><textarea class='hz-messageFld' id='emailDialogMessageInput' rows='5' style='display:none;'></textarea></form></div><div style='clear:both;'></div></div>",this.validateMore=function(){var a=this.getForm().find("#emailDialogEmailInput1").val(),b=this.getForm().find("#emailDialogEmailInput2").val(),c=this.getForm().find("#emailDialogEmailInput3").val(),d=(a?a:"")+(b?","+b:"")+(c?","+c:"");return UIHelper.validateEmail(d,!0)?!0:(this.showError(_hgt("Please enter at least one valid email address")),!1)},this.prepare=function(a){HZ.email.PostIdeabookSaveShareEmail.superclass.prepare.call(this,a);var b=this.getSettings();this.applySettings(b)},this.onViewUnloaded=function(){this.getSettings();$("#emailDialogEmailInput1").empty(),$("#emailDialogEmailInput2").empty(),$("#emailDialogEmailInput3").empty(),this.hideStatus()},this.onViewLoaded=function(){HZ.utils.Logger.sendEventLog(HZ.sendEmail.events.ADDTOIBK_SHARE_EMAIL);var a=this.getSettings();$("#emailDialogEmailInput0").val("blah@blah.com"),$("#shareEmailConfirmImage").html(a.imageTag);var b=_hgt("Show <t1>{idea}</t1> to friends and family.",{idea:a.galleryTitle,t1:{tag:"a",attr:{href:a.galleryUrl,"class":"colorLink trackMe",compId:"shared_ideabook_link",target:"_blank"}}});$("#shareEmailCTA").html(b),$("#shareEmailDialog").attr("objid",a.referenceId).attr("scopeid",a.scopeId),HZ.email.PostIdeabookSaveShareEmail.superclass.onViewLoaded.call(this),$("#emailDialogEmailInput1").focus(),this.getSendBtn().click(function(){var a=$("#emailDialogEmailInput1").val(),b=$("#emailDialogEmailInput2").val(),c=$("#emailDialogEmailInput3").val(),d=$.unique([a,b,c]),e="";$.each(d,function(a,b){e+=b?b:""}),e?($("#emailDialogEmailInput0").val(e),HZ.utils.Logger.sendEventLog(HZ.sendEmail.events.SEND_BTN_ADDTOIBK_SHARE_EMAIL)):$("#emailDialogEmailInput0").val("blah@blah.com")})},function(){HZ.email.PostIdeabookSaveShareEmail.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.PostIdeabookSaveShareEmail,HZ.email.ContactDialog),HZ.ns("HZ.dialogs"),HZ.dialogs.ShareColorPaletteDialog=new HZ.email.ShareColorPaletteDialog,HZ.dialogs.PostIdeabookSaveShareEmail=new HZ.email.PostIdeabookSaveShareEmail;

window.hzmr.push("contactDialog:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End contactDialog.js  **************/
/************* Start bufferedLoader.js for locale en-US **************/
try {HZ.ns("HZ.BufferedLoader"),HZ.BufferedLoader=function(a,b){var c={bufferedContentSelector:".bufferedContent",numItemsPerPage:10,loadMoreAjaxItems:null,showNewItemsFromBuffer:null,extraBlockAttr:null},d=!1,e=$.extend(c,a),f=[],g=!1,h=!0;this.loadMore=function(a,b){var c=j();b&&(c.empty(),h=!0),a&&f.push(a);var d=c.children();d.length<e.numItemsPerPage&&h?(g=!0,i()):k()};var i=function(){return d?!1:(d=!0,e.loadMoreAjaxItems(function(a){d=!1;var b=j();null==a||0==a.length?h=!1:b.append(a),g&&(g=!1,k())}),!0)},j=function(){var a=$(b).find(e.bufferedContentSelector).first();return 0==a.length&&(a=$("<div class='"+e.bufferedContentSelector.substr(1)+"'></div>"),$(b).append(a)),a},k=function(){var a=j(),b=a.children(),c=Math.min(e.numItemsPerPage,b.length),d=b.slice(0,c),g=null;d.length>0&&(g=$("<div "+(e.extraBlockAttr?e.extraBlockAttr:"")+"></div>").append(d).css("display","none")),e.showNewItemsFromBuffer(g),b.length-c<e.numItemsPerPage&&h&&i(),f.length>0&&($.each(f,function(){this.call(this)}),f=[])}},function(a){a.fn.bufferedLoader=function(b){return this.each(function(){null==a(this).data("bufferedLoader")&&a(this).data("bufferedLoader",new HZ.BufferedLoader(b,this))})}}(jQuery);

window.hzmr.push("bufferedLoader:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End bufferedLoader.js  **************/
/************* Start unifiedStories.js for locale en-US **************/
try {HZ.UnifiedStories=new function(){var a=null,b={mosaicSelector:".mosaicImages",fromTimestamp:null,moreSelector:".moreStories",numItemsPerPage:15,todayTabId:"today-tab",galleriesTabId:"galleries-tab",adviceTabId:"advice-tab",tabContainerSelector:"#unified-tab-container",tabContentSelector:"#unified-tab-content",pagesToAutoLoad:2,discoverUrl:null,openInNewTab:!0,minUpdateIntervalSec:30},c=null,d=null,e=!1,f=-1,g=0,h=0,i=!1,j=null,k=!1,l=0,m=null,n=!1,o=!0,p=function(a){var b,c=$(".hp-side-components").children(),d=a.children();if(c.length&&d.length){null==j&&(j=$(".preloaded-feed").children().not(".hp-side-component, .hp-side-components").length);for(var e=0;e<d.length;e++)b=c.filter("[data-idx='"+j+"']"),j+=1,b.length&&(d.eq(e).after(b.clone()),b.remove())}},q=function(a){a.success&&"true"===a.success&&"true"==a.hasNewItems&&(n=!0)},r=null,s=null,t=function(a){s||(r=null,s=!0,HZ.ajaz.Services.UnifiedStories.hasNewItems(null,function(){s=!1,a.apply(this,arguments)}))},u=function(b){null==b&&(b=a.minUpdateIntervalSec),null!=b&&(n||(null!=r&&clearTimeout(r),r=setTimeout(function(){t(q)},1e3*b)))},v=function(){$("#unified-stories").on("change","#ppbServiceOptions",function(a){var b=$(a.currentTarget),c=b.val(),d=b.find("option:selected").attr("clurl"),e=b.find("option:selected").attr("topicid");b.parents(".promoted-pro-block").find("#findLocalProsBtn").attr("href",c).attr("objid",e),d&&b.parents(".promoted-pro-block").find(".ppb-loc-link").attr("href",d).attr("objectid",e)})},w=function(a,b){a&&0!==a.length&&b&&("default"===b?x(a):"single"===b?y(a):"fisheye"===b?z(a):"stack"===b&&A(a))},x=function(a){function b(a){var b=f.get(a),c=d.get(a);b&&c&&(f.removeClass("active"),$(b).addClass("active"),d.removeClass("current"),$(c).addClass("current"),g=a)}if(a&&0!==a.length){var c=a.find(".shop-stories-carousel-wrapper"),d=c.find(".shop-stories-carousel-slide"),e=d.length,f=c.find(".shop-stories-carousel-nav-bullet"),g=0,h=!1,i=5e3;f.on("click",function(a){h=!0;var c=$(this).data("nav-to");b(parseInt(c))}),setInterval(function(){c&&c.length>0&&(h||(g=(g+1)%e,b(g)),h=!1)},i)}},y=function(a){function b(a){if(!h){var b=$(d.get(f)),c=f+a,g=b.width();if(a>0){c>=e&&(c=0);var i=$(d.get(c));b.css({left:0}).animate({left:-g},j,function(){$(this).hide(),h=!1}),i.css({left:g}).show().animate({left:0},j,function(){h=!1})}else if(0>a){0>c&&(c=e-1);var i=$(d.get(c));b.css({left:0}).animate({left:g},j,function(){$(this).hide(),h=!1}),i.css({left:-g}).show().animate({left:0},j,function(){h=!1})}f=c,h=!0}}if(a&&0!==a.length){var c=a.find(".shop-stories-carousel-single"),d=c.find(".shop-stories-carousel-single-slide"),e=d.length,f=0,g=!1,h=!1,i=5e3,j=500;setInterval(function(){c&&c.length>0&&(g||b(1),g=!1)},i),a.find(".shop-stories-carousel-single-next").on("click",function(){g=!0,b(1)}),a.find(".shop-stories-carousel-single-pre").on("click",function(){g=!0,b(-1)})}},z=function(a){},A=function(a){},B=function(){return $("#unified-tab-content").offset().top-$("#navContainer").outerHeight(!0)-65};this.init=function(d){a=$.extend(b,d),c=$(a.moreSelector).first(),i=!!a.isSignedIn;var h=$(a.tabContentSelector);$(a.mosaicSelector).mosaic(),$(a.tabContainerSelector).on("click","a",N),a.openInNewTab&&h.on("click","a",M),u();var j=$("#homepage-refresh");j.on("click",function(){j.hide(),n=!1,HZ.UnifiedStories.reload()}),v();var l=$(".feedItem.shop-stories-feed-block");w(l,a.shopStoryType),$("#homepage-feed-title").on("click",function(){j.hide(),n=!1,HZ.UnifiedStories.reload()}),$(window).on("scroll",$.throttle(250,J)),h.bufferedLoader({extraBlockAttr:null,numItemsPerPage:a.numItemsPerPage,loadMoreAjaxItems:function(b){if(!e){var c=function(c){var d=null;if(c.success&&"true"===c.success){var f=c.html;a.fromTimestamp=c.fromTimestamp,d=$("<div class='feedItemGroup'></div>").append(f).children();var g=$("#unified-tab-content[lb-context]").attr("lb-context");if(null!==g){var h=HZ.data.Contexts.get(g);if(null!==h){var i=[],j={};d.find("[lb-sid]").each(function(){var a=$(this).attr("lb-sid");h.containsSpaceId(a)||j[a]||(i.push(a),j[a]=!0)});var k=c.coreData;k.context={spaceIds:i,nextpos:JSON.stringify(c.fromTimestamp)};var l={results:k};h.handleData(l)}}}else c.error;e=!1,b(d)};e=!0,HZ.ajaz.Services.UnifiedStories.getUnifiedStories(a.fromTimestamp,f,c)}},showNewItemsFromBuffer:function(b){if(null===b||0==b.length)F();else{k&&D(),p(b),b.find(a.mosaicSelector).mosaic();var d=function(a,b){var c=$(a).find("img");if(0==c.length)b.call(a);else{var d=c.length,e=0;c.each(function(){var c=$(this),f=c.attr("src");c.attr("src","").one("load",function(){e++,e==d&&b.call(a)}).attr("src",f)})}},e=b.find(".feedItem");E(e),b.find(".feedItem").addClass("feedItemLoading"),b.show(),c.before(b),L().hide();var f=b.find(".feedItem.shop-stories-feed-block");w(f,a.shopStoryType),b.find(".feedItemLoading").each(function(){d(this,function(){$(this).removeClass("feedItemLoading")})});var g=$(".promoted-pro-block");g.find("#ppbServiceOptions").customDropdown(),g.find(".feed-description").attr("objid",g.find("#findLocalProsBtn").attr("objid"));var h=1500;setTimeout(function(){var a=b.find(".feedItemLoading");a.length>0&&a.removeClass("feedItemLoading")},h)}}}),c.click(function(){g=0,K()});var m=h.find(".feedItem"),q=m.filter(function(){return $(this).hasClass("placeholder")});(0==m.length||q.length>0)&&K(),E($(".feedItem").not(".placeholder")),o=!0};var C=function(){if(k=!0,HZ.lb&&HZ.lb.Context){var a=$("#unified-tab-content[lb-context]").attr("lb-context");if(null!==a){var b=new HZ.lb.Context(a,20,[],[],0,0,null,0);HZ.data.Contexts.put(a,b)}}c.show(),null!=d&&d.hide(),o=!0},D=function(){k=!1,$("body,html").stop(!0,!0);var b=B();window.scrollY>b&&window.scrollTo(0,b);L();$(a.tabContentSelector).children().not(".feedStoryPlaceholders, .bufferedContent, .discoverMoreTopics, "+a.moreSelector).remove(),g=0,h=0};this.equalizeHeights=function(a){$.each(a,function(a,b){for(var c=$(b).find(".feedItem.square"),d=0,e=3;a++<=c.size()/e;)c.slice(d,d+e).equalizeHeights(),d+=e})};var E=function(a){if(a.length>0)for(var b=0;b<a.length;b++){var c=$(a[b]);"undefined"==typeof c.attr("posid")&&c.attr("posid",h++)}},F=function(){if(a.discoverUrl){var b=_hgt("Discover more topics");null==d&&(d=i?$('<div class="discoverMoreTopics" compid="discover_more_topics" posid="bottom"><a class="loadMoreBtn open-topics-diag trackMe" onclick=\'HZ.modules.UserFollowTopics.main.showTopicsDialog();\' href="'+a.discoverUrl+'">'+b+"</a></div>"):$('<div class="discoverMoreTopics" compid="discover_more_topics" posid="bottom"><a class="loadMoreBtn open-topics-diag trackMe" onclick=\'HZ.auth.Manager.signup();\' href=\'javascript:void(0);\'>'+b+"</a></div>"),d.insertAfter(c)),c.hide(),d.show(),u(0)}else c.hide();o=!1},G=!1,H=null,I=!1,J=function(){if(o&&g<a.pagesToAutoLoad){var b=$(window).height();c.offset().top-b<$(window).scrollTop()+b&&K()&&g++}var d=$("#homepage-refresh");d.length&&(m=window.scrollY,window.scrollY+60>$("#unified-stories").offset().top?d.addClass("floating"):d.hasClass("floating")&&d.removeClass("floating"),l>m?(I=!1,!d.is(":visible")&&n?G||(G=!0,window.setTimeout(function(){d.stop().fadeIn(400,function(){G=!1})},499)):d.is(":visible")&&(H&&window.clearTimeout(H),H=window.setTimeout(function(){I=!0},888))):d.is(":visible")&&!G&&I&&d.hide(),l=m)},K=function(b){if($(window).trigger("resize"),!c.is(":visible")||c.hasClass("loading"))return!1;c.addClass("loading");var d=$(a.tabContentSelector).data("bufferedLoader");return d.loadMore(function(){c.removeClass("loading")},b),!0},L=function(){var b=$(".feedStoryPlaceholders");return 0==b.length&&(b=$(".feedItem.placeholder").first().parentsUntil(a.tabContentSelector).last().addClass("feedStoryPlaceholders")),b},M=function(a){var b=$(this),c=b.attr("href");"string"==typeof b.attr("lb-view")||"_blank"==b.attr("target")||!c||0!=c.indexOf("http")&&0!=c.indexOf("/")||b.hasClass("loadMoreBtn")||b.attr("target","_blank")},N=function(b){var d=$(a.tabContentSelector),g=$(b.currentTarget);if(!g.hasClass("selected")&&!e){switch(e=!0,g.attr("id")){case a.todayTabId:f=-1,$(".postToFollowers").show();break;case a.galleriesTabId:f=1,$(".postToFollowers").hide();break;case a.adviceTabId:f=2,$(".postToFollowers").hide()}g.siblings().removeClass("selected"),g.addClass("selected"),d.css("opacity",.4),a.fromTimestamp=null,HZ.ajaz.Services.UnifiedStories.getUnifiedStories(a.fromTimestamp,f,function(a){c.siblings().remove(),d.css("opacity",""),O(a)})}},O=function(b){if(b.success&&"true"===b.success){var d=b.html;a.fromTimestamp=b.fromTimestamp;var f=$("<div class='feedItemGroup'></div>").append(d);0==f.find(".feedContainer").children().length,f.find(a.mosaicSelector).mosaic(),f.hide(),c.before(f),f.fadeIn(400,function(){"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&f.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),f.find("textarea.commentBody").initPlaceHolders()})}else b.error;e=!1};this.getConfig=function(){return a},this.reloadAfterClosingTopicsDialog=function(){var a=$("#homepage-refresh");a.hide(),n=!1,this.reload()},this.reload=function(b,c){var d=B();window.scrollY>d&&$("body,html").animate({scrollTop:d},500,"swing"),a.fromTimestamp={},c&&(a.fromTimestamp.p=-2),C(),K(!0),u()}};

window.hzmr.push("unifiedStories:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End unifiedStories.js  **************/
/************* Start coreDataAjaxHandler.js for locale en-US **************/
try {HZ.ns("HZ.activityFeed"),HZ.activityFeed.NewDataHandler=function(a){return function(b,c,d){if(b.coreData){var e=b.coreData,f={images:HZ.data.Images,spaces:HZ.data.Spaces,users:HZ.data.Users};for(var g in f)e[g]&&f[g].addAll(e[g])}a&&a(b,c,d)}};

window.hzmr.push("coreDataAjaxHandler:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End coreDataAjaxHandler.js  **************/
/************* Start jquery-ui-1.10.3.custom.widget-only.js for locale en-US **************/
try {!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery);

window.hzmr.push("jquery-ui-1.10.3.custom.widget-only:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery-ui-1.10.3.custom.widget-only.js  **************/
/************* Start mosaic.js for locale en-US **************/
try {HZ.ns("HZ.mosaic"),HZ.mosaic=new function(){var a={1:{x:509,y:320},2:{x:249,y:320},3:{x:249,y:155}},b={1:{x:643,y:400},2:{x:316,y:400},3:{x:316,y:195}},c={1:[1],2:[2,2],3:[2,3,3]},d="<div class='spaceBoxes %EMPTY_CLASS%'>                                    %CONTENT_HTML%                                </div>",e="<div class='mosaic-photo-credit text-xxs'>                                    <a class='hz-credit' href='%CREDIT_LINK%'>%USER_NAME%<span class='hzi-font hzi-Info'></span></a>                                </div>",f="<a href='%IMAGE_LINK%' oncontextmenu='return false;' class='img-responsive-wrapper spaceBox %SPACE_BOX_CLASS%'>                                            <img src='%IMAGE_SRC%' class='img-responsive'>                                        </a>",g="<div oncontextmenu='return false;' class='img-responsive-wrapper spaceBox %SPACE_BOX_CLASS%'>                                        <img src='%IMAGE_SRC%' class='img-responsive'>                                    </div>",h="<div class='filler img-responsive-wrapper spaceBox %SPACE_BOX_CLASS%'>                                            <img src='%IMAGE_SRC' class='img-responsive grayFiller'>                                        </div>",i=function(b,i,j,k,l){var m,n=3,o=Math.max(1,Math.min(b.length,n)),p=c[o],q=$.proxy(i?HZ.utils.Links.getSpaceImageUrl:HZ.utils.Links.getImageUrl,HZ.utils.Links),r=i?$.proxy(HZ.utils.Links.getSpaceLink,HZ.utils.Links):function(){return"javascript:;"},s=function(){for(var c,d,i,k,l=Math.min(n,o),m="",s=0;l>s;s++)if(c=b[s],i=a[p[s]].x,k=a[p[s]].y,d="spaceBox"+p[s],c){if(1===o){var t=HZ.data.Spaces.get(c);if(null!=t){var u=HZ.data.Users.get(t.ow);if(null!=u){var v=u.n,w=u.d,x=HZ.utils.Links.getUserLink(v);m+=HZ.utils.Html.template(e,{CREDIT_LINK:x,USER_NAME:w})}}}m+=j?HZ.utils.Html.template(f,{IMAGE_SRC:q(c,i,k,!1),SPACE_BOX_CLASS:d,IMAGE_LINK:r(c)}):HZ.utils.Html.template(g,{IMAGE_SRC:q(c,i,k,!1),SPACE_BOX_CLASS:d})}else m+=HZ.utils.Html.template(h,{IMAGE_SRC:HZ.utils.Config.emptyGifData,SPACE_BOX_CLASS:d});return m};return m=HZ.utils.Html.template(d,{EMPTY_CLASS:1!=o||b[0]?"":"empty",CONTENT_HTML:s()})},j=function(d,e,f,g,h,i,j){var k,l="",m=3,n=Math.max(1,Math.min(d.length,m)),o=i?"reloadMe":"",p=i?"reloadable":"",q=246,r=$.proxy(e?HZ.utils.Links.getSpaceImageUrl:HZ.utils.Links.getImageUrl,HZ.utils.Links),s=e?$.proxy(HZ.utils.Links.getSpaceLink,HZ.utils.Links):function(){return"javascript:;"};k=c[n],g&&(l+="<a href='"+g+"'>"),l+=1!==n||d[0]?"<div class='spaceBoxes'>":"<div class='spaceBoxes empty'>";var t,u,v=window.innerWidth,w=Math.min(m,n);for(u=0;w>u;u++){t=d[u];var x=!1,y=k[u],z="spaceBox spaceBox"+y,q=a[y].x,A=a[y].y,B=b[y].x,C=b[y].y,D="";if(t){t.i&&(x=2===t.w,t=t.i);var E="",F="oncontextmenu='return false;' data-pin-no-hover='true' compid='img"+(u+1)+"-"+w+"'";if(HZ.lb&&HZ.lb.Lightbox&&(F+=" lb-mag lb-view",e&&(E="lb-sid='"+t+"'")),1===n){var G=HZ.data.Spaces.get(t);if(null!=G){var H=HZ.data.Users.get(G.ow);if(null!=H){var I=H.n,J=H.d,K=HZ.utils.Links.getUserLink(I);l+="<div class='mosaic-photo-credit text-xs'><a class='hz-credit' href='"+K+"'>"+J+"<span class='hzi-font hzi-Info'></span></a></div>"}}}v>=1280&&i?(D=r(t,B,C,x),l+=f?"<a "+F+" href='"+s(t)+"' class='"+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img "+E+" src='"+D+"' class='"+p+"' width='"+B+"' height='"+C+"'/></a>":"<div "+F+" class='"+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img "+E+" src='"+D+"' class='"+p+"' width='"+B+"' height='"+C+"'/></div>"):(D=r(t,q,A,x),l+=f?"<a "+F+" href='"+s(t)+"' class='"+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img "+E+" src='"+D+"' class='"+p+"' width='"+q+"' height='"+A+"'/></a>":"<div "+F+" class='"+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img "+E+" src='"+D+"' class='"+p+"' width='"+q+"' height='"+A+"'/></div>")}else v>1280&&i?(D=r(t,B,C,x),l+="<div class='filler "+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img src='"+HZ.utils.Config.emptyGifData+"' class='grayFiller "+z+" "+p+"' width='"+B+"' height='"+C+"'></div>"):(D=r(t,q,A,x),l+="<div class='filler "+o+" "+z+"' data-stnd='"+q+","+A+"' data-full='"+B+","+C+"'><img src='"+HZ.utils.Config.emptyGifData+"' class='grayFiller "+z+" "+p+"' width='"+q+"' height='"+A+"'></div>")}for(u=n;u<d.length;u++)t=d[u],l+="<div class='hidden' lb-sid='"+t+"'></div>";return l+="</div>",g&&(l+="</a>"),l};this.getMosaicHtmlForSpaceIds=function(a,b,c,d,e){return HZ.utils.Config.isResponsive?i(a,!0,b,c,d):j(a,!0,b,c,d,e)},this.getMosaicHtmlForImageIds=function(a,b,c,d,e){return HZ.utils.Config.isResponsive?i(a,!1,b,c,d):j(a,!1,b,c,d,e)}},function(a){a.widget("hz.mosaic",{options:{dataName:"hz"},_getAndValidateData:function(a,b,c){var d=a.data(b);if(void 0===d)throw"incompatible element, no data";for(var e in c){var f=c[e];if(f instanceof Array){var g=!1;for(var h in f)if("undefined"!=typeof d[f[h]]){g=!0;break}if(!g)throw"incompatible element, required attribute not found"}else if("undefined"==typeof d[f])throw"incompatible element, required attribute not found: "+f}return d},_create:function(){var b=this._getAndValidateData(this.element,this.options.dataName,["includeLinks","groupLink","mosaicGroup"]);this.includeLinks=b.includeLinks,this.groupLink=b.groupLink,this.mosaicGroup=b.mosaicGroup;var c="";"undefined"!=typeof b.spaceIds?(this.spaceIds=b.spaceIds,c=HZ.mosaic.getMosaicHtmlForSpaceIds(this.spaceIds,this.includeLinks,this.groupLink,this.mosaicGroup,!0)):(this.imageIds=b.imageIds,c=HZ.mosaic.getMosaicHtmlForImageIds(this.imageIds,this.includeLinks,this.groupLink,this.mosaicGroup,!0)),this.element.append(a(c))}})}(jQuery);

window.hzmr.push("mosaic:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End mosaic.js  **************/
/************* Start flagContent.js for locale en-US **************/
try {HZ.ns("HZ.flag"),HZ.flag.flagDialogInstance=null,HZ.flag.FlagDialog=function(){HZ.flag.FlagDialog.superclass.constructor.call(this);var a=this;this.prepare=function(){var c,d,e,f,g,h,i;c=_hgt("Report Comment"),d=_hgt("Why are you reporting this comment?"),h=$('<div id="report-dialog"><form action="javascript:;"><div class="why-report text-bold mbm">'+d+'</div>\n			<ul id="report-type-list" class="list-unstyled">\n				<li class="report-type-item radio"><label><input type="radio" name="report-type" class="report-type" value="spam" id="report-spam"/>'+_hgt("Spam")+'</label></li>\n				<li class="report-type-item radio"><label><input type="radio" name="report-type" class="report-type" value="abuse" id="report-abuse"/>'+_hgt("Inappropriate or abusive")+'</label></li>\n				<li class="report-type-item radio"><label><input type="radio" name="report-type" class="report-type" value="dislike" id="report-dislike"/>'+_hgt("I just don't like it")+"</label></li>\n			</ul>\n			</form></div>"),e=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"flagCancelBtn"),f=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Submit"),"flagConfirmBtn"),g=[HZ.ui.AjaxThrobber.getThrobber(),e,f],i={title:c,body:h,controls:g,onViewLoaded:b},a.init(i),a.hideStatus()};var b=function(){HZ.ui.AjaxThrobber.setInCall(!1),$(".report-type").prop("checked",!1),a.hideStatus()};this.bindButtonHandler=function(b){var c=$("#flagConfirmBtn"),d=$("#flagCancelBtn");c.unbind("click").bind("click",function(c){if(a.hideStatus(),b){HZ.ui.AjaxThrobber.setInCall(!0);var d=$(".report-type:checked").val();"undefined"==typeof d?(a.showStatus(_hgt("Please select one of the options.")),HZ.ui.AjaxThrobber.setInCall(!1)):b(c,d)}else HZ.ui.yamdi.Common.hideAllDialogs()}),d.unbind("click").one("click",function(a){HZ.ui.yamdi.Common.hideAllDialogs()})}},HZ.extend(HZ.flag.FlagDialog,HZ.ui.yamdi.Dialog),HZ.flag.ShowFlagDialog=function(a){null===HZ.flag.flagDialogInstance&&(HZ.flag.flagDialogInstance=new HZ.flag.FlagDialog,HZ.flag.flagDialogInstance.prepare());var b="undefined"!=typeof a&&"undefined"!=typeof a.okCallback?a.okCallback:null,c="undefined"!=typeof a&&"undefined"!=typeof a.isComment?a.isComment:!0;c?(HZ.flag.flagDialogInstance.setTitle(_hgt("Report Comment")),HZ.flag.flagDialogInstance.getBody().find(".why-report").text(_hgt("Why are you reporting this comment?"))):(HZ.flag.flagDialogInstance.setTitle(_hgt("Report Post")),HZ.flag.flagDialogInstance.getBody().find(".why-report").text(_hgt("Why are you reporting this post?"))),HZ.ui.Yamdi.show(HZ.flag.flagDialogInstance),HZ.flag.flagDialogInstance.bindButtonHandler(b)};

window.hzmr.push("flagContent:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End flagContent.js  **************/
/************* Start feedComments.js for locale en-US **************/
try {!function(a){a.widget("hz.feedComments",{objectId:null,objectType:null,commentCount:null,fbShareable:null,clearRecentCommentsOnFirstLoad:!1,isProductQuestion:!1,isGetCommentsCalled:!1,$cachedMoreComments:a(),cachedCommentCount:null,options:{source:null,dataName:"hz",loaderClass:"loader",loaderHideClass:"loaderHide",commentsToggleClass:"commentsToggle",editCommentSelector:".editCommentDiv",commentBodyInput:"textarea.commentBody",slideDuration:400,selectors:{commentable:".feedComments",comment:".comment",moreComments:".moreComments",loadedCount:".moreComments .loadedCount",remainingCount:".moreComments .remainingCount",commentCount:".moreComments .commentCount",addCommentForm:".addComment form",lastCommentInput:".addComment form input[name='lastCommentId']",bodyInput:".addComment form textarea[name='body']",seeMoreComments:"a.seeMoreComments",commentsContainer:".commentsContainer",addComment:".addComment",submitButton:".addComment form .submitAddComment",addCommentExtra:".addComment .addCommentExtra",fileInputs:".fileInputs",editErrorMessage:".editCommentDiv .commentError",errorMessage:".addComment .commentError"}},_findObject:function(a){var b=this.element.find(a);return b.length>0?b:null},_initElements:function(){this.elements=new Object;for(var a in this.options.selectors){var b=this.options.selectors[a];this.elements[a]=this._findObject(b)}},_create:function(){this.objectId=null,this.objectType=null,this.topCommentId=null,this.lastCommentId=0,this.commentCount=null,this.numCommentsLoaded=null,this.executing=!1;var a=this._getAndValidateData(this.element,this.options.dataName,["id","type","cc","crc","ipq"]);this.objectId=a.id,this.objectType=a.type,this.commentCount=a.cc,this.fbShareable=a.fbs,this.clearRecentCommentsOnFirstLoad=a.crc,this.isProductQuestion=a.ipq,this._initElements(),null!=this.elements.bodyInput&&(this.elements.bodyInput.css("resize","none").css("height","1em").autosize(),"undefined"!=typeof HZ.modules&&"undefined"!=typeof HZ.modules.SpacePreview&&HZ.modules.SpacePreview.init(this.elements.bodyInput)),this._updateCommentsEvent()},_showLoader:function(b){this.$loadRestoreElement=a(b),this.$loadRestoreElement.addClass(this.options.loaderHideClass).after(a("<div class='"+this.options.loaderClass+"'></div>"))},_hideLoader:function(){this.$loadRestoreElement.siblings("."+this.options.loaderClass).hide().remove(),this.$loadRestoreElement.removeClass(this.options.loaderHideClass)},_initCommentsToggle:function(){this.elements.seeMoreComments.addClass(this.options.commentsToggleClass).text(_hgt("Hide comments"))},_updateCommentsEvent:function(a){if("undefined"!=typeof a&&null!=a&&(this.commentCount=a),"undefined"==typeof this.elements&&this._initElements(),this.elements.comments=this._findObject(this.options.selectors.comment),this.numCommentsLoaded=null!=this.elements.comments?this.elements.comments.length:0,this.numCommentsRemaining=this.commentCount-this.numCommentsLoaded,this.numCommentsLoaded>0){var b=this.elements.comments.first(),c=this._getAndValidateData(b,this.options.dataName,["id"]);this.topCommentId=c.id;var d=this.elements.comments.last();c=this._getAndValidateData(d,this.options.dataName,["id"]),this.lastCommentId=c.id}null!=this.elements.moreComments&&this.numCommentsLoaded>=this.commentCount&&this._initCommentsToggle(),null!=this.elements.loadedCount&&this.elements.loadedCount.html(this.numCommentsLoaded),null!=this.elements.remainingCount&&this.elements.remainingCount.text(this.numCommentsRemaining)},_getAndValidateData:function(a,b,c){var d=a.data(b);if(void 0===d)throw"incompatible element, no data";for(var e in c)if(c.hasOwnProperty(e)){var f=c[e];if(f instanceof Array){var g=!1;for(var h in f)if("undefined"!=typeof d[f[h]]){g=!0;break}if(!g)throw"incompatible element, required attribute not found"}else if("undefined"==typeof d[f])throw"incompatible element, required attribute not found: "+f}return d},deleteClick:function(b){HZ.ui.yamdi.Common.confirm(_hgt("Delete a comment"),_hgt("Are you sure you want to delete this comment?"),_hgt("Delete Comment"),a.proxy(function(){if(!this.executing){this.executing=!0,this.$commentToDelete=a(b.target).closest(this.options.selectors.comment);var c=this.$commentToDelete.data("hz").id;HZ.ajaz.Services.deleteComment(this.objectType,this.objectId,c,a.proxy(this._deleteAjaxHandler,this))}},this),null,null,function(){a(document).trigger("keyboardHandlerRequired",{source:this,event:b})},function(){a(document).trigger("keyboardHandlerReleased",{source:this,event:b})})},_deleteAjaxHandler:function(b){"true"==b.success&&this.$commentToDelete.slideUp(this.options.slideDuration,a.proxy(function(){var a=b.commentCount;if(this.$commentToDelete.remove(),this._updateCommentsEvent(a),HZ.globalComments){var c=this.$commentToDelete.data("hz"),d={commentId:c.id,translation:null,language:c.lang};HZ.globalComments.removeComments([d])}},this)),HZ.ui.yamdi.Common.hideAllDialogs(),this.executing=!1,this._notifyObservers()},editClick:function(b){var c=a(b.target).closest(this.options.selectors.comment).find(this.options.editCommentSelector).first(),d=c.clone();this.$commentToUpdate=a(b.target).closest(this.options.selectors.comment),HZ.ui.yamdi.Common.confirm(_hgt("Edit comment"),d,_hgt("Submit"),a.proxy(function(){if(!this.executing){this.executing=!0;var b=d.find("form [name='objectType']").val(),c=d.find("form [name='objectId']").val(),e=d.find("form [name='commentId']").val(),f=a.trim(d.find("form [name='body']").val()),g=d.find("form [name='privacy']"),h=a(g).prop("checked")?a(g).val():null,i=d.find("form [name='isHtml']").val();d.find(this.options.commentBodyInput).attr("disabled","true"),HZ.ajaz.Services.updateComment(b,c,e,f,h,this.options.source,i,a.proxy(this._editCommentAjaxHandler,this))}},this),null,null,function(){a(document).trigger("keyboardHandlerRequired",{source:this,event:b})},function(){a(document).trigger("keyboardHandlerReleased",{source:this,event:b})})},flagClick:function(b){var c,d,e,f=a(b.currentTarget),g=f.closest(this.options.selectors.comment),h=f.closest(this.options.selectors.commentable),d=g.data("hz").id,i=h.data("hz").type;h.data("hz").ipq;c=i===HZ.ajaz.ContentFlag.COMMENTABLE_GALLERY?HZ.ajaz.ContentFlag.COMMENT:HZ.ajaz.ContentFlag.ANSWER;var j=this;if(g.hasClass("flaggedComment"))this._showLoader(f.parents(".flag-message")),HZ.ajaz.ContentFlag.removeFlag(c,d,function(a){if("true"==a.success){var b=function(){g.removeClass("flaggedComment"),j._hideLoader()};if(UIHelper.isIE8||UIHelper.isIE7||UIHelper.isIE6?(g.css({"max-height":"10000px"}),b()):g.animate({"max-height":"10000px"},"slow",b),"undefined"!=typeof a.as){var c=a.as,d=g.find(".admin-controls"),e=g.find(".hz-spam-control");0===c?(g.removeClass("isolated rejected"),d.removeClass("active"),e.text("")):1===c?(g.removeClass("rejected").addClass("isolated"),d.addClass("active"),e.text("("+_hgt("Pending")+")")):2===c?(g.removeClass("isolated rejected"),d.removeClass("active"),e.text("")):4===c&&(g.addClass("isolated rejected"),d.addClass("active"),e.text("("+_hgt("Rejected")+")"))}}else j._hideLoader()});else{var k=function(a,b){HZ.ajaz.ContentFlag.addFlag(c,d,b,e,function(a){if(HZ.ui.AjaxThrobber.setInCall(!1),"true"===a.success){HZ.ui.yamdi.Common.hideAllDialogs();var b=function(){g.addClass("flaggedComment")};b()}else HZ.flag.flagDialogInstance.showStatus(a.error)})};HZ.flag.ShowFlagDialog({okCallback:k,isComment:!0})}},_editCommentAjaxHandler:function(b){if("true"==b.success&&b.comments){var c=a(b.comments);c.hide(),this.$commentToUpdate.replaceWith(c),c.fadeIn()}HZ.ui.yamdi.Common.hideAllDialogs(),this.executing=!1,this._notifyObservers()},_toggleCommentsContainer:function(){this.elements.commentsContainer.is(":visible")?(this.elements.commentsContainer.slideUp(this.options.slideDuration),this.elements.seeMoreComments.text(_hgt("Show comments"))):this._showCommentsContainer(),this._notifyObservers()},_showCommentsContainer:function(){this.elements.commentsContainer.is(":visible")||(this.elements.commentsContainer.slideDown(this.options.slideDuration),this.elements.seeMoreComments.text(_hgt("Hide comments")))},showMoreClick:function(b){if(a(b.target).hasClass(this.options.commentsToggleClass))this._toggleCommentsContainer();else{if(this.executing)return;if(this.executing=!0,this.isGetCommentsCalled)this._showCachedMoreComments();else{this._showLoader(b.currentTarget),this.clearRecentCommentsOnFirstLoad&&this._clearRecentCommentsPreAjax();var c=this.topCommentId,d=[],e=null,f=this.element.closest(".feedItem").length;HZ.globalComments&&(d=HZ.globalComments.getSelectedLanguages(),e=this.numCommentsRemaining),HZ.ajaz.Services.getComments(this.objectType,this.objectId,e,c,null,this.options.source,d,f,a.proxy(this._showMoreAjaxHandler,this))}}},cachedCommentsExist:function(){return this.isGetCommentsCalled},getComments:function(){this.executing||(this.executing=!0,this.isGetCommentsCalled=!0,HZ.ajaz.Services.getComments(this.objectType,this.objectId,this.numCommentsRemaining,this.topCommentId,null,this.options.source,HZ.globalComments?HZ.globalComments.getSelectedLanguages():[],this.element.closest(".feedItem").length,a.proxy(this._onGetComments,this)))},_onGetComments:function(b){if(b.comments){var c=a(a("<div>").html(b.comments).text()).hide().prependTo(this.elements.commentsContainer);if(this.$cachedMoreComments=c,this.cachedCommentCount=b.commentCount,HZ.globalComments){var d=a.map(c,function(b,c){var d=a(b).data("hz");return{commentId:d.id,translation:null,language:d.lang}});HZ.globalComments.setComments(d,!1),HZ.globalComments.toggleTranslateAllButton(),this.elements.seeMoreComments[0].dispatchEvent(new Event("gc-showMoreComments"))}this.executing=!1}else this.executing=!1},_showCachedMoreComments:function(){this._showLoader(this.elements.seeMoreComments),this.clearRecentCommentsOnFirstLoad&&this._clearRecentCommentsPreAjax(),this.$cachedMoreComments.length?(this._updateCommentsEvent(this.cachedCommentCount),this.$cachedMoreComments.slideDown(this.options.slideDuration,a.proxy(function(){"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&this.$cachedMoreComments.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),this._hideLoader(),this.executing=!1},this)),HZ.globalComments&&HZ.globalComments.toggleTranslateAllButton()):(this._updateCommentsEvent(0),this._hideLoader(),this.executing=!1),HZ.globalComments&&(HZ.globalComments.enableSelectAllLanguagesView(),this.elements.moreComments.hide()),this.isGetCommentsCalled=!1},_clearRecentCommentsPreAjax:function(){this.topCommentId=4294967295},_clearRecentCommentsPostAjax:function(){this.elements.commentsContainer.empty(),this.clearRecentCommentsOnFirstLoad=!1},_showMoreAjaxHandler:function(b){if(b.comments){this.clearRecentCommentsOnFirstLoad&&this._clearRecentCommentsPostAjax();var c=a(a("<div>").html(b.comments).text());c.hide(),this.elements.commentsContainer.prepend(c);var d=b.commentCount;if(this._updateCommentsEvent(d),c.slideDown(this.options.slideDuration,a.proxy(function(){"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&c.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),this._hideLoader(),this.executing=!1},this)),HZ.globalComments){var e=a.map(c,function(b,c){var d=a(b).data("hz"),e={commentId:d.id,translation:null,language:d.lang};return e});HZ.globalComments.setComments(e,!1),HZ.globalComments.toggleTranslateAllButton(),this.elements.seeMoreComments[0].dispatchEvent(new Event("gc-showMoreComments"))}}else this._updateCommentsEvent(0),this._hideLoader(),this.executing=!1;HZ.globalComments&&(HZ.globalComments.enableSelectAllLanguagesView(),this.elements.moreComments.hide())},_addCommentKeypress:function(a){var b=a.keyCode?a.keyCode:a.which;13!=b||a.shiftKey||(a.preventDefault(),this.submitAddComment(a))},validateAddComment:function(){return this.executing?!1:""==a.trim(this.elements.bodyInput.val())?!1:(this.executing=!0,this.elements.bodyInput.attr("disabled","true"),!0)},updateLastCommentFormInput:function(){null!=this.lastCommentId&&this.elements.lastCommentInput.val(this.lastCommentId)},submitAddComment:function(b){if(HZ.feedComments.requireLoggedIn(69)&&!this.executing){var c=this.elements.bodyInput.attr("placeholder"),d=a.trim(this.elements.bodyInput.val()),e=parseInt(this.elements.bodyInput.attr("maxlength"),10)||1e4;if(""==d||d===c)return void this.elements.errorMessage.text(_hgt("Please enter your comment.")).slideDown(this.options.slideDuration);var f=d.length;if(f>e){var g=_hgt("Your post is {numOfCharsToDelete} too long, posts can be up to {lengthLimit} characters. Please make it a little shorter and try again.",{lengthLimit:e,numOfCharsToDelete:_hgtp("","1 character","{n} characters",f-e,{n:f-e})});return void this.elements.errorMessage.text(g).slideDown(this.options.slideDuration)}if(this.options.source){var h=this.elements.addCommentForm.find("input [name='source']");if(0==h.length){var h=a("<input type='hidden' name='source' value='"+this.options.source+"'/>");this.elements.addCommentForm.append(h)}}var i=a.proxy(function(){this.executing=!0,this.updateLastCommentFormInput();var b={success:a.proxy(function(b,c,d,e){var f=a.parseJSON(a(b).text());this._addCommentAjaxHandler(f);var g=this.elements.addComment.find("textarea.add-comment-rte");g.data("hz-addCommentRte")&&g.addCommentRte("destroy")},this),error:a.proxy(function(a,b,c){this._addCommentAjaxHandler(c)},this)};if(HZ.globalComments){var c=HZ.globalComments.getSelectedLanguages(),d=this.elements.addCommentForm.find("input[name=preferredLanguages]");-1==a.inArray("other",c)&&c.push("other"),d.length?d.val(c.join(",")):(d=a('<input type="hidden" name="preferredLanguages" value="'+c.join(",")+'">'),this.elements.addCommentForm.append(d));var e=this.elements.addCommentForm.find("input[name=lastCommentId]");if(e.length){for(var f,g=0;g<c.length;g++){var h=c[g],i=HZ.globalComments.getLastCommentIdByLanguage(h);i=parseInt(i)||null,(!f||i>f)&&(f=i)}e.val(f||e.val())}}var j=this.elements.addCommentForm.find("input[name=isReferrerGalleryFeed]");j.length?j.val(1):a('<input type="hidden" name="isReferrerGalleryFeed">').val(1).appendTo(this.elements.addCommentForm),this.elements.addCommentForm.ajaxSubmit(b),this.elements.addCommentForm.find("input, textarea, button, select").attr("readonly","true"),this._showLoader(this.elements.submitButton),this._showCommentsContainer()},this);i()}},_addCommentAjaxHandler:function(b){if(b&&"true"==b.success){var c=a(b.comments);c.hide(),this.elements.commentsContainer.append(c),this.elements.addCommentForm.get(0).reset(),this.elements.addCommentExtra.hide(),this.elements.addComment.find(".hzProIndicator").hide(),null!=this.elements.fileInputs&&(this.elements.fileInputs[0].innerHTML=this.elements.fileInputs[0].innerHTML,this.elements.fileInputs.hide().find("input").hide().first().show()),this.elements.addCommentForm.find(".attachment-previews").empty(),"undefined"!=typeof HZ.modules&&"undefined"!=typeof HZ.modules.SpacePreview&&HZ.modules.SpacePreview&&HZ.modules.SpacePreview.clearCache&&HZ.modules.SpacePreview.clearCache(this.elements.bodyInput),this.elements.bodyInput.trigger("autosize"),this.elements.bodyInput.trigger("reset"),this.elements.errorMessage.hide();var d=b.commentCount;if(this._updateCommentsEvent(d),c.fadeIn((this.options.slideDuration,a.proxy(function(){"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&c.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler)},this))),HZ.globalComments){var e=a.map(c,function(b,c){var d=a(b).data("hz"),e={commentId:d.id,translation:null,language:d.lang};return e});HZ.globalComments.setComments(e,!0)}}else HZ.ui.yamdi.Common.alert(_hgt("Unable to add comment"),_hgt("Unable to add comment.  Please reload the page and try again."));this.executing=!1,this.elements.addCommentForm.find("input, textarea, button, select").removeAttr("readonly"),this._hideLoader(),this._notifyObservers()},_notifyObservers:function(){this.options.contentChangedHandler&&this.options.contentChangedHandler()}})}(jQuery),HZ.ns("HZ.feedComments"),HZ.feedComments=new function(){var a={source:null,feedContainer:".feedContainer",feedInfo:".feedInfo",feedActions:".feedActions"},b="hz-feedComments",c={feedComments:".feedComments",commentButton:"a.commentButton",showCommentLink:"a.show-comments",addCommentInput:".addComment form textarea[name='body']",addComment:".addComment",fileInputs:".fileInputs",addCommentExtra:".addCommentExtra",submitButton:".submitAddComment",seeMoreComments:".moreComments a",deleteComment:".comment .deleteComment",editComment:".comment .editComment",attachFiles:".addComment .link--addPhoto",attachFilesInput:".addComment .addCommentFileInput",proIndicator:".hzProIndicator.hzProfileCompleted.hzProView",flagComment:".comment .flagComment, .comment .unflag"};this.init=function(b){var e=!1,f=function(){$(".add-comment-rte").each(function(a,b){$(b).data("hz-addCommentRte")&&$(b).addCommentRte("destroy")}),$(".edit-comment-rte").each(function(a,b){$(b).data("hz-editCommentRte")&&$(b).editCommentRte("destroy")})};if(!b.source)throw"source attribute required";config={},$.extend(config,a,b),null==$(config.feedContainer).data("feedCommentsConfig")&&($(config.feedContainer).data("feedCommentsConfig",config),$(c.addCommentInput).initPlaceHolders(),$(config.feedContainer).on("mouseover",c.proIndicator,function(a){var b=$(this);b.tipBubble({id:"proIndicatorHelp",content:_hgt("This pro has a complete profile."),point:"north",width:"auto",offsetY:4,position:"absolute",attachTo:"body",showCloseBtn:!1})}).on("mouseout",c.proIndicator,function(){var a=$(this);a.tipBubble("hide")}),$(config.feedContainer).on("click",c.commentButton+","+c.showCommentLink,function(a){var b=$(this).closest(config.feedInfo);if(0!=b.length){var d=$(b).parents(".feedItem").find(c.feedComments);0!=d.length&&(d.show(),"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&d.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),$(this).is(c.commentButton)&&d.find(c.addCommentInput).focus())}}),$(config.feedContainer).on("focus",c.addCommentInput,function(a){$(document).trigger("keyboardHandlerRequired",{source:this,event:a});var b=(d(this,config),$(this).parents(c.feedComments).find(c.addCommentExtra));b.is(":visible")||b.show(),$(this).parents(c.addComment).find(".hzProIndicator").show(),f(),$(this).prop("disabled",!0).closest(".addComment").find(".link--addPhoto").hide(),e?$(this).addCommentRte({onFocus:function(){$(document).trigger("keyboardHandlerRequired",{source:this,event:a})},onBlur:function(){HZ.ui.Yamdi.isShowing()||$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}}).prop("disabled",!1):HZ.utils.ResourceLoader.requireCommentRichTextEditorResources($.proxy(function(){$(this).addCommentRte({onFocus:function(){$(document).trigger("keyboardHandlerRequired",{source:this,event:a})},onBlur:function(){HZ.ui.Yamdi.isShowing()||$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}}).prop("disabled",!1),e=!0},this))}),$(config.feedContainer).on("blur",c.addCommentInput,function(a){$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}),$(config.feedContainer).on("click",c.submitButton,function(a){var b=d(this,config);b.submitAddComment(a)}),$(config.feedContainer).on("click",c.seeMoreComments,function(a){var b=d(this,config);b.showMoreClick(a)}),$(config.feedContainer).on("click",c.deleteComment,function(a){a.preventDefault();var b=d(this,config);b.deleteClick(a)}),$(config.feedContainer).on("click",c.editComment,function(a){f();var b=$(this).closest(".comment").find("textarea.edit-comment-rte");if(b.length)e?b.editCommentRte({onFocus:function(){$(document).trigger("keyboardHandlerRequired",{source:this,event:a})},onBlur:function(){HZ.ui.Yamdi.isShowing()||$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}}):HZ.utils.ResourceLoader.requireCommentRichTextEditorResources(function(){b.editCommentRte({onFocus:function(){$(document).trigger("keyboardHandlerRequired",{source:this,event:a})},onBlur:function(){HZ.ui.Yamdi.isShowing()||$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}}),e=!0});else{var c=d(this,config);c.editClick(a)}}),$(config.feedContainer).on("click",c.flagComment,function(a){a.preventDefault();var b=d(this,config);b.flagClick(a)}),$(config.feedContainer).on("click",c.attachFiles,function(a){if(HZ.feedComments.requireLoggedIn(69)){var b=$(a.currentTarget).parents(c.addComment).find(c.fileInputs);b.is(":visible")||(b.show(),UIHelper.isMSIE||b.find("input.addCommentFileInput").first().click())}}),$(config.feedContainer).on("change",c.attachFilesInput,function(a){$(this).next("input.addCommentFileInput").css("display","block")}))},this.requireLoggedIn=function(a){return null==HZ.data.CurrentSessionUser?(HZ.auth.Manager.signup(a),!1):!0},this.getFeedCommentsWidget=function(a){return d(a,config)};var d=function(a,d){var e=null,f=$(a).closest(c.feedComments);return e=f.data(b),null==e&&(e=f.feedComments({source:d.source}).data(b)),e}};

window.hzmr.push("feedComments:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End feedComments.js  **************/
/************* Start jquery.form.min.js for locale en-US **************/
try {!function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData,a.fn.ajaxSubmit=function(b){function c(b){var c,d,e=a.param(b).split("&"),f=e.length,g=[];for(c=0;f>c;c++)e[c]=e[c].replace(/\+/g," "),d=e[c].split("="),g.push([decodeURIComponent(d[0]),decodeURIComponent(d[1])]);return g}function f(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var i=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});b.uploadProgress&&(i.xhr=function(){var a=jQuery.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),a}),i.data=null;var j=i.beforeSend;return i.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(i)}function g(c){function e(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function f(){function b(){try{var a=e(q).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),g(A),v&&clearTimeout(v),v=void 0}}var c=k.attr("target"),f=k.attr("action");w.setAttribute("target",n),h||w.setAttribute("method","POST"),f!=l.url&&w.setAttribute("action",l.url),l.skipEncodingOverride||h&&!/post/i.test(h)||k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(v=setTimeout(function(){u=!0,g(z)},l.timeout));var i=[];try{if(l.extraData)for(var j in l.extraData)l.extraData.hasOwnProperty(j)&&(a.isPlainObject(l.extraData[j])&&l.extraData[j].hasOwnProperty("name")&&l.extraData[j].hasOwnProperty("value")?i.push(a('<input type="hidden" name="'+l.extraData[j].name+'">').val(l.extraData[j].value).appendTo(w)[0]):i.push(a('<input type="hidden" name="'+j+'">').val(l.extraData[j]).appendTo(w)[0]));l.iframeTarget||(p.appendTo("body"),q.attachEvent?q.attachEvent("onload",g):q.addEventListener("load",g,!1)),setTimeout(b,15);try{w.submit()}catch(m){var o=document.createElement("form").submit;o.apply(w)}}finally{w.setAttribute("action",f),c?w.setAttribute("target",c):k.removeAttr("target"),a(i).remove()}}function g(b){if(!r.aborted&&!F){try{E=e(q)}catch(c){d("cannot access response document: ",c),b=A}if(b===z&&r)return r.abort("timeout"),void y.reject(r,"timeout");if(b==A&&r)return r.abort("server abort"),void y.reject(r,"error","server abort");if(E&&E.location.href!=l.iframeSrc||u){q.detachEvent?q.detachEvent("onload",g):q.removeEventListener("load",g,!1);var f,h="success";try{if(u)throw"timeout";var i="xml"==l.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+i),!i&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(g,250);var j=E.body?E.body:E.documentElement;r.responseText=j?j.innerHTML:null,r.responseXML=E.XMLDocument?E.XMLDocument:E,i&&(l.dataType="xml"),r.getResponseHeader=function(a){var b={"content-type":l.dataType};return b[a]},j&&(r.status=Number(j.getAttribute("status"))||r.status,r.statusText=j.getAttribute("statusText")||r.statusText);var k=(l.dataType||"").toLowerCase(),n=/(json|script|text)/.test(k);if(n||l.textarea){var o=E.getElementsByTagName("textarea")[0];if(o)r.responseText=o.value,r.status=Number(o.getAttribute("status"))||r.status,r.statusText=o.getAttribute("statusText")||r.statusText;else if(n){var s=E.getElementsByTagName("pre")[0],t=E.getElementsByTagName("body")[0];s?r.responseText=s.textContent?s.textContent:s.innerText:t&&(r.responseText=t.textContent?t.textContent:t.innerText)}}else"xml"==k&&!r.responseXML&&r.responseText&&(r.responseXML=H(r.responseText));try{D=J(r,k,l)}catch(w){h="parsererror",r.error=f=w||h}}catch(w){d("error caught: ",w),h="error",r.error=f=w||h}r.aborted&&(d("upload aborted"),h=null),r.status&&(h=r.status>=200&&r.status<300||304===r.status?"success":"error"),"success"===h?(l.success&&l.success.call(l.context,D,"success",r),y.resolve(r.responseText,"success",r),m&&a.event.trigger("ajaxSuccess",[r,l])):h&&(void 0===f&&(f=r.statusText),l.error&&l.error.call(l.context,r,h,f),y.reject(r,"error",f),m&&a.event.trigger("ajaxError",[r,l,f])),m&&a.event.trigger("ajaxComplete",[r,l]),m&&!--a.active&&a.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,r,h),F=!0,l.timeout&&clearTimeout(v),setTimeout(function(){l.iframeTarget||p.remove(),r.responseXML=null},100)}}}var i,j,l,m,n,p,q,r,s,t,u,v,w=k[0],x=!!a.fn.prop,y=a.Deferred();if(c)for(j=0;j<o.length;j++)i=a(o[j]),x?i.prop("disabled",!1):i.removeAttr("disabled");if(l=a.extend(!0,{},a.ajaxSettings,b),l.context=l.context||l,n="jqFormIO"+(new Date).getTime(),l.iframeTarget?(p=a(l.iframeTarget),t=p.attr("name"),t?n=t:p.attr("name",n)):(p=a('<iframe name="'+n+'" src="'+l.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),q=p[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{q.contentWindow.document.execCommand&&q.contentWindow.document.execCommand("Stop")}catch(e){}p.attr("src",l.iframeSrc),r.error=c,l.error&&l.error.call(l.context,r,c,b),m&&a.event.trigger("ajaxError",[r,l,c]),l.complete&&l.complete.call(l.context,r,c)}},m=l.global,m&&0===a.active++&&a.event.trigger("ajaxStart"),m&&a.event.trigger("ajaxSend",[r,l]),l.beforeSend&&l.beforeSend.call(l.context,r,l)===!1)return l.global&&a.active--,y.reject(),y;if(r.aborted)return y.reject(),y;s=w.clk,s&&(t=s.name,t&&!s.disabled&&(l.extraData=l.extraData||{},l.extraData[t]=s.value,"image"==s.type&&(l.extraData[t+".x"]=w.clk_x,l.extraData[t+".y"]=w.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(l.extraData=l.extraData||{},l.extraData[C]=B),l.forceSync?f():setTimeout(f,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var h,i,j,k=this;"function"==typeof b&&(b={success:b}),h=this.attr("method"),i=this.attr("action"),j="string"==typeof i?a.trim(i):"",j=j||window.location.href||"",j&&(j=(j.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:j,success:a.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var l={};if(this.trigger("form-pre-serialize",[this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=b.traditional;void 0===m&&(m=a.ajaxSettings.traditional);var n,o=[],p=this.formToArray(b.semantic,o);if(b.data&&(b.extraData=b.data,n=a.param(b.data,m)),b.beforeSubmit&&b.beforeSubmit(p,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=a.param(p,m);n&&(q=q?q+"&"+n:n),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+q,b.data=null):b.data=q;var r=[];if(b.resetForm&&r.push(function(){k.resetForm()}),b.clearForm&&r.push(function(){k.clearForm(b.includeHidden)}),!b.dataType&&b.target){var s=b.success||function(){};r.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(s,arguments)})}else b.success&&r.push(b.success);b.success=function(a,c,d){for(var e=b.context||this,f=0,g=r.length;g>f;f++)r[f].apply(e,[a,c,d||k,k])};var t=a('input[type=file]:enabled[value!=""]',this),u=t.length>0,v="multipart/form-data",w=k.attr("enctype")==v||k.attr("encoding")==v,x=e.fileapi&&e.formdata;d("fileAPI :"+x);var y,z=(u||w)&&!x;b.iframe!==!1&&(b.iframe||z)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){y=g(p)}):y=g(p):y=(u||w)&&x?f(p):a.ajax(b),k.removeData("jqxhr").data("jqxhr",y);for(var A=0;A<o.length;A++)o[A]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name)if(b&&f.clk&&"image"==l.type)l.disabled||f.clk!=l||(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type&&!l.disabled){c&&c.push(l);var o=l.files;if(o.length)for(i=0;i<o.length;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&"undefined"!=typeof k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone()):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery);

window.hzmr.push("jquery.form.min:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.form.min.js  **************/
/************* Start spacePreview.js for locale en-US **************/
try {HZ.ns("HZ.modules"),HZ.modules.SpacePreview=new function(){var a=new RegExp("https?://(?:www\\.)?(?:mytest|houzztest|houzz2?|stghouzz)\\.[A-Za-z\\./]*/("+HZ.utils.Config.spaceCommand+"|"+HZ.utils.Config.galleryCommand+"|projects)/(\\d+)(?=(?:\\D|$))[/\\?=&\\+%\\w-#]*","g");this.init=function(a){if("undefined"!=typeof a&&a.length){var c;c=a.parents(".bubble--post").length?$('<div class="generatedPhotoCtn clearfix"></div>').insertAfter(a.parents(".bubble--post")):$('<div class="generatedPhotoCtn clearfix"></div>').insertAfter(a),c.data("urlToId",{}),a.data("preview",{analyzing:!1}),""!==a.val()&&b(a,c);var d=function(){var d=$(this).data("preview"),e=d&&d.analyzing?d.analyzing:!1;e||b(a,c)};a.bind("keyup.linkConverter",$.debounce(700,d)).bind("change.linkConverter",d).bind("paste.linkConverter",function(){setTimeout(d,0)}).bind("reset",d),c.on("click",".removeThumb",function(b){e($(this),a,c)})}};var b=function(b,e){var f,g,h,i,j,k=[],l=[],m=[];g=b.data("preview"),g&&(g.analyzing=!0),b.data("preview",g),f=b.val(),h=e.data("urlToId"),k=f.match(a),null===k&&(k=[]),j=k.length;for(var n=0;j>n;n++){var i=k[n];"undefined"==typeof h[i]&&l.push(i)}for(var i in h)h.hasOwnProperty(i)&&-1===$.inArray(i,k)&&m.push(i);m.length&&d(e,m),l.length?c(k,b,e):b.data("preview",{analyzing:!1})},c=function(a,b,c){var d,e,f,g,h=0,i=a.join(" "),j=$("#questionsGuidelines"),k=function(a){var b="";for(var i in a)if(a.hasOwnProperty(i)&&(e=a[i],d=HZ.data.Spaces.get(e),d&&d.iids&&d.iids[0])){g=d.iids[0],f=HZ.data.Images.get(g),f&&(h=f.ts),h=h?h:"0000";var k=HZ.utils.Links.getStaticImageUrlHost()+g+"_5-"+h+"/home-design.jpg";b+='<div class="houseThumbnail" data-id="'+e+'"><img width="75px" height="55px" src="'+k+'"/><a href="javascript:;" class="removeThumb"></a></div>'}b?c.html(b).show():c.html("").hide(),b&&j.length>0&&j.hide()};i?HZ.ajaz.Services.getMinimalSpaceData(i,function(a){if(a&&"true"===a.success&&a.spaces&&a.images){var d=HZ.data.Spaces.getCollection(),e=HZ.data.Images.getCollection();$.extend(!0,d,a.spaces),$.extend(!0,e,a.images),HZ.data.Spaces.addAll(d),HZ.data.Images.addAll(e),k(a.urlToId),c.data("urlToId",a.urlToId),b.data("preview",{analyzing:!1})}else b.data("preview",{analyzing:!1})}):b.data("preview",{analyzing:!1})},d=function(a,b){for(var c=a.data("urlToId"),d=b.length,e=0;d>e;e++){var f=b[e],g=c[f];a.find("[data-id="+g+"]").remove(),delete c[f]}""==a.html()&&a.hide(),a.data("urlToId",c)},e=function(a,b,c){var d,e,f,g,h=c.data("urlToId");d=a.closest(".houseThumbnail"),e=d.attr("data-id");for(var i in h)h.hasOwnProperty(i)&&h[i]===e&&(d.hide().remove(),f=b.val(),g=f.replace(i,""),b.val(g),delete h[i]);""==c.html()&&c.hide(),c.data("urlToId",h)}};

window.hzmr.push("spacePreview:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End spacePreview.js  **************/
/************* Start zoomable.js for locale en-US **************/
try {HZ.ns("HZ.modules.Zoomable"),HZ.modules.Zoomable=new function(){var a,b;this.init=function(){$("body").off("click.photoViewer",".js-enlarge").on("click.photoViewer",".js-enlarge",a)},a=function(a){"undefined"==typeof b&&(b=new HZ.dialogs.PhotoViewer,b.prepare()),b.showImage(this),a.preventDefault()}},HZ.ns("HZ.dialogs.PhotoViewer"),HZ.dialogs.PhotoViewer=function(){HZ.dialogs.PhotoViewer.superclass.constructor.call(this);var $body,$imgThumbDiv,shouldShowImgInfo,imageObj,zoomCallback,zoomIndex,imageArr,imgNatureWidth,imgNatureHeight,DIALOG_FRAME_PADDING=15,IMAGE_INFO_DIV_HEIGHT=30,PHOTO_VIEWER_MARGIN=.025,IMAGE_DIV_MIN_HEIGHT=190;this.prepare=function(){var a,b;$body=$('<div id="photoViewer"><div class="hzLoadingDlgThrobber"></div><div class="imgThumb text-center"></div><div class="imgInfo text-l text-right hidden"></div><div id="photoViewerClose"><a id="photoViewerCloseBtn" href="javascript:;"><i class="hzi-font hzi-CloseX"></i></a></div><div id="imgAlt"></div></div>'),$imgThumbDiv=$body.find(".imgThumb"),a=this,b={title:"",body:$body,controls:[],hideDialogOnBgClick:!0,dialogClassName:"dialogFrame-equalPadding dialogFrame-bodyOnly",onViewUnloaded:onViewUnloaded},this.init(b),this.getView().find("#photoViewerCloseBtn").unbind("click.photoViewer").bind("click.photoViewer",function(){a.getDelegate().hide(a)}),this.getView().find(".imgThumb").unbind("click.photoViewer").bind("click.photoViewer",function(){a.getDelegate().hide(a)}),this.getView().find("#imgAlt").bind("click",function(b){var c=$(b.target),d=c.attr("data-index"),e=$(imageArr[d]).attr("data-zoomsrc");a.showImage(imageObj,e),c.parent().find(".selected").removeClass("selected").end(),c.addClass("selected")})},this.showImage=function(a,b){var c,d,e,f=this,g=b?b:getSrc(a),h=$(a).attr("data-pin-no-hover"),i=$(a).attr("onmousedown"),j=$(a).attr("ondragstart"),k=$(a).attr("onselectstart"),l=$(a).attr("oncontextmenu");if(g&&(shouldShowImgInfo=!1,c=$(a).parent(),c.is("a")&&(d=c.attr("href"),d&&/^(https?|ftp):\/\/[^\s\/$.?#].[^\s]*$/.test(d)&&(shouldShowImgInfo=!0,e=/(houzz|gardenweb)/i.test(d))),window.lightbox&&window.lightbox.isShowing()?window.lightbox.showDialog(this):HZ.ui.Yamdi.show(this),showThrobber(),imageObj=new Image,imageObj.onload=function(){hideThrobber(),imgNatureWidth=imageObj.width,imgNatureHeight=imageObj.height,$imgThumbDiv.empty().append(imageObj),shouldShowImgInfo&&$body.find(".imgInfo").empty().append('<a href="'+d+'" class="colorLink one-line" target="_blank">'+(e?_hgt("Visit Page")+'<span class="more-icon"></span>':d)+"</a>").removeClass("hidden"),f.handleResize(),$(window).on("resize.photoViewer",$.throttle(250,$.proxy(f.handleResize,f)))},imageObj.src=g,"undefined"!=typeof h&&imageObj.setAttribute("data-pin-no-hover",h),"undefined"!=typeof i&&imageObj.setAttribute("onmousedown",i),"undefined"!=typeof j&&imageObj.setAttribute("ondragstart",j),"undefined"!=typeof k&&imageObj.setAttribute("onselectstart",k),"undefined"!=typeof l&&imageObj.setAttribute("oncontextmenu","event.preventDefault();return false;"),!$body.closest(".modal").hasClass("altZoom")&&imageArr&&imageArr.length)){if(imageArr.length>1){for(var m="",n=0;n<imageArr.length;n++){var o=n==zoomIndex?"selected":"",p=$(imageArr[n]).attr("src");m+="<img class='"+o+"' data-index='"+n+"' src='"+p+"' />"}$body.find("#imgAlt").append(m),f.handleResize()}$body.closest(".modal").addClass("altZoom")}};var showThrobber=function(){$body.find(".hzLoadingDlgThrobber").removeClass("hidden")},hideThrobber=function(){$body.find(".hzLoadingDlgThrobber").addClass("hidden")},getSrc=function(a){var b=$(a),c=b.attr("src");if(b.hasClass("img-external")===!1){var d=/_[0-9]{1,2}((?:-(?:\S)+)?.jpg)/,e=/-w(\d+)-h(\d+)-/;if(b.attr("data-callback")&&(zoomCallback=b.attr("data-callback")),b.attr("data-zoomindex")){zoomIndex=b.attr("data-zoomindex"),imageArr=b.siblings();var f=$(imageArr[zoomIndex]);c=f.attr("data-zoomsrc")}else b.data("imgurl")?(c=b.data("imgurl"),b.data("alt-target")&&(imageArr=$(b.data("alt-target")))):c=d.test(c)?c.replace(d,"_9$1"):c.replace(e,function(a,b,c){var d,e,f,g=630;return d=parseInt(b,10),e=parseInt(c,10),f=d/e,Math.max(d,e)==d?(d=g,e=parseInt(g/f,10)):(e=g,d=parseInt(g*f,10)),"-w"+d+"-h"+e+"-"})}return c},onViewUnloaded=function(){imageObj=null,imgNatureWidth=null,imgNatureHeight=null,$imgThumbDiv.empty().css({width:"auto",height:"auto"}),$body.find(".imgInfo").empty().addClass("hidden"),$body.find("#imgAlt").empty(),$body.closest(".modal").removeClass("altZoom"),$(window).off("resize.photoViewer"),zoomCallback&&eval(zoomCallback)(),$(".hbs .modal-dialog").css({"margin-top":"","margin-bottom":"",width:""})};this.handleResize=function(){if("undefined"!=typeof imageObj){var a=UIHelper.getScreenBounds(),b=Math.floor(a.w*(1-2*PHOTO_VIEWER_MARGIN)-2*DIALOG_FRAME_PADDING-2),c=Math.floor(a.h*(1-2*PHOTO_VIEWER_MARGIN)-2*DIALOG_FRAME_PADDING-2);shouldShowImgInfo&&(c-=IMAGE_INFO_DIV_HEIGHT);var d=imgNatureWidth/imgNatureHeight,e=Math.min(b,imgNatureWidth),f=Math.floor(e/d);f>c&&(f=Math.min(c,imgNatureHeight),e=Math.floor(f*d)),UIHelper.setBounds(imageObj,{x:"auto",y:"auto",w:e,h:f}),UIHelper.setBounds($imgThumbDiv[0],{x:"auto",y:"auto",w:Math.max(e,Math.min(b,Math.floor(d*IMAGE_DIV_MIN_HEIGHT))),h:Math.max(f,IMAGE_DIV_MIN_HEIGHT)}),$(imageObj).css({position:"relative",top:IMAGE_DIV_MIN_HEIGHT>f?"50%":0,"margin-top":IMAGE_DIV_MIN_HEIGHT>f?-Math.floor(f/2):0}),HZ.ui.Yamdi.center(),$(".hbs .modal-dialog").css({"margin-top":"0","margin-bottom":"0",width:Math.max(e,Math.min(b,Math.floor(d*IMAGE_DIV_MIN_HEIGHT)))+30})}}},HZ.extend(HZ.dialogs.PhotoViewer,HZ.ui.yamdi.Dialog),$(document).ready(function(){HZ.modules.Zoomable.init()});

window.hzmr.push("zoomable:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End zoomable.js  **************/
/************* Start bootstrap-dropdown.js for locale en-US **************/
try {!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||e.toggleClass("open"),g.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(jQuery);

window.hzmr.push("bootstrap-dropdown:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End bootstrap-dropdown.js  **************/
/************* Start questions.js for locale en-US **************/
try {HZ.ns("HZ.questions"),HZ.questions.CreateQuestionForm={choiceTpl:'<div class="choiceLine form-group"><div class="col-xs-12 text-xxs choice-header">'+_hgt("OPTION {optionNum}",{optionNum:"__TOKEN__"})+'</div><div class="col-xs-6 prs"><input type="text" class="optionInput" name="newOption__TOKEN__" placeholder="'+_hgt("Add option: enter text or paste a Houzz link.")+'"/></div><div class="col-xs-6 pls"><input type="file" class="optionFileInput" name="newOptionImage__TOKEN__"/><input type="hidden" class="optionHouseIdInput" name="newOptionHouseId__TOKEN__"/><div class="houseThumb empty"><img width="30" height="30"/><a href="javascript:;" class="removeThumb"></a></div></div></div>',maxChoices:25,isPostToFollowersContext:!1,postToFollowersPlaceholder:null,designDilemmaPlaceholder:null,beforeAfterPlaceholder:null,pollPlaceholder:null,usingHouzzPlaceholder:null,defaultPlaceholder:null,TOPIC_ID_NOT_SPECIFIED:-1,TOPIC_ID_DESIGN_DILEMMA:5,TOPIC_ID_BEFORE_AFTER:15,TOPIC_ID_PRO_TO_PRO:13,TOPIC_ID_POST:16,TOPIC_ID_POLL:18,TOPIC_ID_USING_HOUZZ:11,init:function(a){var b=this;"undefined"!=typeof a&&"undefined"!=typeof a.isPostToFollowersContext&&(b.isPostToFollowersContext=a.isPostToFollowersContext),$("#editQuestion [placeholder]").initPlaceHolders(),$("#expandFileInputs").click(function(){var a=$("#editQuestionAddPhotoButtonBox").show();return UIHelper.isMSIE||a.find(".editQuestionFileInput").first().click(),$(this).unbind("click"),$(this).addClass("afterExpandFileInputs"),!1}),$(".editQuestionFileInput").bind("change",function(){$(this).next("input").show()}),$(".editQuestionTopic .dropdown-label").length&&($(".editQuestionTopic .dropdown-label").dropdown(),$(".editQuestionTopic .dropdown-label").on("click.dropdown",b.repositionDropdown),$(".editQuestionTopic .dropdown-menu").on("click",".dropdown-menuItem",function(){var a=$(this),b=parseInt(a.parent().data("topic"),10);$(".editQuestionTopic .dropdown-menu li").removeClass("selected"),a.parent().addClass("selected"),$("#editQuestionTopicBox option[value="+b+"]").prop("selected",!0).change(),$(".editQuestionTopic .dropdown-label").html(a.find(".dropdown-itemName").text()+"<i></i>")})),$("#editQuestionTopicBox").bind("change",function(){var a=$("#editQuestionTitle"),c=$("#editQuestionBody"),d=parseInt($("#editQuestionTopicBox option:selected").val(),10);if(d==b.TOPIC_ID_POLL?$("#editQuestionAddChoicesContainer").show():$("#editQuestionAddChoicesContainer").hide(),d!=b.TOPIC_ID_NOT_SPECIFIED&&d!=b.TOPIC_ID_POST||!b.isPostToFollowersContext)if(a.show(),a.val()==a.attr("placeholder")&&a.val(""),c.val()==c.attr("placeholder")&&c.val(""),HZ.utils.Config.isResponsive)switch(a.attr("placeholder",_hgt("Title")),d){case b.TOPIC_ID_BEFORE_AFTER:c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_POLL:c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_USING_HOUZZ:c.attr("placeholder",_hgt('Tell us the details here. "Using Houzz" is a place to get technical support for the site and apps.'));break;case b.TOPIC_ID_PRO_TO_PRO:c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_NOT_SPECIFIED:case b.TOPIC_ID_DESIGN_DILEMMA:default:c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."))}else switch(d){case b.TOPIC_ID_BEFORE_AFTER:a.attr("placeholder",_hgt('Example title: "Our new kitchen!"')),c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_POLL:a.attr("placeholder",_hgt('Example title: "Dining Benches - Yes or No?" or "Favorite Fall Decor"')),c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_USING_HOUZZ:a.attr("placeholder",_hgt('Example title: "How do I add a collaborator to my ideabook"')),c.attr("placeholder",_hgt('Tell us the details here. "Using Houzz" is a place to get technical support for the site and apps.'));break;case b.TOPIC_ID_PRO_TO_PRO:a.attr("placeholder",_hgt('Example title: "Best practices with new clients on Houzz?"')),c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."));break;case b.TOPIC_ID_NOT_SPECIFIED:case b.TOPIC_ID_DESIGN_DILEMMA:default:a.attr("placeholder",_hgt('Example title: "Need help for my kitchen"')),c.attr("placeholder",_hgt("Tell us the details here, share photos if you have them."))}else a.hide(),c.val()==c.attr("placeholder")&&c.val(""),c.attr("placeholder",_hgt("What are you working on?"));$("#editQuestion [placeholder]").initPlaceHolders("refresh")}),b.isPostToFollowersContext||$("#editQuestionTitle").charCount({css:"counter text-xs hidden-xs pull-right",counterElement:"div",allowed:70,prewarning:20,warning:10,counterText:_hgt("Characters Left")+" "}),$("#editQuestionAddChoicesContainer").on("focus",".optionInput:last",function(a){b.addChoiceLine(a),$(this).focus()}),$(".optionInput").bind("paste change",function(a){var c=$(this);setTimeout(function(){b.extractUrl(c)},0)}),$("#editQuestionAddChoicesContainer").on("click",".removeThumb",function(){var a=$(this).parents(".choiceLine");a.find(".custom-file-input-wrapper").length?a.find(".custom-file-input-wrapper").show():a.find(".optionFileInput").show(),a.find(".optionHouseIdInput").val(""),a.find(".houseThumb").addClass("empty")}),$("#editQuestionBody").parents(".postToFollowers").length||$("#editQuestionBody").autosize()},repositionDropdown:function(){var a,b,c=$(".ask-form .dropdown-label"),d=c.height(),e=$(".ask-form .dropdown-menu"),f=e.height();b=c.offset().top-$(document).scrollTop(),a=$(window).height()-b-d,f>a&&b>a?e.addClass("north"):e.removeClass("north")},extractUrl:function(a){var b=a.val(),c=b.replace(HZ.utils.Links.spaceUrlRegex,function(b){return function(b,c,d,e){var f=b,g=a.parents(".choiceLine");g.find(".optionHouseIdInput").val(c);var h=b;return HZ.ajaz.Services.getSpaceData(c,-1,1,function(a){if(a&&"true"==a.success&&a.results&&a.results.spaceInfo){HZ.data.Spaces.addAll(a.results.spaceInfo),a.results.images&&HZ.data.Images.addAll(a.results.images);var b=a.results.spaceInfo[c];h=b.t,g.find(".custom-file-input-wrapper").length?g.find(".custom-file-input-wrapper").hide():g.find(".optionFileInput").hide(),g.find(".houseThumb").find("img").attr("src",HZ.utils.Links.getSpaceImageUrl(c,30,30,!1)),g.find(".houseThumb").removeClass("empty")}f=h},{async:!1}),f}}(a));a.val(c)},addChoiceLine:function(a){var b=this,c=$(".choiceLine"),d=c.length+1;if(!(d>b.maxChoices)){var e;e=this.choiceTpl.replace(/__TOKEN__/gi,d);var f=$(e);f.insertAfter(c.last()),f.find("[placeholder]").blur(),f.find(".optionInput").bind("paste",function(a){var c=$(this);setTimeout(function(){b.extractUrl(c)},0)})}},validate:function(){HZ.ui.InputButtonUtils.disableButton($("#editQuestionSubmitBtn"));var a,b,c,d=!1,e=!0,f="",g=!1,h=$("#editQuestionBody"),i=$.trim(h.initPlaceHolders("getValue"));if($("input[name=topic]").length?a=$("input[name=topic]").val():$("#editQuestionTopicBox").length&&(a=$("#editQuestionTopicBox option:selected").val()),g=18==a,(a==this.TOPIC_ID_POST||this.isPostToFollowersContext&&a==this.TOPIC_ID_NOT_SPECIFIED)&&(e=!1),$("#editQuestionTopicBox").length>0&&a==this.TOPIC_ID_NOT_SPECIFIED&&!this.isPostToFollowersContext)d=!0,f=_hgt("Please select a topic");else if(e&&""==$.trim($("#editQuestionTitle").initPlaceHolders("getValue")))d=!0,f=_hgt("Please enter a title for your post");else if(""==i)d=!0,f=_hgt("Please enter details for your post");else if(b=parseInt(h.attr("maxlength"),10)||3e3,c=i.length,c>b)d=!0,f=_hgt("Your post is {numOfCharsToDelete} too long, posts can be up to {lengthLimit} characters. Please make it a little shorter and try again.",{lengthLimit:b,numOfCharsToDelete:_hgtp("","1 character","{n} characters",c-b,{n:c-b})});else if(g){var j=0;$(".optionInput").each(function(){$(this).initPlaceHolders("getValue").length>0&&j++}),2>j&&(d=!0,f=_hgt("Please enter at least 2 options for your poll"))}return d?(HZ.ui.InputButtonUtils.enableButton($("#editQuestionSubmitBtn")),$("#editQuestionMainDiv .alert-error").html(f).show(),this.isPostToFollowersContext&&$(".ask-form").addClass("push-down"),!1):($("#editQuestionMainDiv .alert-error").html("").hide(),this.isPostToFollowersContext&&$(".ask-form").removeClass("push-down"),!0)}},HZ.questions.CreatePostToFollowersForm=new function(){this.init=function(a){a.isPostToFollowersContext=!0,HZ.questions.CreateQuestionForm.init(a);var b,c=$("#editQuestionBody");"undefined"!=typeof HZ.modules&&"undefined"!=typeof HZ.modules.SpacePreview&&HZ.modules.SpacePreview.init(c),c.click(function(){b=$(this).closest("form"),b.hasClass("expanded")||(b.addClass("expanded"),c.css("height","4em"),c.css("max-height","40em"),c.autosize({animateDuration:100,extraSpace:20,minHeight:48}))})}},HZ.questions.VotePolls={settings:{allowVoteFromVisitors:1},self:null,$pollEntry:null,$pollDisplays:null,pollShareDialog:null,init:function(a){self=this,a&&(self.settings=$.extend({},self.settings,a)),$(".voteMe").click(function(a){if(a.stopPropagation(),self.settings.allowVoteFromVisitors||HZ.data.CurrentSessionUser){var b=$(this),c=b.attr("for"),d=b.parents(".pollContainer").attr("qid");self.$pollEntry=b.parents(".pollEntry"),self.$pollEntry.find(".voteMe").hide(),self.$pollDisplays=self.$pollEntry.find(".optionVote"),self.$pollDisplays.html(_hgt("Submitting your vote...")),HZ.ajaz.Services.createPollVote(d,c,$.proxy(self.oncomplete,this))}else HZ.auth.Manager.signup(self.settings.signUpSourceLink?self.settings.signUpSourceLink:null)}),self.pollShareDialog=new HZ.questions.PollShareDialog,self.pollShareDialog.prepare()},oncomplete:function(a){function b(){i||(0==d.length?(d=$('<a class="hzBtn button-baseIcon whitebutton button-noFrame button-voteCount" href="javascript:;" title="'+j+'">\n						<span class="button-icon hzi-font hzi-Vote"></span>\n						<span class="button-label">'+e+"</span>\n					</a>"),$(".userActionsRow").append(d)):(d.attr("title",j),d.find(".button-label").text(e)),self.pollShareDialog.updateShareLinks(self.settings.shareConfig,l),HZ.ui.Yamdi.show(self.pollShareDialog),i=!0)}var c='<div class="barGph"><div class="barGphBar" style="width:0%"/></div>',d=self.$pollEntry.parents("#questionCard").find(".button-voteCount");if("undefined"==typeof a.error)for(var e=a.results.total,f=a.results.options,g=a.results.optionId,h=(a.pollUrl+"#pollOptions",f.length),i=!1,j=_hgtp("0 Votes","1 Vote","{total} Votes",e,{total:e}),k=$.grep(f,function(a,b){return parseInt(a.id,10)===g}),l=$("<div>"+(k.length?k[0].body:null)+"</div>").text(),m=0;h>m;m++){var n=f[m].id,o=f[m].count,p=Math.floor(o/e*100),q=self.$pollEntry.find("#optionVote"+n),r='<div class="voteCount">'+_hgtp("0 Votes","1 Vote","{total} Votes",o,{total:o})+"</div>";r+=c,q.html(r),q.find(".barGphBar").animate({width:p+"%"},2e3,b),n===k[0].id&&self.$pollEntry.find("#optionVote"+n).prev(".optionText").after('<a class="voteIcon" href="javascript:;" title="'+_hgt("You voted for this option.")+'"><span class="hzi-font hzi-Vote"></span></a>')}else self.$pollDisplays.html(a.error)}},HZ.questions.showSendPollShareEmail=function(a,b){HZ.dialogs.EmailDialog.prepare({type:HZ.questions.POLL_EMAIL_TYPE,referenceId:HZ.questions.POLL_EMAIL_REF_ID,subject:a,message:b}),HZ.ui.Yamdi.show(HZ.dialogs.EmailDialog)},HZ.questions.PollShareDialog=function(){HZ.questions.PollShareDialog.superclass.constructor.call(this);var a=null,b=575,c=380,d=611,e=368,f=600,g=600,h=null,i=null,j=null;this.prepare=function(){var a,b,c,d;a='<a compid="poll-fb-share" href="javascript:" class="poll-fb-share"><div class="facebook-btn poll-share-btn"><span class="poll-share-logo hzi-font hzi-Facebook"></span></div></a>',b='<a compid="poll-tw-share" href="javascript:" class="poll-tw-share"><div class="twitter-btn poll-share-btn"><span class="poll-share-logo hzi-font hzi-Twitter"></span></div></a>',c='<a compid="poll-google-share" href="javascript:" class="poll-google-share"><div class="google-btn poll-share-btn"><span class="poll-share-logo hzi-font hzi-Google"></span></div></a>',d='<a compid="poll-email-share" href="javascript:" class="poll-email-share"><div class="email-btn poll-share-btn"><div class="poll-share-logo"></div><span class="text-m text-dt-s">'+_hgt("Email")+"</span></div></a>";var e=$('<div id="poll-share-dialog">\n				<div class="poll-calltoaction mbl"><div class="poll-title mbm">%POLLTITLE%</div><div class="poll-vote">%POLLVOTE%</div></div>\n				<div class="poll-share-bar clearfix">'+a+b+c+d+"</div>\n			</div>\n			</div>"),f=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("No thanks"),"cancelBtn"),g={title:_hgt("Share this poll"),body:e,controls:[f]};this.init(g),this.getControls().find("#cancelBtn").click(function(){HZ.ui.yamdi.Common.hideAllDialogs()})},this.updateShareLinks=function(k,l){a=k.pollTitle?k.pollTitle:"Poll on Houzz.com",h=k.twUserName,i=k.fbAppId,j=k.fbRedirectUri;var m=HZ.utils.Html.template(this.getBody().html(),{POLLTITLE:a,POLLVOTE:l});this.setBody(m);var n=this.getBody(),o=_hgt('I voted for "{option}."',{option:l}),p="link="+k.shareUrl+"&name="+encodeURIComponent(o)+"&description="+encodeURIComponent(a+" >> Vote now!");n.find(".poll-fb-share").click(function(a){var b=HZ.ui.Utils.getCenteredPopupPosition(e,d),c="width="+d+", height="+e+", left="+b.left+", top="+b.top+", status=1",f="https://www.facebook.com/dialog/feed?display=popup&app_id="+i+"&redirect_uri="+j+"&"+p;window.open(f,"fb-share",c)});var q="url="+k.shareUrl+"&text="+encodeURIComponent(a+" "+o);n.find(".poll-tw-share").click(function(a){var d=HZ.ui.Utils.getCenteredPopupPosition(c,b),e="width="+b+", height="+c+", left="+d.left+", top="+d.top+", status=1",f="https://twitter.com/share?via="+h+"&"+q;window.open(f,"tw-share",e)}),n.find(".poll-google-share").click(function(a){var b=HZ.ui.Utils.getCenteredPopupPosition(g,f),c="width="+f+", height="+g+", left="+b.left+", top="+b.top+", status=1",d="https://plus.google.com/share?url="+k.shareUrl;window.open(d,"g-share",c)}),n.find(".poll-email-share").click(function(b){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.questions.showSendPollShareEmail(a,o)})}},HZ.extend(HZ.questions.PollShareDialog,HZ.ui.yamdi.Dialog);

window.hzmr.push("questions:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End questions.js  **************/
/************* Start like.js for locale en-US **************/
try {HZ.ns("HZ.like"),HZ.like.LikeDialog=function(){HZ.like.LikeDialog.superclass.constructor.call(this);var a,b=this;this.prepare=function(){var d=$('<div id="hzlikeListContainer"><ul></ul></div>');a=d.find("ul");var e={title:_hgt("People who like this"),body:d,onViewLoaded:c};b.init(e)},this.appendToLikeList=function(b){a.append(b)};var c=function(){a.empty()}},HZ.extend(HZ.like.LikeDialog,HZ.ui.yamdi.Dialog),HZ.like.Like=new function(){function a(a,d){var e=$(d),f=e.attr("data-object-type"),g=e.attr("data-object-id"),h=e.attr("data-action-only");f&&g||(f=e.parents(".hzBtn").attr("loty"),g=e.parents(".hzBtn").attr("loid"));parseInt(e.attr("data-self"),10);a==c.showlikeAction&&HZ.ui.Yamdi.show(b),HZ.ajaz.Like.like(a,g,f,function(d){var i=e.parents(".likeContainer");if(d&&"true"==d.success){var j=d.numberOfLikes,k=i.find(".hz-showlike"),l="",m=d.userList;if(a==c.likeAction)e.addClass("unlike").removeClass("like").attr("title",_hgt("Unlike")).find(".hz-likeAction").remove(),e.find(".hz-like").addClass("hz-liked hzi-Liked").removeClass("hz-like hzi-Like"),"0"===h&&(l=_hgtp("You like this.","You and 1 person like this.","You and {countOfOtherLikes} people like this.",j-1,{countOfOtherLikes:j-1}),0==k.length&&(k=$('<a class="hz-showlike" data-object-type="'+f+'" data-object-id="'+g+'" title="'+l+'" href="#"></a>'),i.append(k)),k.html(_hgtp("","1 Like","{numOfLikes} Likes",j,{numOfLikes:j})));else if(a==c.unlikeAction)e.addClass("like").removeClass("unlike").attr("title",_hgt("Like")),e.find(".hz-liked").addClass("hz-like hzi-Like").removeClass("hz-liked hzi-Liked"),0==j||"1"===h?(k.remove(),e.append('<span class="hz-likeAction">'+_hgt("Like")+"</span>")):j>0&&(l=_hgtp("","1 person likes this.","{countOfLikes} people like this.",j,{countOfLikes:j}),k.attr("title",l),k.html(_hgtp("","1 Like","{numOfLikes} Likes",j,{numOfLikes:j})));else if(a==c.showlikeAction)for(var n,o,p,q,r,s=m.length,t=0;s>t;t++){var u=$("<li></li>"),v=m[t];n=v.link,o=v.userName,p=v.userImage,q=$("<a class='likeUserImg hz-user-image' href='"+n+"'><img width='40' height='40' src='"+p+"'/></a>"),r=$("<div class='likeUserTextInfo'><a class='colorLink' href='"+n+"'>"+o+"</a></div><div style='clear:both'></div>"),u.append(q).append(r),t==s-1&&u.addClass("last-like"),b.appendToLikeList(u),HZ.ui.Yamdi.center()}}else if(a==c.showlikeAction){HZ.ui.Yamdi.hide(b);var w=_hgt("Cannot get the list of people who like this.<br/>{error}<br/>Please try it later.",{error:d.error});HZ.ui.yamdi.Common.alert(_hgt("Internal Error"),w)}})}var b,c,d,e=this;d={typeQuestion:5,typeIbk:1,typeAnswer:6,typeComment:9,typeReview:20,isCobrand:!1,likeAction:"like",unlikeAction:"unlike",showlikeAction:"showlikes",likeButtonLabel:_hgt("Like"),likeButtonIngLabel:_hgt("Liked"),likeIconClass:"hzi-Like-Button",unlikeIconClass:"hzi-CloseX",likeIconIngClass:"hzi-Like-Button button-icon-liked"};var f=function(a){switch(parseInt(a,10)){case c.typeQuestion:return _hgt("Like this discussion");case c.typeIbk:return _hgt("Like this ideabook");case c.typeAnswer:case c.typeComment:return _hgt("Like this comment");case c.typeReview:return _hgt("Like this review");default:return _hgt("Like this item")}},g=function(a){switch(parseInt(a,10)){case c.typeQuestion:return _hgt("Stop liking this discussion");case c.typeIbk:return _hgt("Stop liking this ideabook");case c.typeAnswer:case c.typeComment:return _hgt("Stop liking this comment");case c.typeReview:return _hgt("Stop liking this review");default:return _hgt("Stop liking this item")}};this.init=function(f){f&&(c=$.extend({},d,f)),HZ.data.CurrentSessionUser?($(document).on("click","a.like",function(b){var d=this;a(c.likeAction,d),b.preventDefault()}),$(document).on("click","a.unlike",function(b){var d=this;a(c.unlikeAction,d),b.preventDefault()})):$(document).on("click","a.like,a.unlike",function(a){HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink,a.preventDefault()}),b=new HZ.like.LikeDialog,b.prepare();var g=$(".button-like");$(document).on("click","a.hz-showlike",function(b){var d=this;b.preventDefault(),!HZ.data.CurrentSessionUser&&c.isCobrand?HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink:a(c.showlikeAction,d)}),g.length&&($(document).on("click",".button-like .counter-bubble",function(b){b.stopImmediatePropagation(),b.preventDefault();var d=this;!HZ.data.CurrentSessionUser&&c.isCobrand?HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink:a(c.showlikeAction,d)}),$(document).on("click",".button-like",function(a){HZ.data.CurrentSessionUser?e.updateLikes(".button-like"):(HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink,a.preventDefault())}),$(document).on("mouseover",".button-like",function(){"unlike"==$(this).attr("lop")&&HZ.like.Like.updateLikeBtn($(this),!0)}).on("mouseout",".button-like",function(){"unlike"==$(this).attr("lop")&&e.updateLikeBtn($(this),!1)}),$(document).on("mouseover",".button-like .counter-bubble",function(a){var b=$(this).parents(".button-like");"unlike"==b.attr("lop")&&(e.updateLikeBtn(b,!1),a.stopImmediatePropagation())}).on("mouseout",".button-like .counter-bubble",function(){var a=$(this).parents(".button-like");"unlike"==a.attr("lop")&&e.updateLikeBtn(a,!0)}))},this.updateLikes=function(a){var b=$(a),d=b.attr("lop"),e=b.attr("loty"),h=b.attr("loid");HZ.ajaz.Like.like(d,h,e,function(a){if(a&&"true"==a.success){var h=b.find(".button-icon"),i=b.find(".button-label"),j=b.find(".counter-bubble");if(d==c.likeAction){if(i.text(c.likeButtonIngLabel),b.attr("title",g(e)),b.attr("lop",c.unlikeAction),j.length>0){j.text(a.formattedLikeCount?a.formattedLikeCount:parseInt(j[0].innerHTML,10)+1);var k=_hgtp("","You and 1 person like this.","You and {countOfOtherLikes} people like this.",a.numberOfLikes-1,{countOfOtherLikes:a.numberOfLikes-1});j.attr("title",k)}else j=$('<span title="'+_hgt("You like this.")+'" class="counter-bubble">1</span>'),b.append(j);h.removeClass(c.likeIconClass).addClass(c.likeIconIngClass)}else if(d==c.unlikeAction){if(i.text(c.likeButtonLabel),b.attr("title",f(e)),b.attr("lop",c.likeAction),j.length>0){var l=a.formattedLikeCount?a.formattedLikeCount:parseInt(j[0].innerHTML,10)-1;if(1>l)j.remove();else{j.text(l);var k=_hgtp("","1 person likes this.","{countOfLikes} people like this.",a.numberOfLikes,{countOfLikes:a.numberOfLikes});j.attr("title",k)}}h.removeClass(c.likeIconIngClass).removeClass(c.unlikeIconClass).addClass(c.likeIconClass)}}})},this.updateLikeBtn=function(a,b){var d=$(a),e=d.find(".button-icon");b?e.removeClass(c.likeIconIngClass).addClass(c.unlikeIconClass):e.removeClass(c.unlikeIconClass).addClass(c.likeIconIngClass)}};

window.hzmr.push("like:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End like.js  **************/
/************* Start clipping.js for locale en-US **************/
try {HZ.ns("HZ.clipping"),HZ.clipping.Clip=new function(){function a(a,c){var d=$(c),e=d.attr("data-object-type"),f=d.attr("data-object-id");e&&f||(e=d.parents(".hzBtn").attr("loty"),f=d.parents(".hzBtn").attr("loid")),HZ.ajaz.Clipping.clip(a,f,e,function(c){var e=d.parents(".clipContainer");c&&"true"==c.success&&(a==b.clipAction?(d.addClass("unclip").removeClass("clip").attr("title",_hgt("Bookmarked")),d.find(".hz-clip").addClass("hz-unclip hzi-Bookmarked-Circle").removeClass("hz-clip hzi-Bookmark-Circle"),e.find(".hz-clips").text(_hgt("Bookmarked"))):a==b.unclipAction&&(d.addClass("clip").removeClass("unclip").attr("title",_hgt("Bookmark")),d.find(".hz-unclip").addClass("hz-clip hzi-Bookmark-Circle").removeClass("hz-unclip hzi-Bookmarked-Circle"),e.find(".hz-clips").text(_hgt("Bookmark"))))})}var b,c;c={typeAnswer:6,typeComment:9,clipAction:"clip",unclipAction:"unclip",clipTitle:"Bookmark",unclipTitle:"Bookmarked"},this.init=function(a){a&&(b=$.extend({},c,a))},this.executeClip=function(c){if(HZ.data.CurrentSessionUser){var d=$(c).parents(".clipContainer").find(".hz-clips").text(),e=d==b.unclipTitle;e?a(b.unclipAction,c):a(b.clipAction,c)}else HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Clipping.SOURCE_LINK_CLIPPING,null,window.location.href):window.location.href=b.clipRedirectLink}};

window.hzmr.push("clipping:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End clipping.js  **************/
/************* Start homeSlideShow.js for locale en-US **************/
try {HZ.ns("HZ.homeSlideShow"),HZ.homeSlideShow=new function(a){var b=this,c={fadeTime:400},d={thumbSize:null,width:null,height:null,isVisitor:!0},e={left:null,right:null},f={trackingIframe:null,trackingOffset:0},g=null,h=null,i=[],j=!1,k=5,l=2,m=null,n=null,o={credit:null,moreInfo:null},p=0,q=null,r={forward:1,backward:-1},s=!0,t=null,u=null,v=!1,w=!1,x=3e3,y=function(a){var b="",c="";return a&&a.professionalName&&null!=a.professionalName&&""!==a.professionalName?(b=a.professionalName,c=HZ.utils.Links.getProfessionalLink(a.authorName)):a&&a.authorName&&"sususu"!=a.authorName&&(b=a.authorDisplayName,c=HZ.utils.Links.getUserLink(a.authorName)),{title:b,url:c}},z=function(){$(h).animate({height:d.height}),A(q)},A=function(a){var b,c,d,e,f;if(b=a.data("data"),b&&b.height&&b.width&&!(h.width()<=0))if(c=HZ.utils.Config.isResponsive?h.width():h.width()<1600?1600:h.width(),d=h.height(),f=Math.floor(b.height*(c/b.width)),d>f){f=d,e=Math.floor(b.width*(d/b.height));var g=Math.floor((c-e)/2);a.find(".l-photo").css({left:g,width:e,height:f})}else{e=c;var i=Math.floor((d-f)/2),g=Math.floor((h.width()-e)/2);a.find(".l-photo").css({top:i,left:g,width:e,height:f})}},B=function(a){switch(a.keyCode){case 39:return b.navigateForward(),!1;case 37:return b.navigateBackward(),!1}},C=function(a){f.trackingIframe.src="getSlideshowSpaces/offset="+a},D=function(){s=!0},E=function(){s=!1},F=function(a,b){FeaturedSpacesAjaxController.getFeaturedSpaces2(a,d.thumbSize,function(a){if(a.results){for(var c=0;c<a.results.length;c++){var d=a.results[c];if(i[0]&&d.spaceId==i[0].spaceId){j=!0;break}i.push(d)}a.spaces&&HZ.data.Spaces.addAll(a.spaces),a.images&&HZ.data.Images.addAll(a.images),b&&b()}},d.width)},G=function(a){if(E(),e.left.fadeIn(c.fadeTime),e.right.fadeIn(c.fadeTime),j||i[p+k]||F(t+i.length),0==v&&0==p&&(H(i[1]),H(i[2]),v=!0),p+=a,p>=i.length&&(p=i.length-1),0>p&&(p=0),0==p?(e.left.fadeOut(c.fadeTime),D()):p>=i.length-1&&(p=i.length-1,e.right.fadeOut(c.fadeTime),D()),i[p]){var b=i[p+a*l];b&&H(b),I(i[p],null,function(){var b=p-a*(l+1);if(b>=0&&b<i.length){var c=i[b].spaceId;n.find("#frame"+c).remove()}})}else D()},H=function(a){if(a){var b=a?a.spaceId:null,c=UIHelper.isMSIE?m.clone().hide():m.clone().addClass("o");$("<img>").attr("src",a.imageUrl);n.find("#frame"+b).length>0||(c.data("data",a),c.attr("id","frame"+a.spaceId),c.find(".l-photo").attr("src",a.imageUrl),n.append(c))}},I=function(a,b,d){if(0==n.find("#frame"+a.spaceId).length)return void D();var e=b?b:c.fadeTime,f=y(a),g=n.find("#frame"+a.spaceId);o.credit.attr("href",f.url).html(f.title),o.moreInfo.attr("href",HZ.utils.Links.getSpaceLink(a.spaceId)).attr("target","_blank"),A(g),$("#homeSlideShow").attr("objId",a.spaceId),UIHelper.isMSIE?(q.fadeOut(e,function(){this.style.removeAttribute("filter"),q=g,D()}),g.show(),d&&d()):(q.removeClass("current"),g.addClass("current"),setTimeout(function(){D(),q=g},e),d&&d()),$("#homeSlideShow").attr("current-screen",p)},J=function(a){a.stopPropagation()};this.addToIdeabook=function(){var a=q.data("data");HZ.spaceActions.showAddToIdeabookDialog(a.spaceId)},this.emailPhoto=function(){var a=q.data("data");HZ.spaceActions.showEmailDialog(a.spaceId)},this.navigateForward=function(a){b.navigate(r.forward)},this.navigateBackward=function(a){p>0&&b.navigate(r.backward)},this.navigate=function(a){h.focus(),1==s&&(G(a),f.trackingOffset%10==0&&C(f.trackingOffset),f.trackingOffset++)},this.loadImagesForAutoplay=function(){F(0,$.proxy(function(){i.length&&this.autoplayImages()},this))},this.autoplayImages=function(){var a=0,b=i.length;b?(H(i[a]),H(i[(a+1)%b]),q=n.find(".sliceShowFrame"),I(i[a],0),C(f.trackingOffset),window.setInterval(function(){var c;a=(a+1)%b,c=(a+1)%b,H(i[c]),I(i[a],0)},x)):this.loadImagesForAutoplay()},this.init=function(a){g=$("#"+a.rootContainer),h=$("#"+a.container),t=a.startingIndex,d.thumbSize=a.thumbSize,d.width=a.width,d.height=a.height,d.isVisitor=a.isVisitor,e.left=g.find("#navigateLeft").hide(),e.right=g.find("#navigateRight"),n=g.find("#frames"),f.trackingIframe=g.find("#trackingIframe")[0],m=g.find("#frame").attr("id","").remove(),u=g.find("#homeSlideShowActionBar"),o.credit=$("#by"),o.moreInfo=$("#moreInfo"),w=a.autoplay,x=a.autoplayInterval,$.merge(i,a.data?a.data:{}),w?this.autoplayImages():(H(i[0]),q=n.find(".slideShowFrame"),I(i[0],0),h.bind("keydown",B)),1==d.isVisitor?h.addClass("visitor"):(g.find("#homeSlideShowActionBar").bind("click",function(a){b.navigateForward()}),g.find("#homeSlideShowActionBar, .graybutton, .white-bar").bind("click",J)),$(document).ready(function(){setTimeout(function(){e.right.animate({right:"2%"},500,function(){$(this).animate({right:"0%"},500)})},2e3),$(".promo-banner-container").on("click",".hzi-CloseX",function(){var a=$(this).closest(".promo-banner-container"),b=$(a).attr("data-tip-id");a.remove(),HZ.ajaz.Services.tipBox(b)})}),$(window).resize(z)},this.onContextMenu=function(a){var b=q.data("data").spaceId;return PhotoContextMenu.show(a,b),!1}};

window.hzmr.push("homeSlideShow:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End homeSlideShow.js  **************/
/************* Start tipBox.js for locale en-US **************/
try {HZ.ns("HZ.tipBox"),HZ.tipBox.TipBox=new function(){function a(a,b,c){a&&a.length&&!b.hasClass("tipBoxAbsolute")&&c.css("margin-left",a.offset().left+a.outerWidth()/2-b.offset().left-c.outerWidth()/2)}function b(b){var c=$(".hzTipBox");c.each(function(b){var c,d=$(this),e=d.attr("data-tip-id"),f=d.attr("data-name"),g=".hzTipBox[data-name="+f+"] ",h=$(g+".tipBoxArrow");if(h&&h.length>0&&d&&d.length>0){var i=h.data("point-to");c=$(i),d.hasClass("tipBoxAbsolute")&&(c.prepend(d),d.hover(function(a){a.stopPropagation()})),a(c,d,h),h.fadeTo(1e3,1),$(window).resize(function(){a(c,d,h),h.fadeTo(1e3,1)})}d&&d.length>0&&d.removeClass("invisibleBox"),$(".hzCloseTip").click(function(a){d.slideUp("fast",function(){HZ.ajaz.Services.tipBox(e)})})})}var c=!1;this.init=function(a){c||(b(a),c=!0)}};

window.hzmr.push("tipBox:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End tipBox.js  **************/
/************* Start footerMenu.js for locale en-US **************/
try {HZ.ns("HZ.footerMenu"),HZ.footerMenu=new function(){var a=!1,b=null,c=3e3,d=60,e=16,f=0,g=this;this.hideBottomFooter=function(){b.css("height","0px"),b.addClass("hide-footer"),a=!1,$("#stickyFooterActions").css("cssText","")},this.showBottomFooter=function(){a=!0,b.removeClass("hide-footer");var c=d+f+e;$("#stickyFooterActions").css("cssText","bottom:"+c+"px !important;"),b.css("height",d+f+"px")},$(document).ready(function(){if(b=$("#footer-menu"),b.length){var d=null,e=function(){clearTimeout(d)},h=function(){clearTimeout(d),d=setTimeout(function(){g.hideBottomFooter()},c)},i=function(b){var c=$(window).scrollTop();c>350?(a||g.showBottomFooter(),h()):a&&350>=c&&g.hideBottomFooter()};$(window).on("scroll",$.throttle(250,i)),b.on("mouseenter",e).on("mouseleave",h).on("click",function(a){a.stopPropagation()}),$("#mainContent").click(function(){g.hideBottomFooter()});var j=$("#cookieBanner");j.length&&(f=j.height(),$("#cookieBanner a.button-icon").click(function(){f=0,a&&g.showBottomFooter()}))}var k=$("#footerMenuSiteSelector");k.length&&k.on("change",function(){var a=$(this).find(":selected"),b=a.attr("objid"),c=a.text(),d={scopeId:"site-redirection-footer",compId:"menu-footer",objId:b,currentSiteId:HZ.utils.Config.currentSiteId,anchorText:c};HZ.utils.Logger.sendEventLogLightweight(HZ.utils.Logger.EVENT_TYPE_USER_CLICK,d)})})};

window.hzmr.push("footerMenu:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End footerMenu.js  **************/
/************* Start dropzone.js for locale en-US **************/
try {!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];return g.exports||(g.exports={},g.client=g.component=!0,g.call(this,g.exports,a.relative(e),g)),g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("component-emitter/index.js",function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}c.exports=d,d.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=c.indexOf(b._off||b);return~d&&c.splice(d,1),this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("dropzone/index.js",function(a,b,c){c.exports=b("./lib/dropzone.js")}),a.register("dropzone/lib/dropzone.js",function(a,b,c){(function(){var a,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice;d="undefined"!=typeof Emitter&&null!==Emitter?Emitter:b("emitter"),g=function(){},a=function(a){function b(a,d){var e,f,g;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(b.instances.push(this),a.dropzone=this,e=null!=(g=b.optionsForElement(this.element))?g:{},this.options=c({},this.defaultOptions,e,null!=d?d:{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer?this.previewsContainer=b.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=b.getElements(this.options.clickable,"clickable")),this.init()}var c;j(b,a),b.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded"];var d=0;return b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can only upload {{maxFiles}} files.",accept:function(a,b){return b()},init:function(){return g},forceFallback:!1,fallback:function(){var a,c,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(c=a,a.className="dz-message");return c||(c=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(c)),d=c.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,d=this.options.thumbnailWidth/this.options.thumbnailHeight,a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(a){return d=0,this.element.classList.remove("dz-drag-hover")},dragstart:g,dragend:function(a){return this.element.classList.remove("dz-drag-hover")},dragenter:function(a){return a.preventDefault(),d++,this.element.classList.add("dz-drag-hover")},dragover:function(a){return this.element.classList.add("dz-drag-hover")},dragleave:function(a){return d--,0==d?this.element.classList.remove("dz-drag-hover"):void 0},selectedfiles:function(a){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c=this;return a.previewElement=b.createElement(this.options.previewTemplate),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),a.previewElement.querySelector("[data-dz-name]").textContent=a.name,a.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(a.size),this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;">'+this.options.dictRemoveFile+"</a>"),a._removeLink.addEventListener("click",function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}),a.previewElement.appendChild(a._removeLink)),this._updateMaxFilesReachedClass()},removedfile:function(a){var b;return null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c;return a.previewElement.classList.remove("dz-file-preview"),a.previewElement.classList.add("dz-image-preview"),c=a.previewElement.querySelector("[data-dz-thumbnail]"),c.alt=a.name,c.src=b},error:function(a,b){return a.previewElement.classList.add("dz-error"),a.previewElement.querySelector("[data-dz-errormessage]").textContent=b},errormultiple:g,processing:function(a){return a.previewElement.classList.add("dz-processing"),a._removeLink?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:g,uploadprogress:function(a,b,c){return a.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+b+"%"},totaluploadprogress:g,sending:g,sendingmultiple:g,success:function(a){return a.previewElement.classList.add("dz-success")},successmultiple:g,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:g,complete:function(a){return a._removeLink?a._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:g,maxfilesexceeded:g,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},c=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?k.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},b.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},b.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},b.prototype.getQueuedFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.QUEUED&&f.push(a);return f},b.prototype.getUploadingFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.UPLOADING&&f.push(a);return f},b.prototype.init=function(){var a,c,d,e,f,g,h,i=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(){return i.hiddenFileInput&&document.body.removeChild(i.hiddenFileInput),i.hiddenFileInput=document.createElement("input"),i.hiddenFileInput.setAttribute("type","file"),i.hiddenFileInput.setAttribute("multiple","multiple"),null!=i.options.acceptedFiles&&i.hiddenFileInput.setAttribute("accept",i.options.acceptedFiles),i.hiddenFileInput.style.visibility="hidden",i.hiddenFileInput.style.position="absolute",i.hiddenFileInput.style.top="0",i.hiddenFileInput.style.left="0",i.hiddenFileInput.style.height="0",i.hiddenFileInput.style.width="0",document.body.appendChild(i.hiddenFileInput),i.hiddenFileInput.addEventListener("change",function(){var a;return a=i.hiddenFileInput.files,a.length&&(i.emit("selectedfiles",a),i.handleFiles(a)),d()})})(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(){return i.updateTotalUploadProgress()}),this.on("removedfile",function(){return i.updateTotalUploadProgress()}),this.on("canceled",function(a){return i.emit("complete",a)}),c=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return i.emit("dragstart",a)},dragenter:function(a){return c(a),i.emit("dragenter",a)},dragover:function(a){return c(a),i.emit("dragover",a)},dragleave:function(a){return i.emit("dragleave",a)},drop:function(a){return c(a),i.drop(a)},dragend:function(a){return i.emit("dragend",a)}}}],this.clickableElements.forEach(function(a){return i.listeners.push({element:a,events:{click:function(c){return a!==i.element||c.target===i.element||b.elementInside(c.target,i.element.querySelector(".dz-message"))?i.hiddenFileInput.click():void 0}}})}),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone},b.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getAcceptedFiles(),a.length){for(h=this.getAcceptedFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},b.prototype.getFallbackForm=function(){var a,c,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><button type="submit">Upload!</button></div>',c=b.createElement(d),"FORM"!==this.element.tagName?(e=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(c)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:c)},b.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},b.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},b.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},b.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b;return a>=1e11?(a/=1e11,b="TB"):a>=1e8?(a/=1e8,b="GB"):a>=1e5?(a/=1e5,b="MB"):a>=100?(a/=100,b="KB"):(a=10*a,b="b"),"<strong>"+Math.round(a)/10+"</strong> "+b},b.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?this.element.classList.add("dz-max-files-reached"):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,this.emit("selectedfiles",b),b.length&&(c=a.dataTransfer.items,c&&c.length&&(null!=c[0].webkitGetAsEntry||null!=c[0].getAsEntry)?this.handleItems(c):this.handleFiles(b)))},b.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},b.prototype.handleItems=function(a){var b,c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],null!=c.webkitGetAsEntry?(b=c.webkitGetAsEntry(),b.isFile?this.addFile(c.getAsFile()):b.isDirectory&&this.addDirectory(b,b.name)):this.addFile(c.getAsFile())},b.prototype.accept=function(a,c){return a.size>1024*this.options.maxFilesize*1024?c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){var c=this;return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024&&this.createThumbnail(a),this.accept(a,function(b){return b?(a.accepted=!1,c._errorProcessing([a],b)):c.enqueueFile(a)})},b.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){var c=this;if(a.accepted=!0,a.status!==b.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=b.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return c.processQueue()},1):void 0},b.prototype.addDirectory=function(a,b){var c,d,e=this;return c=a.createReader(),d=function(c){var d,f;for(d=0,f=c.length;f>d;d++)a=c[d],a.isFile?a.file(function(a){return e.options.ignoreHiddenFiles&&"."===a.name.substring(0,1)?void 0:(a.fullPath=""+b+"/"+a.name,e.addFile(a))}):a.isDirectory&&e.addDirectory(a,""+b+"/"+a.name)},c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a){var b,c=this;return b=new FileReader,b.onload=function(){var d;return d=new Image,d.onload=function(){var b,e,f,g,h,i,j,k;return a.width=d.width,a.height=d.height,f=c.options.resize.call(c,a),null==f.trgWidth&&(f.trgWidth=c.options.thumbnailWidth),null==f.trgHeight&&(f.trgHeight=c.options.thumbnailHeight),b=document.createElement("canvas"),e=b.getContext("2d"),b.width=f.trgWidth,b.height=f.trgHeight,e.drawImage(d,null!=(h=f.srcX)?h:0,null!=(i=f.srcY)?i:0,f.srcWidth,f.srcHeight,null!=(j=f.trgX)?j:0,null!=(k=f.trgY)?k:0,f.trgWidth,f.trgHeight),g=b.toDataURL("image/png"),c.emit("thumbnail",a,g)},d.src=b.result},b.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],c.processing=!0,c.status=b.UPLOADING,this.emit("processing",c);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},b.prototype.cancelUpload=function(a){var c,d,e,f,g,h,i;if(a.status===b.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)c=d[e],c.status=b.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)c=d[f],this.emit("canceled",c);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===b.ADDED||i===b.QUEUED)&&(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this;for(r=new XMLHttpRequest,s=0,w=a.length;w>s;s++)d=a[s],d.xhr=r;r.open(this.options.method,this.options.url,!0),r.withCredentials=!!this.options.withCredentials,o=null,f=function(){var b,c,e;for(e=[],b=0,c=a.length;c>b;b++)d=a[b],e.push(E._errorProcessing(a,o||E.options.dictResponseError.replace("{{statusCode}}",r.status),r));return e},p=function(b){var c,e,f,g,h,i,j,k,l;if(null!=b)for(e=100*b.loaded/b.total,f=0,i=a.length;i>f;f++)d=a[f],d.upload={progress:e,total:b.total,bytesSent:b.loaded};else{for(c=!0,e=100,g=0,j=a.length;j>g;g++)d=a[g],(100!==d.upload.progress||d.upload.bytesSent!==d.upload.total)&&(c=!1),d.upload.progress=e,d.upload.bytesSent=d.upload.total;if(c)return}for(l=[],h=0,k=a.length;k>h;h++)d=a[h],l.push(E.emit("uploadprogress",d,e,d.upload.bytesSent));return l},r.onload=function(c){var d;if(a[0].status!==b.CANCELED&&4===r.readyState){if(o=r.responseText,r.getResponseHeader("content-type")&&~r.getResponseHeader("content-type").indexOf("application/json"))try{o=JSON.parse(o)}catch(e){c=e,o="Invalid JSON response from server."}return p(),200<=(d=r.status)&&300>d?E._finished(a,o,c):f()}},r.onerror=function(){return a[0].status!==b.CANCELED?f():void 0},n=null!=(A=r.upload)?A:r,n.onprogress=p,i={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&c(i,this.options.headers);for(g in i)h=i[g],r.setRequestHeader(g,h);if(e=new FormData,this.options.params){B=this.options.params;for(m in B)q=B[m],e.append(m,q)}for(t=0,x=a.length;x>t;t++)d=a[t],this.emit("sending",d,r,e);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,r,e),"FORM"===this.element.tagName)for(C=this.element.querySelectorAll("input, textarea, select, button"),u=0,y=C.length;y>u;u++)j=C[u],k=j.getAttribute("name"),l=j.getAttribute("type"),(!l||"checkbox"!==(D=l.toLowerCase())&&"radio"!==D||j.checked)&&e.append(k,j.value);for(v=0,z=a.length;z>v;v++)d=a[v],e.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),d,d.name);return r.send(e)},b.prototype._finished=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.SUCCESS,this.emit("success",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b.prototype._errorProcessing=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.ERROR,this.emit("error",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b}(d),a.version="3.7.1",a.options={},a.optionsForElement=function(b){return b.id?a.options[e(b.id)]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],/(^| )dropzone($| )/.test(b.className)?f.push(d.push(b)):f.push(void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],a.optionsForElement(c)!==!1?g.push(new a(c)):g.push(void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},h=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},e=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g,h;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=a.name.toLowerCase(),g=0,h=b.length;h>g;g++)if(e=b[g],e=e.trim(),"."===e.charAt(0)){if(-1!==f.indexOf(e,a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof c&&null!==c?c.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",f=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},f(window,a._autoDiscoverFunction)}).call(this)}),a.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),a.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=a("dropzone"):"function"==typeof define&&define.amd?define(function(){return a("dropzone")}):this.Dropzone=a("dropzone")}();

window.hzmr.push("dropzone:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End dropzone.js  **************/
/************* Start home.js for locale en-US **************/
try {HZ.ns("HZ.home"),HZ.home.Page=new function(){this.followSuggestedUser=function(a,b,c){var a=$(a),d=a.hasClass("following")?"u":"f";HZ.actions.Follow.updateFollow(d,b,null,function(b){b&&"true"==b.success&&(a.hasClass("following")?(a.text("Follow"),a.removeClass("following")):(a.addClass("following"),a.text("Following"))),"function"==typeof c&&c(b)})},this.dismissIntlBanner=function(a){setCookie(a,!0),$("#"+a).addClass("hidden")};var a=function(){$nextItem=$(".hp-follow .blockRow.hide").eq(0),$nextItem.fadeIn(),$nextItem.removeClass("hide")},b=function(){0==$(".hp-follow .blockRow").length&&$(".hp-follow").slideToggle()},c=function(c){c&&(c.slideToggle(function(){$(this).remove(),a(),b()}),HZ.ajaz.Suggestions.dismissSuggestions(c.data("id"),"user",function(a){"false"===a.success}))};$(".hp-follow").on("click",".pi-cross",function(a){a.preventDefault(),a.stopPropagation(),c($(this).parent())})};

window.hzmr.push("home:2400");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End home.js  **************/
